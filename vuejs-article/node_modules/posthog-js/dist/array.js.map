{"version":3,"sources":["lz-string.ts","../package.json","config.ts","utils.ts","autocapture-utils.ts","extensions/rageclick.ts","autocapture.ts","storage.ts","gdpr-utils.ts","posthog-people.ts","posthog-featureflags.ts","posthog-persistence.ts","extensions/sessionrecording-utils.ts","extensions/sessionrecording.ts","decide.ts","extensions/toolbar.ts","base-request-queue.ts","request-queue.ts","capture-metrics.ts","../node_modules/fflate/esm/browser.js","types.ts","compression.ts","send-request.ts","retry-queue.ts","sessionid.ts","apm.ts","extensions/sentry-integration.ts","posthog-core.ts","loader-globals.ts"],"names":["module","exports","name","version","description","repository","author","license","scripts","start","serve","build","lint","prettier","prepublishOnly","test","cypress","main","types","files","dependencies","fflate","devDependencies","eslint","given2","husky","jest","jsdom","localStorage","parcel","rollup","rrweb","sinon","testcafe","tslib","typescript","ch2","wk","c","id","msg","transfer","cb","u","URL","createObjectURL","Blob","type","w","Worker","onerror","e","error","onmessage","data","postMessage","u8","Uint8Array","u16","Uint16Array","u32","Uint32Array","fleb","fdeb","clim","freb","eb","b","i","r","j","_a","fl","revfl","_b","fd","revfd","rev","x","hMap","cd","mb","s","length","l","le","co","rvb","sv","r_1","v","m","flt","fdt","flm","flrm","fdm","fdrm","max","a","bits","d","p","o","bits16","shft","slc","n","set","subarray","inflt","dat","buf","st","sl","noBuf","noSt","cbuf","bl","nbuf","Math","final","f","pos","bt","lm","dm","lbt","dbt","tbts","t","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","mxa","sym","add","dsym","end","wbits","wbits16","hTree","push","t2","slice","sort","i0","i1","i2","maxSym","tr","mbt","ln","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","clen","cf","wfblk","out","wblk","syms","lf","df","li","bs","dlt","mlb","ddt","mdb","_c","lclt","nlc","_d","lcdt","ndc","lcfreq","nlcc","_e","lct","mlcb","flen","ll","dl","ftlen","dtlen","llm","lcts","it","clct","len","dst","deo","et","dflt","lvl","plvl","pre","post","lst","floor","opt","msk_1","prev","head","bs1_1","ceil","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","min","maxd","ml","nl","mmd","md","ti","lin","din","crct","k","crc","cr","adler","dopt","level","mem","log","mrg","wcln","fn","fnStr","td","toString","ks","indexOf","lastIndexOf","replace","split","st_1","prototype","spInd","ch","cbfs","constructor","buffer","wrkr","fns","init","td_1","bInflt","inflateSync","pbf","gu8","bDflt","deflateSync","gze","gzh","gzhl","wbytes","guze","gzs","gzl","zle","zlh","zule","zlv","size","cbify","opts","err","terminate","consume","astrm","strm","ondata","ev","astrmify","call","b2","b4","filename","mtime","Date","now","charCodeAt","flg","zs","lv","AsyncCmpStrm","Deflate","chunk","AsyncDeflate","deflate","Inflate","bts","AsyncInflate","inflate","Gzip","raw","AsyncGzip","gzip","gzipSync","Gunzip","AsyncGunzip","gunzip","gunzipSync","Zlib","AsyncZlib","zlib","zlibSync","Unzlib","AsyncUnzlib","unzlib","unzlibSync","Decompress","G","I","Z","_this_1","apply","arguments","AsyncDecompress","decompress","decompressSync","fltn","val","Array","isArray","strToU8","str","latin1","TextEncoder","encode","ar","ai","strFromU8","TextDecoder","decode","String","fromCharCode","slzh","zh","z","fnl","es","z64e","sc","su","off","wzh","cmp","ce","y","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","wzf","zip","Object","keys","tot","slft","term","tAll","cbf","oe","cdl","_loop_1","file","cbl","zipSync","unzip","_loop_2","c_1","no","infl","unzipSync","c_2"],"mappings":"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","file":"array.js","sourceRoot":"../src","sourcesContent":["// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\n\n// private property\nconst f = String.fromCharCode\nconst keyStrBase64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\nconst keyStrUriSafe = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$'\nconst baseReverseDic: Record<string, Record<string, number>> = {}\n\nfunction getBaseValue(alphabet: string, character: string) {\n    if (!baseReverseDic[alphabet]) {\n        baseReverseDic[alphabet] = {}\n        for (let i = 0; i < alphabet.length; i++) {\n            baseReverseDic[alphabet][alphabet.charAt(i)] = i\n        }\n    }\n    return baseReverseDic[alphabet][character]\n}\n\nexport const LZString = {\n    compressToBase64: function (input: null | string) {\n        if (input == null) return ''\n        const res = LZString._compress(input, 6, function (a) {\n            return keyStrBase64.charAt(a)\n        })\n        switch (\n            res.length % 4 // To produce valid Base64\n        ) {\n            default: // When could this happen ?\n            case 0:\n                return res\n            case 1:\n                return res + '==='\n            case 2:\n                return res + '=='\n            case 3:\n                return res + '='\n        }\n    },\n\n    decompressFromBase64: function (input: string | null): string | null {\n        if (input == null) return ''\n        if (input == '') return null\n        return LZString._decompress(input.length, 32, function (index) {\n            return getBaseValue(keyStrBase64, input.charAt(index))\n        })\n    },\n\n    compressToUTF16: function (input: string | null): string | null {\n        if (input == null) return ''\n        return (\n            LZString._compress(input, 15, function (a) {\n                return f(a + 32)\n            }) + ' '\n        )\n    },\n\n    decompressFromUTF16: function (compressed: string | null): string | null {\n        if (compressed == null) return ''\n        if (compressed == '') return null\n        return LZString._decompress(compressed.length, 16384, function (index) {\n            return compressed.charCodeAt(index) - 32\n        })\n    },\n\n    //compress into uint8array (UCS-2 big endian format)\n    compressToUint8Array: function (uncompressed: string | null): Uint8Array {\n        const compressed = LZString.compress(uncompressed)\n        const buf = new Uint8Array(compressed.length * 2) // 2 bytes per character\n\n        for (let i = 0, TotalLen = compressed.length; i < TotalLen; i++) {\n            const current_value = compressed.charCodeAt(i)\n            buf[i * 2] = current_value >>> 8\n            buf[i * 2 + 1] = current_value % 256\n        }\n        return buf\n    },\n\n    //decompress from uint8array (UCS-2 big endian format)\n    decompressFromUint8Array: function (compressed: Uint8Array): string | null {\n        if (compressed === null || compressed === undefined) {\n            return LZString.decompress(compressed)\n        } else {\n            const buf = new Array(compressed.length / 2) // 2 bytes per character\n            for (let i = 0, TotalLen = buf.length; i < TotalLen; i++) {\n                buf[i] = compressed[i * 2] * 256 + compressed[i * 2 + 1]\n            }\n\n            const result: string[] = []\n            buf.forEach(function (c) {\n                result.push(f(c))\n            })\n            return LZString.decompress(result.join(''))\n        }\n    },\n\n    //compress into a string that is already URI encoded\n    compressToEncodedURIComponent: function (input: string | null): string | null {\n        if (input == null) return ''\n        return LZString._compress(input, 6, function (a) {\n            return keyStrUriSafe.charAt(a)\n        })\n    },\n\n    //decompress from an output of compressToEncodedURIComponent\n    decompressFromEncodedURIComponent: function (input: string | null): string | null {\n        if (input == null) return ''\n        if (input == '') return null\n        input = input.replace(/ /g, '+')\n        return LZString._decompress(input.length, 32, function (index) {\n            return getBaseValue(keyStrUriSafe, (input as string).charAt(index))\n        })\n    },\n\n    compress: function (uncompressed: string | null): string {\n        return LZString._compress(uncompressed, 16, function (a) {\n            return f(a)\n        })\n    },\n    _compress: function (\n        uncompressed: string | null,\n        bitsPerChar: number,\n        getCharFromInt: (number: number) => string\n    ): string {\n        if (uncompressed == null) return ''\n        let i,\n            value,\n            context_c = '',\n            context_wc = '',\n            context_w = '',\n            context_enlargeIn = 2, // Compensate for the first entry which should not count\n            context_dictSize = 3,\n            context_numBits = 2,\n            context_data_val = 0,\n            context_data_position = 0,\n            ii\n        const context_dictionary: Record<string, number> = {},\n            context_dictionaryToCreate: Record<string, boolean> = {},\n            context_data = []\n\n        for (ii = 0; ii < uncompressed.length; ii += 1) {\n            context_c = uncompressed.charAt(ii)\n            if (!Object.prototype.hasOwnProperty.call(context_dictionary, context_c)) {\n                context_dictionary[context_c] = context_dictSize++\n                context_dictionaryToCreate[context_c] = true\n            }\n\n            context_wc = context_w + context_c\n            if (Object.prototype.hasOwnProperty.call(context_dictionary, context_wc)) {\n                context_w = context_wc\n            } else {\n                if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\n                    if (context_w.charCodeAt(0) < 256) {\n                        for (i = 0; i < context_numBits; i++) {\n                            context_data_val = context_data_val << 1\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                        }\n                        value = context_w.charCodeAt(0)\n                        for (i = 0; i < 8; i++) {\n                            context_data_val = (context_data_val << 1) | (value & 1)\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                            value = value >> 1\n                        }\n                    } else {\n                        value = 1\n                        for (i = 0; i < context_numBits; i++) {\n                            context_data_val = (context_data_val << 1) | value\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                            value = 0\n                        }\n                        value = context_w.charCodeAt(0)\n                        for (i = 0; i < 16; i++) {\n                            context_data_val = (context_data_val << 1) | (value & 1)\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                            value = value >> 1\n                        }\n                    }\n                    context_enlargeIn--\n                    if (context_enlargeIn == 0) {\n                        context_enlargeIn = Math.pow(2, context_numBits)\n                        context_numBits++\n                    }\n                    delete context_dictionaryToCreate[context_w]\n                } else {\n                    value = context_dictionary[context_w]\n                    for (i = 0; i < context_numBits; i++) {\n                        context_data_val = (context_data_val << 1) | (value & 1)\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = value >> 1\n                    }\n                }\n                context_enlargeIn--\n                if (context_enlargeIn == 0) {\n                    context_enlargeIn = Math.pow(2, context_numBits)\n                    context_numBits++\n                }\n                // Add wc to the dictionary.\n                context_dictionary[context_wc] = context_dictSize++\n                context_w = String(context_c)\n            }\n        }\n\n        // Output the code for w.\n        if (context_w !== '') {\n            if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\n                if (context_w.charCodeAt(0) < 256) {\n                    for (i = 0; i < context_numBits; i++) {\n                        context_data_val = context_data_val << 1\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                    }\n                    value = context_w.charCodeAt(0)\n                    for (i = 0; i < 8; i++) {\n                        context_data_val = (context_data_val << 1) | (value & 1)\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = value >> 1\n                    }\n                } else {\n                    value = 1\n                    for (i = 0; i < context_numBits; i++) {\n                        context_data_val = (context_data_val << 1) | value\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = 0\n                    }\n                    value = context_w.charCodeAt(0)\n                    for (i = 0; i < 16; i++) {\n                        context_data_val = (context_data_val << 1) | (value & 1)\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = value >> 1\n                    }\n                }\n                context_enlargeIn--\n                if (context_enlargeIn == 0) {\n                    context_enlargeIn = Math.pow(2, context_numBits)\n                    context_numBits++\n                }\n                delete context_dictionaryToCreate[context_w]\n            } else {\n                value = context_dictionary[context_w]\n                for (i = 0; i < context_numBits; i++) {\n                    context_data_val = (context_data_val << 1) | (value & 1)\n                    if (context_data_position == bitsPerChar - 1) {\n                        context_data_position = 0\n                        context_data.push(getCharFromInt(context_data_val))\n                        context_data_val = 0\n                    } else {\n                        context_data_position++\n                    }\n                    value = value >> 1\n                }\n            }\n            context_enlargeIn--\n            if (context_enlargeIn == 0) {\n                context_enlargeIn = Math.pow(2, context_numBits)\n                context_numBits++\n            }\n        }\n\n        // Mark the end of the stream\n        value = 2\n        for (i = 0; i < context_numBits; i++) {\n            context_data_val = (context_data_val << 1) | (value & 1)\n            if (context_data_position == bitsPerChar - 1) {\n                context_data_position = 0\n                context_data.push(getCharFromInt(context_data_val))\n                context_data_val = 0\n            } else {\n                context_data_position++\n            }\n            value = value >> 1\n        }\n\n        // Flush the last char\n        while (true) {\n            context_data_val = context_data_val << 1\n            if (context_data_position == bitsPerChar - 1) {\n                context_data.push(getCharFromInt(context_data_val))\n                break\n            } else context_data_position++\n        }\n        return context_data.join('')\n    },\n\n    decompress: function (compressed: string | null) {\n        if (compressed == null) return ''\n        if (compressed == '') return null\n        return LZString._decompress(compressed.length, 32768, function (index) {\n            return compressed.charCodeAt(index)\n        })\n    },\n\n    _decompress: function (length: number, resetValue: number, getNextValue: (index: number) => number) {\n        const dictionary: (string | number)[] = [],\n            result = [],\n            data = { val: getNextValue(0), position: resetValue, index: 1 }\n        let enlargeIn = 4,\n            dictSize = 4,\n            numBits = 3,\n            entry = '',\n            i: number,\n            w: string | number,\n            bits: number,\n            resb: number,\n            maxpower: number,\n            power: number,\n            c: string | number\n\n        for (i = 0; i < 3; i += 1) {\n            dictionary[i] = i\n        }\n\n        bits = 0\n        maxpower = Math.pow(2, 2)\n        power = 1\n        while (power != maxpower) {\n            resb = data.val & data.position\n            data.position >>= 1\n            if (data.position == 0) {\n                data.position = resetValue\n                data.val = getNextValue(data.index++)\n            }\n            bits |= (resb > 0 ? 1 : 0) * power\n            power <<= 1\n        }\n\n        switch (bits) {\n            case 0:\n                bits = 0\n                maxpower = Math.pow(2, 8)\n                power = 1\n                while (power != maxpower) {\n                    resb = data.val & data.position\n                    data.position >>= 1\n                    if (data.position == 0) {\n                        data.position = resetValue\n                        data.val = getNextValue(data.index++)\n                    }\n                    bits |= (resb > 0 ? 1 : 0) * power\n                    power <<= 1\n                }\n                c = f(bits)\n                break\n            case 1:\n                bits = 0\n                maxpower = Math.pow(2, 16)\n                power = 1\n                while (power != maxpower) {\n                    resb = data.val & data.position\n                    data.position >>= 1\n                    if (data.position == 0) {\n                        data.position = resetValue\n                        data.val = getNextValue(data.index++)\n                    }\n                    bits |= (resb > 0 ? 1 : 0) * power\n                    power <<= 1\n                }\n                c = f(bits)\n                break\n            case 2:\n                return ''\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        dictionary[3] = c\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        w = c\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        result.push(c)\n        while (true) {\n            if (data.index > length) {\n                return ''\n            }\n\n            bits = 0\n            maxpower = Math.pow(2, numBits)\n            power = 1\n            while (power != maxpower) {\n                resb = data.val & data.position\n                data.position >>= 1\n                if (data.position == 0) {\n                    data.position = resetValue\n                    data.val = getNextValue(data.index++)\n                }\n                bits |= (resb > 0 ? 1 : 0) * power\n                power <<= 1\n            }\n\n            switch ((c = bits)) {\n                case 0:\n                    bits = 0\n                    maxpower = Math.pow(2, 8)\n                    power = 1\n                    while (power != maxpower) {\n                        resb = data.val & data.position\n                        data.position >>= 1\n                        if (data.position == 0) {\n                            data.position = resetValue\n                            data.val = getNextValue(data.index++)\n                        }\n                        bits |= (resb > 0 ? 1 : 0) * power\n                        power <<= 1\n                    }\n\n                    dictionary[dictSize++] = f(bits)\n                    c = dictSize - 1\n                    enlargeIn--\n                    break\n                case 1:\n                    bits = 0\n                    maxpower = Math.pow(2, 16)\n                    power = 1\n                    while (power != maxpower) {\n                        resb = data.val & data.position\n                        data.position >>= 1\n                        if (data.position == 0) {\n                            data.position = resetValue\n                            data.val = getNextValue(data.index++)\n                        }\n                        bits |= (resb > 0 ? 1 : 0) * power\n                        power <<= 1\n                    }\n                    dictionary[dictSize++] = f(bits)\n                    c = dictSize - 1\n                    enlargeIn--\n                    break\n                case 2:\n                    return result.join('')\n            }\n\n            if (enlargeIn == 0) {\n                enlargeIn = Math.pow(2, numBits)\n                numBits++\n            }\n\n            if (dictionary[c]) {\n                entry = dictionary[c] as string\n            } else {\n                if (c === dictSize) {\n                    entry = w + (w as string).charAt(0)\n                } else {\n                    return null\n                }\n            }\n            result.push(entry)\n\n            // Add w+entry[0] to the dictionary.\n            dictionary[dictSize++] = w + entry.charAt(0)\n            enlargeIn--\n\n            w = entry\n\n            if (enlargeIn == 0) {\n                enlargeIn = Math.pow(2, numBits)\n                numBits++\n            }\n        }\n    },\n}\n","module.exports={name:\"posthog-js\",version:\"1.28.0\",description:\"Posthog-js allows you to automatically capture usage and send events to PostHog.\",repository:\"https://github.com/PostHog/posthog-js\",author:\"hey@posthog.com\",license:\"MIT\",scripts:{start:\"parcel watch src/loader-globals.ts --out-file dist/array.js\",serve:\"parcel serve src/loader-globals.ts --port 3001 --out-file dist/array.js\",build:\"yarn build-array && yarn build-rollup && yarn build-react\",\"build-array\":\"parcel build src/loader-globals.ts --out-file dist/array.js --public-url=/static\",\"build-rollup\":\"tsc -b && rollup -c\",\"build-react\":\"cd react; yarn; yarn build;\",lint:\"eslint ./src/**/*.{ts,js}\",prettier:\"prettier --write src/**/*\",prepublishOnly:\"yarn lint && yarn test && yarn build && yarn test-react\",test:\"jest\",\"test-react\":\"cd react; yarn test\",\"test-watch\":\"jest --watch\",cypress:\"cypress open\"},main:\"dist/module.js\",module:\"dist/es.js\",types:\"dist/module.d.ts\",files:[\"dist/*\",\"react/dist/*\"],dependencies:{\"@sentry/types\":\"^7.2.0\",fflate:\"^0.4.1\",\"rrweb-snapshot\":\"^1.1.14\"},devDependencies:{\"@babel/core\":\"7.18.9\",\"@babel/preset-env\":\"7.18.9\",\"@babel/preset-typescript\":\"^7.18.6\",\"@rollup/plugin-babel\":\"^5.3.1\",\"@rollup/plugin-json\":\"^4.1.0\",\"@rollup/plugin-node-resolve\":\"^13.3.0\",\"@rollup/plugin-typescript\":\"^8.3.3\",\"@typescript-eslint/eslint-plugin\":\"^5.30.7\",\"@typescript-eslint/parser\":\"^5.30.7\",\"babel-eslint\":\"10.1.0\",\"babel-jest\":\"^26.6.3\",cypress:\"10.3.1\",eslint:\"8.20.0\",\"eslint-config-prettier\":\"^8.5.0\",\"eslint-plugin-prettier\":\"^4.2.1\",\"eslint-plugin-react\":\"^7.30.1\",\"eslint-plugin-react-hooks\":\"^4.6.0\",\"fast-check\":\"^2.17.0\",given2:\"^2.1.7\",husky:\"^4.2.5\",jest:\"^27.5.1\",jsdom:\"16.2.2\",\"jsdom-global\":\"3.0.2\",\"lint-staged\":\"^10.2.11\",localStorage:\"1.0.4\",\"node-fetch\":\"^2.6.1\",parcel:\"1.12.3\",\"posthog-js\":\"link:.\",prettier:\"^2.7.1\",rollup:\"^2.77.0\",\"rollup-plugin-dts\":\"^4.2.2\",rrweb:\"^1.1.3\",sinon:\"9.0.2\",testcafe:\"^1.19.0\",\"testcafe-browser-provider-browserstack\":\"^1.14.0\",tslib:\"^2.4.0\",typescript:\"^4.7.4\"},\"lint-staged\":{\"*.{ts,tsx,js,json}\":\"prettier --write\",\"*.{ts,tsx}\":[\"eslint --fix\",\"tsc --noEmit --esModuleInterop --jsx react\"]}};","import { version } from '../package.json'\n\n// overriden in posthog-core,\n// e.g.     Config.DEBUG = Config.DEBUG || instance.get_config('debug')\nconst Config = {\n    DEBUG: false,\n    LIB_VERSION: version,\n}\n\nexport default Config\n","import Config from './config'\nimport { Breaker, EventHandler, Properties } from './types'\n\n/*\n * Saved references to long variable names, so that closure compiler can\n * minimize file size.\n */\n\nconst ArrayProto = Array.prototype\nconst ObjProto = Object.prototype\nconst toString = ObjProto.toString\nconst hasOwnProperty = ObjProto.hasOwnProperty\nconst win: Window & typeof globalThis = typeof window !== 'undefined' ? window : ({} as typeof window)\nconst navigator = win.navigator || { userAgent: '' }\nconst document = win.document || {}\nconst userAgent = navigator.userAgent\n\nconst nativeForEach = ArrayProto.forEach,\n    nativeIndexOf = ArrayProto.indexOf,\n    nativeIsArray = Array.isArray,\n    breaker: Breaker = {}\n\n// Console override\nconst logger = {\n    /** @type {function(...*)} */\n    log: function (...args: any[]) {\n        if (Config.DEBUG && !_isUndefined(window.console) && window.console) {\n            // Don't log PostHog debug messages in rrweb\n            const log =\n                '__rrweb_original__' in window.console.log\n                    ? (window.console.log as any)['__rrweb_original__']\n                    : window.console.log\n\n            try {\n                log.apply(window.console, args)\n            } catch (err) {\n                _eachArray(args, function (arg) {\n                    log(arg)\n                })\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    error: function (..._args: any[]) {\n        if (Config.DEBUG && !_isUndefined(window.console) && window.console) {\n            const args = ['PostHog error:', ..._args]\n            // Don't log PostHog debug messages in rrweb\n            const error =\n                '__rrweb_original__' in window.console.error\n                    ? (window.console.error as any)['__rrweb_original__']\n                    : window.console.error\n            try {\n                error.apply(window.console, args)\n            } catch (err) {\n                _eachArray(args, function (arg) {\n                    error(arg)\n                })\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    critical: function (..._args: any[]) {\n        if (!_isUndefined(window.console) && window.console) {\n            const args = ['PostHog error:', ..._args]\n            // Don't log PostHog debug messages in rrweb\n            const error =\n                '__rrweb_original__' in window.console.error\n                    ? (window.console.error as any)['__rrweb_original__']\n                    : window.console.error\n            try {\n                error.apply(window.console, args)\n            } catch (err) {\n                _eachArray(args, function (arg) {\n                    error(arg)\n                })\n            }\n        }\n    },\n}\n\n// UNDERSCORE\n// Embed part of the Underscore Library\nexport const _trim = function (str: string): string {\n    return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n}\n\nexport const _bind_instance_methods = function (obj: Record<string, any>): void {\n    for (const func in obj) {\n        if (typeof obj[func] === 'function') {\n            obj[func] = obj[func].bind(obj)\n        }\n    }\n}\n\n/**\n * @param {*=} obj\n * @param {function(...*)=} iterator\n * @param {Object=} thisArg\n */\nexport function _each(obj: any, iterator: (value: any, key: any) => void | Breaker, thisArg?: any): void {\n    if (obj === null || obj === undefined) {\n        return\n    }\n    if (nativeForEach && Array.isArray(obj) && obj.forEach === nativeForEach) {\n        obj.forEach(iterator, thisArg)\n    } else if ('length' in obj && obj.length === +obj.length) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (i in obj && iterator.call(thisArg, obj[i], i) === breaker) {\n                return\n            }\n        }\n    } else {\n        for (const key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                if (iterator.call(thisArg, obj[key], key) === breaker) {\n                    return\n                }\n            }\n        }\n    }\n}\n\nexport function _eachArray<E = any>(\n    obj: E[] | null | undefined,\n    iterator: (value: E, key: number) => void | Breaker,\n    thisArg?: any\n): void {\n    if (Array.isArray(obj)) {\n        if (nativeForEach && obj.forEach === nativeForEach) {\n            obj.forEach(iterator, thisArg)\n        } else if ('length' in obj && obj.length === +obj.length) {\n            for (let i = 0, l = obj.length; i < l; i++) {\n                if (i in obj && iterator.call(thisArg, obj[i], i) === breaker) {\n                    return\n                }\n            }\n        }\n    }\n}\n\nexport const _extend = function (obj: Record<string, any>, ...args: Record<string, any>[]): Record<string, any> {\n    _eachArray(args, function (source) {\n        for (const prop in source) {\n            if (source[prop] !== void 0) {\n                obj[prop] = source[prop]\n            }\n        }\n    })\n    return obj\n}\n\nexport const _isArray =\n    nativeIsArray ||\n    function (obj: any): obj is any[] {\n        return toString.call(obj) === '[object Array]'\n    }\n\n// from a comment on http://dbj.org/dbj/?p=286\n// fails on only one very rare and deliberate custom object:\n// let bomb = { toString : undefined, valueOf: function(o) { return \"function BOMBA!\"; }};\nexport const _isFunction = function (f: any): f is (...args: any[]) => any {\n    try {\n        return /^\\s*\\bfunction\\b/.test(f)\n    } catch (x) {\n        return false\n    }\n}\n\nexport const _include = function (\n    obj: null | string | Array<any> | Record<string, any>,\n    target: any\n): boolean | Breaker {\n    let found = false\n    if (obj === null) {\n        return found\n    }\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\n        return obj.indexOf(target) != -1\n    }\n    _each(obj, function (value) {\n        if (found || (found = value === target)) {\n            return breaker\n        }\n        return\n    })\n    return found\n}\n\nexport function _includes<T = any>(str: T[] | string, needle: T): boolean {\n    return (str as any).indexOf(needle) !== -1\n}\n\n// Underscore Addons\nexport const _isObject = function (obj: any): obj is Record<string, any> {\n    return obj === Object(obj) && !_isArray(obj)\n}\n\nexport const _isEmptyObject = function (obj: any): obj is Record<string, any> {\n    if (_isObject(obj)) {\n        for (const key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                return false\n            }\n        }\n        return true\n    }\n    return false\n}\n\nexport const _isUndefined = function (obj: any): obj is undefined {\n    return obj === void 0\n}\n\nexport const _isString = function (obj: any): obj is string {\n    return toString.call(obj) == '[object String]'\n}\n\nexport const _isDate = function (obj: any): obj is Date {\n    return toString.call(obj) == '[object Date]'\n}\n\nexport const _isNumber = function (obj: any): obj is number {\n    return toString.call(obj) == '[object Number]'\n}\n\nexport const _encodeDates = function (obj: Properties): Properties {\n    _each(obj, function (v, k) {\n        if (_isDate(v)) {\n            obj[k] = _formatDate(v)\n        } else if (_isObject(v)) {\n            obj[k] = _encodeDates(v) // recurse\n        }\n    })\n    return obj\n}\n\nexport const _timestamp = function (): number {\n    Date.now =\n        Date.now ||\n        function () {\n            return +new Date()\n        }\n    return Date.now()\n}\n\nexport const _formatDate = function (d: Date): string {\n    // YYYY-MM-DDTHH:MM:SS in UTC\n    function pad(n: number) {\n        return n < 10 ? '0' + n : n\n    }\n    return (\n        d.getUTCFullYear() +\n        '-' +\n        pad(d.getUTCMonth() + 1) +\n        '-' +\n        pad(d.getUTCDate()) +\n        'T' +\n        pad(d.getUTCHours()) +\n        ':' +\n        pad(d.getUTCMinutes()) +\n        ':' +\n        pad(d.getUTCSeconds())\n    )\n}\n\nexport const _safewrap = function <F extends (...args: any[]) => any = (...args: any[]) => any>(f: F): F {\n    return function (...args) {\n        try {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            return f.apply(this, args)\n        } catch (e) {\n            logger.critical('Implementation error. Please turn on debug and contact support@posthog.com.')\n            if (Config.DEBUG) {\n                logger.critical(e)\n            }\n        }\n    } as F\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const _safewrap_class = function (klass: Function, functions: string[]): void {\n    for (let i = 0; i < functions.length; i++) {\n        klass.prototype[functions[i]] = _safewrap(klass.prototype[functions[i]])\n    }\n}\n\nexport const _safewrap_instance_methods = function (obj: Record<string, any>): void {\n    for (const func in obj) {\n        if (typeof obj[func] === 'function') {\n            obj[func] = _safewrap(obj[func])\n        }\n    }\n}\n\nexport const _strip_empty_properties = function (p: Properties): Properties {\n    const ret: Properties = {}\n    _each(p, function (v, k) {\n        if (_isString(v) && v.length > 0) {\n            ret[k] = v\n        }\n    })\n    return ret\n}\n\nconst COPY_IN_PROGRESS_ATTRIBUTE =\n    typeof Symbol !== 'undefined' ? Symbol('__deepCircularCopyInProgress__') : '__deepCircularCopyInProgress__'\n\n/**\n * Deep copies an object.\n * It handles cycles by replacing all references to them with `undefined`\n * Also supports customizing native values\n *\n * @param value\n * @param customizer\n * @param [key] if provided this is the object key associated with the value to be copied. It allows the customizer function to have context when it runs\n * @returns {{}|undefined|*}\n */\nfunction deepCircularCopy<T extends Record<string, any> = Record<string, any>>(\n    value: T,\n    customizer?: <K extends keyof T = keyof T>(value: T[K], key?: K) => T[K],\n    key?: string\n): T | undefined {\n    if (value !== Object(value)) return customizer ? customizer(value as any, key) : value // primitive value\n\n    if (value[COPY_IN_PROGRESS_ATTRIBUTE as any]) return undefined\n    ;(value as any)[COPY_IN_PROGRESS_ATTRIBUTE] = true\n    let result: T\n\n    if (_isArray(value)) {\n        result = [] as any as T\n        _eachArray(value, (it) => {\n            result.push(deepCircularCopy(it, customizer))\n        })\n    } else {\n        result = {} as T\n        _each(value, (val, key) => {\n            if (key !== COPY_IN_PROGRESS_ATTRIBUTE) {\n                ;(result as any)[key] = deepCircularCopy(val, customizer, key)\n            }\n        })\n    }\n    delete value[COPY_IN_PROGRESS_ATTRIBUTE as any]\n    return result\n}\n\nconst LONG_STRINGS_ALLOW_LIST = ['$performance_raw']\n\nexport function _copyAndTruncateStrings<T extends Record<string, any> = Record<string, any>>(\n    object: T,\n    maxStringLength: number | null\n): T {\n    return deepCircularCopy(object, (value: any, key) => {\n        if (key && LONG_STRINGS_ALLOW_LIST.indexOf(key as string) > -1) {\n            return value\n        }\n        if (typeof value === 'string' && maxStringLength !== null) {\n            return (value as string).slice(0, maxStringLength)\n        }\n        return value\n    }) as T\n}\n\nexport function _base64Encode(data: null): null\nexport function _base64Encode(data: undefined): undefined\nexport function _base64Encode(data: string): string\nexport function _base64Encode(data: string | null | undefined): string | null | undefined {\n    const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n    let o1,\n        o2,\n        o3,\n        h1,\n        h2,\n        h3,\n        h4,\n        bits,\n        i = 0,\n        ac = 0,\n        enc = ''\n    const tmp_arr: string[] = []\n\n    if (!data) {\n        return data\n    }\n\n    data = _utf8Encode(data)\n\n    do {\n        // pack three octets into four hexets\n        o1 = data.charCodeAt(i++)\n        o2 = data.charCodeAt(i++)\n        o3 = data.charCodeAt(i++)\n\n        bits = (o1 << 16) | (o2 << 8) | o3\n\n        h1 = (bits >> 18) & 0x3f\n        h2 = (bits >> 12) & 0x3f\n        h3 = (bits >> 6) & 0x3f\n        h4 = bits & 0x3f\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4)\n    } while (i < data.length)\n\n    enc = tmp_arr.join('')\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '=='\n            break\n        case 2:\n            enc = enc.slice(0, -1) + '='\n            break\n    }\n\n    return enc\n}\n\nexport const _utf8Encode = function (string: string): string {\n    string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n')\n\n    let utftext = '',\n        start,\n        end\n    let stringl = 0,\n        n\n\n    start = end = 0\n    stringl = string.length\n\n    for (n = 0; n < stringl; n++) {\n        const c1 = string.charCodeAt(n)\n        let enc = null\n\n        if (c1 < 128) {\n            end++\n        } else if (c1 > 127 && c1 < 2048) {\n            enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128)\n        } else {\n            enc = String.fromCharCode((c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128)\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.substring(start, end)\n            }\n            utftext += enc\n            start = end = n + 1\n        }\n    }\n\n    if (end > start) {\n        utftext += string.substring(start, string.length)\n    }\n\n    return utftext\n}\n\nexport const _UUID = (function () {\n    // Time/ticks information\n    // 1*new Date() is a cross browser version of Date.now()\n    const T = function () {\n        const d = new Date().valueOf()\n        let i = 0\n\n        // this while loop figures how many browser ticks go by\n        // before 1*new Date() returns a new number, ie the amount\n        // of ticks that go by per millisecond\n        while (d == new Date().valueOf()) {\n            i++\n        }\n\n        return d.toString(16) + i.toString(16)\n    }\n\n    // Math.Random entropy\n    const R = function () {\n        return Math.random().toString(16).replace('.', '')\n    }\n\n    // User agent entropy\n    // This function takes the user agent string, and then xors\n    // together each sequence of 8 bytes.  This produces a final\n    // sequence of 8 bytes which it returns as hex.\n    const UA = function () {\n        const ua = userAgent\n        let i,\n            ch,\n            ret = 0,\n            buffer: number[] = []\n\n        function xor(result: number, byte_array: number[]) {\n            let j,\n                tmp = 0\n            for (j = 0; j < byte_array.length; j++) {\n                tmp |= buffer[j] << (j * 8)\n            }\n            return result ^ tmp\n        }\n\n        for (i = 0; i < ua.length; i++) {\n            ch = ua.charCodeAt(i)\n            buffer.unshift(ch & 0xff)\n            if (buffer.length >= 4) {\n                ret = xor(ret, buffer)\n                buffer = []\n            }\n        }\n\n        if (buffer.length > 0) {\n            ret = xor(ret, buffer)\n        }\n\n        return ret.toString(16)\n    }\n\n    return function () {\n        const se = (window.screen.height * window.screen.width).toString(16)\n        return T() + '-' + R() + '-' + UA() + '-' + se + '-' + T()\n    }\n})()\n\n// _.isBlockedUA()\n// This is to block various web spiders from executing our JS and\n// sending false capturing data\nexport const _isBlockedUA = function (ua: string): boolean {\n    if (\n        /(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp|ahrefsbot|facebookexternalhit|facebookcatalog)/i.test(\n            ua\n        )\n    ) {\n        return true\n    }\n    return false\n}\n\n/**\n * @param {Object=} formdata\n * @param {string=} arg_separator\n */\nexport const _HTTPBuildQuery = function (formdata: Record<string, any>, arg_separator = '&'): string {\n    let use_val: string\n    let use_key: string\n    const tph_arr: string[] = []\n\n    _each(formdata, function (val, key) {\n        use_val = encodeURIComponent(val.toString())\n        use_key = encodeURIComponent(key)\n        tph_arr[tph_arr.length] = use_key + '=' + use_val\n    })\n\n    return tph_arr.join(arg_separator)\n}\n\nexport const _getQueryParam = function (url: string, param: string): string {\n    // Expects a raw URL\n\n    const cleanParam = param.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]')\n    const regexS = '[\\\\?&]' + cleanParam + '=([^&#]*)'\n    const regex = new RegExp(regexS)\n    const results = regex.exec(url)\n    if (results === null || (results && typeof results[1] !== 'string' && (results[1] as any).length)) {\n        return ''\n    } else {\n        let result = results[1]\n        try {\n            result = decodeURIComponent(result)\n        } catch (err) {\n            logger.error('Skipping decoding for malformed query param: ' + result)\n        }\n        return result.replace(/\\+/g, ' ')\n    }\n}\n\nexport const _getHashParam = function (hash: string, param: string): string | null {\n    const matches = hash.match(new RegExp(param + '=([^&]*)'))\n    return matches ? matches[1] : null\n}\n\nexport const _register_event = (function () {\n    // written by Dean Edwards, 2005\n    // with input from Tino Zijdel - crisp@xs4all.nl\n    // with input from Carl Sverre - mail@carlsverre.com\n    // with input from PostHog\n    // http://dean.edwards.name/weblog/2005/10/add-event/\n    // https://gist.github.com/1930440\n\n    /**\n     * @param {Object} element\n     * @param {string} type\n     * @param {function(...*)} handler\n     * @param {boolean=} oldSchool\n     * @param {boolean=} useCapture\n     */\n    const register_event = function (\n        element: Element | Window | Document | Node,\n        type: string,\n        handler: EventHandler,\n        oldSchool?: boolean,\n        useCapture?: boolean\n    ) {\n        if (!element) {\n            logger.error('No valid element provided to register_event')\n            return\n        }\n\n        if (element.addEventListener && !oldSchool) {\n            element.addEventListener(type, handler, !!useCapture)\n        } else {\n            const ontype = 'on' + type\n            const old_handler = (element as any)[ontype] // can be undefined\n            ;(element as any)[ontype] = makeHandler(element, handler, old_handler)\n        }\n    }\n\n    function makeHandler(\n        element: Element | Window | Document | Node,\n        new_handler: EventHandler,\n        old_handlers: EventHandler\n    ) {\n        return function (event: Event): boolean | void {\n            event = event || fixEvent(window.event)\n\n            // this basically happens in firefox whenever another script\n            // overwrites the onload callback and doesn't pass the event\n            // object to previously defined callbacks.  All the browsers\n            // that don't define window.event implement addEventListener\n            // so the dom_loaded handler will still be fired as usual.\n            if (!event) {\n                return undefined\n            }\n\n            let ret = true\n            let old_result: any\n\n            if (_isFunction(old_handlers)) {\n                old_result = old_handlers(event)\n            }\n            const new_result = new_handler.call(element, event)\n\n            if (false === old_result || false === new_result) {\n                ret = false\n            }\n\n            return ret\n        }\n    }\n\n    function fixEvent(event: Event | undefined): Event | undefined {\n        if (event) {\n            event.preventDefault = fixEvent.preventDefault\n            event.stopPropagation = fixEvent.stopPropagation\n        }\n        return event\n    }\n    fixEvent.preventDefault = function () {\n        ;(this as any as Event).returnValue = false\n    }\n    fixEvent.stopPropagation = function () {\n        ;(this as any as Event).cancelBubble = true\n    }\n\n    return register_event\n})()\n\nexport const _info = {\n    campaignParams: function (): Record<string, any> {\n        const campaign_keywords = 'utm_source utm_medium utm_campaign utm_content utm_term gclid fbclid msclkid'.split(\n            ' '\n        )\n        const params: Record<string, any> = {}\n        _each(campaign_keywords, function (kwkey) {\n            const kw = _getQueryParam(document.URL, kwkey)\n            if (kw.length) {\n                params[kwkey] = kw\n            }\n        })\n\n        return params\n    },\n\n    searchEngine: function (referrer: string): string | null {\n        if (referrer.search('https?://(.*)google.([^/?]*)') === 0) {\n            return 'google'\n        } else if (referrer.search('https?://(.*)bing.com') === 0) {\n            return 'bing'\n        } else if (referrer.search('https?://(.*)yahoo.com') === 0) {\n            return 'yahoo'\n        } else if (referrer.search('https?://(.*)duckduckgo.com') === 0) {\n            return 'duckduckgo'\n        } else {\n            return null\n        }\n    },\n\n    searchInfo: function (referrer: string): Record<string, any> {\n        const search = _info.searchEngine(referrer),\n            param = search != 'yahoo' ? 'q' : 'p',\n            ret: Record<string, any> = {}\n\n        if (search !== null) {\n            ret['$search_engine'] = search\n\n            const keyword = _getQueryParam(referrer, param)\n            if (keyword.length) {\n                ret['ph_keyword'] = keyword\n            }\n        }\n\n        return ret\n    },\n\n    /**\n     * This function detects which browser is running this script.\n     * The order of the checks are important since many user agents\n     * include key words used in later checks.\n     */\n    browser: function (user_agent: string, vendor: string, opera?: any): string {\n        vendor = vendor || '' // vendor is undefined for at least IE9\n        if (opera || _includes(user_agent, ' OPR/')) {\n            if (_includes(user_agent, 'Mini')) {\n                return 'Opera Mini'\n            }\n            return 'Opera'\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry'\n        } else if (_includes(user_agent, 'IEMobile') || _includes(user_agent, 'WPDesktop')) {\n            return 'Internet Explorer Mobile'\n        } else if (_includes(user_agent, 'SamsungBrowser/')) {\n            // https://developer.samsung.com/internet/user-agent-string-format\n            return 'Samsung Internet'\n        } else if (_includes(user_agent, 'Edge') || _includes(user_agent, 'Edg/')) {\n            return 'Microsoft Edge'\n        } else if (_includes(user_agent, 'FBIOS')) {\n            return 'Facebook Mobile'\n        } else if (_includes(user_agent, 'Chrome')) {\n            return 'Chrome'\n        } else if (_includes(user_agent, 'CriOS')) {\n            return 'Chrome iOS'\n        } else if (_includes(user_agent, 'UCWEB') || _includes(user_agent, 'UCBrowser')) {\n            return 'UC Browser'\n        } else if (_includes(user_agent, 'FxiOS')) {\n            return 'Firefox iOS'\n        } else if (_includes(vendor, 'Apple')) {\n            if (_includes(user_agent, 'Mobile')) {\n                return 'Mobile Safari'\n            }\n            return 'Safari'\n        } else if (_includes(user_agent, 'Android')) {\n            return 'Android Mobile'\n        } else if (_includes(user_agent, 'Konqueror')) {\n            return 'Konqueror'\n        } else if (_includes(user_agent, 'Firefox')) {\n            return 'Firefox'\n        } else if (_includes(user_agent, 'MSIE') || _includes(user_agent, 'Trident/')) {\n            return 'Internet Explorer'\n        } else if (_includes(user_agent, 'Gecko')) {\n            return 'Mozilla'\n        } else {\n            return ''\n        }\n    },\n\n    /**\n     * This function detects which browser version is running this script,\n     * parsing major and minor version (e.g., 42.1). User agent strings from:\n     * http://www.useragentstring.com/pages/useragentstring.php\n     */\n    browserVersion: function (userAgent: string, vendor: string, opera: string): number | null {\n        const browser = _info.browser(userAgent, vendor, opera)\n        const versionRegexs = {\n            'Internet Explorer Mobile': /rv:(\\d+(\\.\\d+)?)/,\n            'Microsoft Edge': /Edge?\\/(\\d+(\\.\\d+)?)/,\n            Chrome: /Chrome\\/(\\d+(\\.\\d+)?)/,\n            'Chrome iOS': /CriOS\\/(\\d+(\\.\\d+)?)/,\n            'UC Browser': /(UCBrowser|UCWEB)\\/(\\d+(\\.\\d+)?)/,\n            Safari: /Version\\/(\\d+(\\.\\d+)?)/,\n            'Mobile Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n            Opera: /(Opera|OPR)\\/(\\d+(\\.\\d+)?)/,\n            Firefox: /Firefox\\/(\\d+(\\.\\d+)?)/,\n            'Firefox iOS': /FxiOS\\/(\\d+(\\.\\d+)?)/,\n            Konqueror: /Konqueror:(\\d+(\\.\\d+)?)/,\n            BlackBerry: /BlackBerry (\\d+(\\.\\d+)?)/,\n            'Android Mobile': /android\\s(\\d+(\\.\\d+)?)/,\n            'Samsung Internet': /SamsungBrowser\\/(\\d+(\\.\\d+)?)/,\n            'Internet Explorer': /(rv:|MSIE )(\\d+(\\.\\d+)?)/,\n            Mozilla: /rv:(\\d+(\\.\\d+)?)/,\n        }\n        const regex: RegExp | undefined = versionRegexs[browser as keyof typeof versionRegexs]\n        if (regex === undefined) {\n            return null\n        }\n        const matches = userAgent.match(regex)\n        if (!matches) {\n            return null\n        }\n        return parseFloat(matches[matches.length - 2])\n    },\n\n    os: function (): string {\n        const a = userAgent\n        if (/Windows/i.test(a)) {\n            if (/Phone/.test(a) || /WPDesktop/.test(a)) {\n                return 'Windows Phone'\n            }\n            return 'Windows'\n        } else if (/(iPhone|iPad|iPod)/.test(a)) {\n            return 'iOS'\n        } else if (/Android/.test(a)) {\n            return 'Android'\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(a)) {\n            return 'BlackBerry'\n        } else if (/Mac/i.test(a)) {\n            return 'Mac OS X'\n        } else if (/Linux/.test(a)) {\n            return 'Linux'\n        } else if (/CrOS/.test(a)) {\n            return 'Chrome OS'\n        } else {\n            return ''\n        }\n    },\n\n    device: function (user_agent: string): string {\n        if (/Windows Phone/i.test(user_agent) || /WPDesktop/.test(user_agent)) {\n            return 'Windows Phone'\n        } else if (/iPad/.test(user_agent)) {\n            return 'iPad'\n        } else if (/iPod/.test(user_agent)) {\n            return 'iPod Touch'\n        } else if (/iPhone/.test(user_agent)) {\n            return 'iPhone'\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry'\n        } else if (/Android/.test(user_agent) && !/Mobile/.test(user_agent)) {\n            return 'Android Tablet'\n        } else if (/Android/.test(user_agent)) {\n            return 'Android'\n        } else {\n            return ''\n        }\n    },\n\n    deviceType: function (user_agent: string): string {\n        const device = this.device(user_agent)\n        if (device === 'iPad' || device === 'Android Tablet') {\n            return 'Tablet'\n        } else if (device) {\n            return 'Mobile'\n        } else {\n            return 'Desktop'\n        }\n    },\n\n    referringDomain: function (referrer: string): string {\n        const split = referrer.split('/')\n        if (split.length >= 3) {\n            return split[2]\n        }\n        return ''\n    },\n\n    properties: function (): Properties {\n        return _extend(\n            _strip_empty_properties({\n                $os: _info.os(),\n                $browser: _info.browser(userAgent, navigator.vendor, (window as any).opera),\n                $device: _info.device(userAgent),\n                $device_type: _info.deviceType(userAgent),\n            }),\n            {\n                $current_url: window.location.href,\n                $host: window.location.host,\n                $pathname: window.location.pathname,\n                $browser_version: _info.browserVersion(userAgent, navigator.vendor, (window as any).opera),\n                $screen_height: window.screen.height,\n                $screen_width: window.screen.width,\n                $viewport_height: window.innerHeight,\n                $viewport_width: window.innerWidth,\n                $lib: 'web',\n                $lib_version: Config.LIB_VERSION,\n                $insert_id: Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10),\n                $time: _timestamp() / 1000, // epoch time in seconds\n            }\n        )\n    },\n\n    people_properties: function (): Properties {\n        return _extend(\n            _strip_empty_properties({\n                $os: _info.os(),\n                $browser: _info.browser(userAgent, navigator.vendor, (window as any).opera),\n            }),\n            {\n                $browser_version: _info.browserVersion(userAgent, navigator.vendor, (window as any).opera),\n            }\n        )\n    },\n}\n\nexport { win as window, userAgent, logger, document }\n\n// Exports For Test ONLY\nexport { COPY_IN_PROGRESS_ATTRIBUTE }\n","/*\n * Get the className of an element, accounting for edge cases where element.className is an object\n * @param {Element} el - element to get the className of\n * @returns {string} the element's class\n */\nimport { _each, _includes, _isUndefined, _trim } from './utils'\n\nexport function getClassName(el: Element): string {\n    switch (typeof el.className) {\n        case 'string':\n            return el.className\n        // TODO: when is this ever used?\n        case 'object': // handle cases where className might be SVGAnimatedString or some other type\n            return ('baseVal' in el.className ? (el.className as any).baseVal : null) || el.getAttribute('class') || ''\n        default:\n            // future proof\n            return ''\n    }\n}\n\n/*\n * Get the direct text content of an element, protecting against sensitive data collection.\n * Concats textContent of each of the element's text node children; this avoids potential\n * collection of sensitive data that could happen if we used element.textContent and the\n * element had sensitive child elements, since element.textContent includes child content.\n * Scrubs values that look like they could be sensitive (i.e. cc or ssn number).\n * @param {Element} el - element to get the text of\n * @returns {string} the element's direct text content\n */\nexport function getSafeText(el: Element): string {\n    let elText = ''\n\n    if (shouldCaptureElement(el) && !isSensitiveElement(el) && el.childNodes && el.childNodes.length) {\n        _each(el.childNodes, function (child) {\n            if (isTextNode(child) && child.textContent) {\n                elText += _trim(child.textContent)\n                    // scrub potentially sensitive values\n                    .split(/(\\s+)/)\n                    .filter(shouldCaptureValue)\n                    .join('')\n                    // normalize whitespace\n                    .replace(/[\\r\\n]/g, ' ')\n                    .replace(/[ ]+/g, ' ')\n                    // truncate\n                    .substring(0, 255)\n            }\n        })\n    }\n\n    return _trim(elText)\n}\n\n/*\n * Check whether an element has nodeType Node.ELEMENT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nexport function isElementNode(el: Element | undefined | null): el is HTMLElement {\n    return !!el && el.nodeType === 1 // Node.ELEMENT_NODE - use integer constant for browser portability\n}\n\n/*\n * Check whether an element is of a given tag type.\n * Due to potential reference discrepancies (such as the webcomponents.js polyfill),\n * we want to match tagNames instead of specific references because something like\n * element === document.body won't always work because element might not be a native\n * element.\n * @param {Element} el - element to check\n * @param {string} tag - tag name (e.g., \"div\")\n * @returns {boolean} whether el is of the given tag type\n */\nexport function isTag(el: Element | undefined | null, tag: string): el is HTMLElement {\n    return !!el && !!el.tagName && el.tagName.toLowerCase() === tag.toLowerCase()\n}\n\n/*\n * Check whether an element has nodeType Node.TEXT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nexport function isTextNode(el: Element | undefined | null): el is HTMLElement {\n    return !!el && el.nodeType === 3 // Node.TEXT_NODE - use integer constant for browser portability\n}\n\n/*\n * Check whether an element has nodeType Node.DOCUMENT_FRAGMENT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nexport function isDocumentFragment(el: Element | ParentNode | undefined | null): el is DocumentFragment {\n    return !!el && el.nodeType === 11 // Node.DOCUMENT_FRAGMENT_NODE - use integer constant for browser portability\n}\n\nexport const usefulElements = ['a', 'button', 'form', 'input', 'select', 'textarea', 'label']\n/*\n * Check whether a DOM event should be \"captured\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @param {Event} event - event to check\n * @returns {boolean} whether the event should be captured\n */\nexport function shouldCaptureDomEvent(el: Element, event: Event): boolean {\n    if (!el || isTag(el, 'html') || !isElementNode(el)) {\n        return false\n    }\n\n    let parentIsUsefulElement = false\n    const targetElementList: Element[] = [el] // TODO: remove this var, it's never queried\n    let parentNode: Element | boolean = true\n    let curEl: Element = el\n    while (curEl.parentNode && !isTag(curEl, 'body')) {\n        // If element is a shadow root, we skip it\n        if (isDocumentFragment(curEl.parentNode)) {\n            targetElementList.push((curEl.parentNode as any).host)\n            curEl = (curEl.parentNode as any).host\n            continue\n        }\n        parentNode = (curEl.parentNode as Element) || false\n        if (!parentNode) break\n        if (usefulElements.indexOf(parentNode.tagName.toLowerCase()) > -1) {\n            parentIsUsefulElement = true\n        } else {\n            const compStyles = window.getComputedStyle(parentNode)\n            if (compStyles && compStyles.getPropertyValue('cursor') === 'pointer') {\n                parentIsUsefulElement = true\n            }\n        }\n\n        targetElementList.push(parentNode)\n        curEl = parentNode\n    }\n\n    const compStyles = window.getComputedStyle(el)\n    if (compStyles && compStyles.getPropertyValue('cursor') === 'pointer' && event.type === 'click') {\n        return true\n    }\n\n    const tag = el.tagName.toLowerCase()\n    switch (tag) {\n        case 'html':\n            return false\n        case 'form':\n            return event.type === 'submit'\n        case 'input':\n            return event.type === 'change' || event.type === 'click'\n        case 'select':\n        case 'textarea':\n            return event.type === 'change' || event.type === 'click'\n        default:\n            if (parentIsUsefulElement) return event.type === 'click'\n            return (\n                event.type === 'click' &&\n                (usefulElements.indexOf(tag) > -1 || el.getAttribute('contenteditable') === 'true')\n            )\n    }\n}\n\n/*\n * Check whether a DOM element should be \"captured\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be captured\n */\nexport function shouldCaptureElement(el: Element): boolean {\n    for (let curEl = el; curEl.parentNode && !isTag(curEl, 'body'); curEl = curEl.parentNode as Element) {\n        const classes = getClassName(curEl).split(' ')\n        if (_includes(classes, 'ph-sensitive') || _includes(classes, 'ph-no-capture')) {\n            return false\n        }\n    }\n\n    if (_includes(getClassName(el).split(' '), 'ph-include')) {\n        return true\n    }\n\n    // don't include hidden or password fields\n    const type = (el as HTMLInputElement).type || ''\n    if (typeof type === 'string') {\n        // it's possible for el.type to be a DOM element if el is a form with a child input[name=\"type\"]\n        switch (type.toLowerCase()) {\n            case 'hidden':\n                return false\n            case 'password':\n                return false\n        }\n    }\n\n    // filter out data from fields that look like sensitive fields\n    const name = (el as HTMLInputElement).name || el.id || ''\n    // See https://github.com/posthog/posthog-js/issues/165\n    // Under specific circumstances a bug caused .replace to be called on a DOM element\n    // instead of a string, removing the element from the page. Ensure this issue is mitigated.\n    if (typeof name === 'string') {\n        // it's possible for el.name or el.id to be a DOM element if el is a form with a child input[name=\"name\"]\n        const sensitiveNameRegex =\n            /^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i\n        if (sensitiveNameRegex.test(name.replace(/[^a-zA-Z0-9]/g, ''))) {\n            return false\n        }\n    }\n\n    return true\n}\n\n/*\n * Check whether a DOM element is 'sensitive' and we should only capture limited data\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be captured\n */\nexport function isSensitiveElement(el: Element): boolean {\n    // don't send data from inputs or similar elements since there will always be\n    // a risk of clientside javascript placing sensitive data in attributes\n    const allowedInputTypes = ['button', 'checkbox', 'submit', 'reset']\n    if (\n        (isTag(el, 'input') && !allowedInputTypes.includes((el as HTMLInputElement).type)) ||\n        isTag(el, 'select') ||\n        isTag(el, 'textarea') ||\n        el.getAttribute('contenteditable') === 'true'\n    ) {\n        return true\n    }\n    return false\n}\n\n/*\n * Check whether a string value should be \"captured\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {string} value - string value to check\n * @returns {boolean} whether the element should be captured\n */\nexport function shouldCaptureValue(value: string): boolean {\n    if (value === null || _isUndefined(value)) {\n        return false\n    }\n\n    if (typeof value === 'string') {\n        value = _trim(value)\n\n        // check to see if input value looks like a credit card number\n        // see: https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9781449327453/ch04s20.html\n        const ccRegex =\n            /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/\n        if (ccRegex.test((value || '').replace(/[- ]/g, ''))) {\n            return false\n        }\n\n        // check to see if input value looks like a social security number\n        const ssnRegex = /(^\\d{3}-?\\d{2}-?\\d{4}$)/\n        if (ssnRegex.test(value)) {\n            return false\n        }\n    }\n\n    return true\n}\n\n/*\n * Check whether an attribute name is an Angular style attr (either _ngcontent or _nghost)\n * These update on each build and lead to noise in the element chain\n * More details on the attributes here: https://angular.io/guide/view-encapsulation\n * @param {string} attributeName - string value to check\n * @returns {boolean} whether the element is an angular tag\n */\nexport function isAngularStyleAttr(attributeName: string): boolean {\n    if (typeof attributeName === 'string') {\n        return attributeName.substring(0, 10) === '_ngcontent' || attributeName.substring(0, 7) === '_nghost'\n    }\n    return false\n}\n\nexport function loadScript(scriptUrlToLoad: string, callback: (event: Event) => void): void {\n    const scriptTag = document.createElement('script')\n    scriptTag.type = 'text/javascript'\n    scriptTag.src = scriptUrlToLoad\n    scriptTag.onload = callback\n\n    const scripts = document.getElementsByTagName('script')\n    if (scripts.length > 0) {\n        scripts[0].parentNode?.insertBefore(scriptTag, scripts[0])\n    } else {\n        document.body.appendChild(scriptTag)\n    }\n}\n","// Naive rage click implementation: If mouse has not moved than RAGE_CLICK_THRESHOLD_PX\n// over RAGE_CLICK_CLICK_COUNT clicks with max RAGE_CLICK_TIMEOUT_MS between clicks, it's\n// counted as a rage click\nimport { PostHog } from '../posthog-core'\n\nconst RAGE_CLICK_THRESHOLD_PX = 30\nconst RAGE_CLICK_TIMEOUT_MS = 1000\nconst RAGE_CLICK_CLICK_COUNT = 3\n\nexport default class RageClick {\n    instance: PostHog\n    clicks: { x: number; y: number; timestamp: number }[]\n    enabled: boolean\n\n    constructor(instance: PostHog, enabled = instance.get_config('rageclick')) {\n        this.clicks = []\n        this.instance = instance\n        this.enabled = enabled\n    }\n\n    click(x: number, y: number, timestamp: number) {\n        if (!this.enabled) {\n            return\n        }\n\n        const lastClick = this.clicks[this.clicks.length - 1]\n        if (\n            lastClick &&\n            Math.abs(x - lastClick.x) + Math.abs(y - lastClick.y) < RAGE_CLICK_THRESHOLD_PX &&\n            timestamp - lastClick.timestamp < RAGE_CLICK_TIMEOUT_MS\n        ) {\n            this.clicks.push({ x, y, timestamp })\n\n            if (this.clicks.length === RAGE_CLICK_CLICK_COUNT) {\n                this.instance.capture('$rageclick')\n            }\n        } else {\n            this.clicks = [{ x, y, timestamp }]\n        }\n    }\n}\n","import {\n    _bind_instance_methods,\n    _each,\n    _extend,\n    _includes,\n    _isFunction,\n    _isUndefined,\n    _register_event,\n    _safewrap_instance_methods,\n    logger,\n} from './utils'\nimport {\n    getClassName,\n    getSafeText,\n    isElementNode,\n    isSensitiveElement,\n    isTag,\n    isTextNode,\n    shouldCaptureDomEvent,\n    shouldCaptureElement,\n    shouldCaptureValue,\n    usefulElements,\n    isAngularStyleAttr,\n    isDocumentFragment,\n} from './autocapture-utils'\nimport RageClick from './extensions/rageclick'\nimport { AutoCaptureCustomProperty, DecideResponse, Properties } from './types'\nimport { PostHog } from './posthog-core'\n\nconst autocapture = {\n    _initializedTokens: [] as string[],\n\n    _previousElementSibling: function (el: Element): Element | null {\n        if (el.previousElementSibling) {\n            return el.previousElementSibling\n        } else {\n            let _el: Element | null = el\n            do {\n                _el = _el.previousSibling as Element | null // resolves to ChildNode->Node, which is Element's parent class\n            } while (_el && !isElementNode(_el))\n            return _el\n        }\n    },\n\n    _getPropertiesFromElement: function (elem: Element, maskInputs: boolean, maskText: boolean): Properties {\n        const tag_name = elem.tagName.toLowerCase()\n        const props: Properties = {\n            tag_name: tag_name,\n        }\n        if (usefulElements.indexOf(tag_name) > -1 && !maskText) {\n            props['$el_text'] = getSafeText(elem)\n        }\n\n        const classes = getClassName(elem)\n        if (classes.length > 0)\n            props['classes'] = classes.split(' ').filter(function (c) {\n                return c !== ''\n            })\n\n        _each(elem.attributes, function (attr: Attr) {\n            // Only capture attributes we know are safe\n            if (isSensitiveElement(elem) && ['name', 'id', 'class'].indexOf(attr.name) === -1) return\n\n            if (!maskInputs && shouldCaptureValue(attr.value) && !isAngularStyleAttr(attr.name)) {\n                props['attr__' + attr.name] = attr.value\n            }\n        })\n\n        let nthChild = 1\n        let nthOfType = 1\n        let currentElem: Element | null = elem\n        while ((currentElem = this._previousElementSibling(currentElem))) {\n            // eslint-disable-line no-cond-assign\n            nthChild++\n            if (currentElem.tagName === elem.tagName) {\n                nthOfType++\n            }\n        }\n        props['nth_child'] = nthChild\n        props['nth_of_type'] = nthOfType\n\n        return props\n    },\n\n    _getDefaultProperties: function (eventType: string): Properties {\n        return {\n            $event_type: eventType,\n            $ce_version: 1,\n        }\n    },\n\n    _extractCustomPropertyValue: function (customProperty: AutoCaptureCustomProperty): string {\n        const propValues: string[] = []\n        _each(document.querySelectorAll(customProperty['css_selector']), function (matchedElem) {\n            let value\n\n            if (['input', 'select'].indexOf(matchedElem.tagName.toLowerCase()) > -1) {\n                value = matchedElem['value']\n            } else if (matchedElem['textContent']) {\n                value = matchedElem['textContent']\n            }\n\n            if (shouldCaptureValue(value)) {\n                propValues.push(value)\n            }\n        })\n        return propValues.join(', ')\n    },\n\n    // TODO: delete custom_properties after changeless typescript refactor\n    _getCustomProperties: function (targetElementList: Element[]): Properties {\n        const props: Properties = {} // will be deleted\n        _each(this._customProperties, (customProperty) => {\n            _each(customProperty['event_selectors'], (eventSelector) => {\n                const eventElements = document.querySelectorAll(eventSelector)\n                _each(eventElements, (eventElement) => {\n                    if (_includes(targetElementList, eventElement) && shouldCaptureElement(eventElement)) {\n                        props[customProperty['name']] = this._extractCustomPropertyValue(customProperty)\n                    }\n                })\n            })\n        })\n        return props\n    },\n\n    _getEventTarget: function (e: Event): Element | null {\n        // https://developer.mozilla.org/en-US/docs/Web/API/Event/target#Compatibility_notes\n        if (typeof e.target === 'undefined') {\n            return (e.srcElement as Element) || null\n        } else {\n            if ((e.target as HTMLElement)?.shadowRoot) {\n                return (e.composedPath()[0] as Element) || null\n            }\n            return (e.target as Element) || null\n        }\n    },\n\n    _captureEvent: function (e: Event, instance: PostHog): boolean | void {\n        /*** Don't mess with this code without running IE8 tests on it ***/\n        let target = this._getEventTarget(e)\n        if (isTextNode(target)) {\n            // defeat Safari bug (see: http://www.quirksmode.org/js/events_properties.html)\n            target = (target.parentNode || null) as Element | null\n        }\n\n        if (e.type === 'click' && e instanceof MouseEvent) {\n            this.rageclicks?.click(e.clientX, e.clientY, new Date().getTime())\n        }\n\n        if (target && shouldCaptureDomEvent(target, e)) {\n            const targetElementList = [target]\n            let curEl = target\n            while (curEl.parentNode && !isTag(curEl, 'body')) {\n                if (isDocumentFragment(curEl.parentNode)) {\n                    targetElementList.push((curEl.parentNode as any).host)\n                    curEl = (curEl.parentNode as any).host\n                    continue\n                }\n                targetElementList.push(curEl.parentNode as Element)\n                curEl = curEl.parentNode as Element\n            }\n\n            const elementsJson: Properties[] = []\n            let href,\n                explicitNoCapture = false\n            _each(targetElementList, (el) => {\n                const shouldCaptureEl = shouldCaptureElement(el)\n\n                // if the element or a parent element is an anchor tag\n                // include the href as a property\n                if (el.tagName.toLowerCase() === 'a') {\n                    href = el.getAttribute('href')\n                    href = shouldCaptureEl && shouldCaptureValue(href) && href\n                }\n\n                // allow users to programmatically prevent capturing of elements by adding class 'ph-no-capture'\n                const classes = getClassName(el).split(' ')\n                if (_includes(classes, 'ph-no-capture')) {\n                    explicitNoCapture = true\n                }\n\n                elementsJson.push(\n                    this._getPropertiesFromElement(\n                        el,\n                        instance.get_config('mask_all_element_attributes'),\n                        instance.get_config('mask_all_text')\n                    )\n                )\n            })\n\n            if (!instance.get_config('mask_all_text')) {\n                elementsJson[0]['$el_text'] = getSafeText(target)\n            }\n\n            if (href) {\n                elementsJson[0]['attr__href'] = href\n            }\n\n            if (explicitNoCapture) {\n                return false\n            }\n\n            const props = _extend(\n                this._getDefaultProperties(e.type),\n                {\n                    $elements: elementsJson,\n                },\n                this._getCustomProperties(targetElementList)\n            )\n\n            instance.capture('$autocapture', props)\n            return true\n        }\n    },\n\n    // only reason is to stub for unit tests\n    // since you can't override window.location props\n    _navigate: function (href: string): void {\n        window.location.href = href\n    },\n\n    _addDomEventHandlers: function (instance: PostHog): void {\n        const handler = (e: Event) => {\n            e = e || window.event\n            this._captureEvent(e, instance)\n        }\n        _register_event(document, 'submit', handler, false, true)\n        _register_event(document, 'change', handler, false, true)\n        _register_event(document, 'click', handler, false, true)\n    },\n\n    _customProperties: [] as AutoCaptureCustomProperty[],\n    rageclicks: null as RageClick | null,\n\n    init: function (instance: PostHog): void {\n        this.rageclicks = new RageClick(instance)\n    },\n\n    afterDecideResponse: function (response: DecideResponse, instance: PostHog): void {\n        const token = instance.get_config('token')\n        if (this._initializedTokens.indexOf(token) > -1) {\n            logger.log('autocapture already initialized for token \"' + token + '\"')\n            return\n        }\n\n        this._initializedTokens.push(token)\n\n        if (\n            response &&\n            response['config'] &&\n            response['config']['enable_collect_everything'] &&\n            instance.get_config('autocapture')\n        ) {\n            // TODO: delete custom_properties after changeless typescript refactor\n            if (response['custom_properties']) {\n                this._customProperties = response['custom_properties']\n            }\n            this._addDomEventHandlers(instance)\n        } else {\n            instance['__autocapture_enabled'] = false\n        }\n    },\n\n    // this is a mechanism to ramp up CE with no server-side interaction.\n    // when CE is active, every page load results in a decide request. we\n    // need to gently ramp this up so we don't overload decide. this decides\n    // deterministically if CE is enabled for this project by modding the char\n    // value of the project token.\n    enabledForProject: function (\n        token: string | null | undefined,\n        numBuckets: number,\n        numEnabledBuckets: number\n    ): boolean {\n        if (!token) {\n            return true\n        }\n        numBuckets = !_isUndefined(numBuckets) ? numBuckets : 10\n        numEnabledBuckets = !_isUndefined(numEnabledBuckets) ? numEnabledBuckets : 10\n        let charCodeSum = 0\n        for (let i = 0; i < token.length; i++) {\n            charCodeSum += token.charCodeAt(i)\n        }\n        return charCodeSum % numBuckets < numEnabledBuckets\n    },\n\n    isBrowserSupported: function (): boolean {\n        return _isFunction(document.querySelectorAll)\n    },\n}\n\n_bind_instance_methods(autocapture)\n_safewrap_instance_methods(autocapture)\n\nexport { autocapture }\n","import { _extend, logger } from './utils'\nimport { PersistentStore, Properties } from './types'\nimport Config from './config'\n\nconst DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]+\\.[a-z.]{2,6}$/i\n\n// Methods partially borrowed from quirksmode.org/js/cookies.html\nexport const cookieStore: PersistentStore = {\n    is_supported: () => true,\n\n    error: function (msg) {\n        logger.error('cookieStore error: ' + msg)\n    },\n\n    get: function (name) {\n        try {\n            const nameEQ = name + '='\n            const ca = document.cookie.split(';')\n            for (let i = 0; i < ca.length; i++) {\n                let c = ca[i]\n                while (c.charAt(0) == ' ') {\n                    c = c.substring(1, c.length)\n                }\n                if (c.indexOf(nameEQ) === 0) {\n                    return decodeURIComponent(c.substring(nameEQ.length, c.length))\n                }\n            }\n        } catch (err) {}\n        return null\n    },\n\n    parse: function (name) {\n        let cookie\n        try {\n            cookie = JSON.parse(cookieStore.get(name)) || {}\n        } catch (err) {\n            // noop\n        }\n        return cookie\n    },\n\n    set: function (name, value, days, cross_subdomain, is_secure) {\n        try {\n            let cdomain = '',\n                expires = '',\n                secure = ''\n\n            if (cross_subdomain) {\n                const matches = document.location.hostname.match(DOMAIN_MATCH_REGEX),\n                    domain = matches ? matches[0] : ''\n\n                cdomain = domain ? '; domain=.' + domain : ''\n            }\n\n            if (days) {\n                const date = new Date()\n                date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000)\n                expires = '; expires=' + date.toUTCString()\n            }\n\n            if (is_secure) {\n                secure = '; secure'\n            }\n\n            const new_cookie_val =\n                name + '=' + encodeURIComponent(JSON.stringify(value)) + expires + '; path=/' + cdomain + secure\n            document.cookie = new_cookie_val\n            return new_cookie_val\n        } catch (err) {\n            return\n        }\n    },\n\n    remove: function (name, cross_subdomain) {\n        try {\n            cookieStore.set(name, '', -1, cross_subdomain)\n        } catch (err) {\n            return\n        }\n    },\n}\n\nlet _localStorage_supported: boolean | null = null\n\nexport const localStore: PersistentStore = {\n    is_supported: function () {\n        if (_localStorage_supported !== null) {\n            return _localStorage_supported\n        }\n\n        let supported = true\n        if (window) {\n            try {\n                const key = '__mplssupport__',\n                    val = 'xyz'\n                localStore.set(key, val)\n                if (localStore.get(key) !== '\"xyz\"') {\n                    supported = false\n                }\n                localStore.remove(key)\n            } catch (err) {\n                supported = false\n            }\n        } else {\n            supported = false\n        }\n        if (!supported) {\n            logger.error('localStorage unsupported; falling back to cookie store')\n        }\n\n        _localStorage_supported = supported\n        return supported\n    },\n\n    error: function (msg) {\n        logger.error('localStorage error: ' + msg)\n    },\n\n    get: function (name) {\n        try {\n            return window.localStorage.getItem(name)\n        } catch (err) {\n            localStore.error(err)\n        }\n        return null\n    },\n\n    parse: function (name) {\n        try {\n            return JSON.parse(localStore.get(name)) || {}\n        } catch (err) {\n            // noop\n        }\n        return null\n    },\n\n    set: function (name, value) {\n        try {\n            window.localStorage.setItem(name, JSON.stringify(value))\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n\n    remove: function (name) {\n        try {\n            window.localStorage.removeItem(name)\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n}\n\n// Use localstorage for most data but still use cookie for distinct_id\n// This solves issues with cookies having too much data in them causing headers too large\n// Also makes sure we don't have to send a ton of data to the server\nexport const localPlusCookieStore: PersistentStore = {\n    ...localStore,\n    parse: function (name) {\n        try {\n            let extend: Properties = {}\n            try {\n                // See if there's a cookie stored with data.\n                extend = cookieStore.parse(name) || {}\n                if (extend['distinct_id']) {\n                    cookieStore.set(name, { distinct_id: extend['distinct_id'] })\n                }\n            } catch (err) {}\n            const value = _extend(extend, JSON.parse(localStore.get(name) || '{}'))\n            localStore.set(name, value)\n            return value\n        } catch (err) {\n            // noop\n        }\n        return null\n    },\n\n    set: function (name, value, days, cross_subdomain, is_secure) {\n        try {\n            localStore.set(name, value)\n            if (value.distinct_id) {\n                cookieStore.set(name, { distinct_id: value.distinct_id }, days, cross_subdomain, is_secure)\n            }\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n\n    remove: function (name, cross_subdomain) {\n        try {\n            window.localStorage.removeItem(name)\n            cookieStore.remove(name, cross_subdomain)\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n}\n\nconst memoryStorage: Properties = {}\n\n// Storage that only lasts the length of the pageview if we don't want to use cookies\nexport const memoryStore: PersistentStore = {\n    is_supported: function () {\n        return true\n    },\n\n    error: function (msg) {\n        logger.error('memoryStorage error: ' + msg)\n    },\n\n    get: function (name) {\n        return memoryStorage[name] || null\n    },\n\n    parse: function (name) {\n        return memoryStorage[name] || null\n    },\n\n    set: function (name, value) {\n        memoryStorage[name] = value\n    },\n\n    remove: function (name) {\n        delete memoryStorage[name]\n    },\n}\n\nlet sessionStorageSupported: boolean | null = null\nexport const resetSessionStorageSupported = () => {\n    sessionStorageSupported = null\n}\n// Storage that only lasts the length of a tab/window. Survives page refreshes\nexport const sessionStore: PersistentStore = {\n    is_supported: function () {\n        if (sessionStorageSupported !== null) {\n            return sessionStorageSupported\n        }\n        sessionStorageSupported = true\n        if (window) {\n            try {\n                const key = '__support__',\n                    val = 'xyz'\n                sessionStore.set(key, val)\n                if (sessionStore.get(key) !== '\"xyz\"') {\n                    sessionStorageSupported = false\n                }\n                sessionStore.remove(key)\n            } catch (err) {\n                sessionStorageSupported = false\n            }\n        } else {\n            sessionStorageSupported = false\n        }\n        return sessionStorageSupported\n    },\n\n    error: function (msg) {\n        if (Config.DEBUG) {\n            logger.error('sessionStorage error: ', msg)\n        }\n    },\n\n    get: function (name) {\n        try {\n            return window.sessionStorage.getItem(name)\n        } catch (err) {\n            sessionStore.error(err)\n        }\n        return null\n    },\n\n    parse: function (name) {\n        try {\n            return JSON.parse(sessionStore.get(name)) || null\n        } catch (err) {\n            // noop\n        }\n        return null\n    },\n\n    set: function (name, value) {\n        try {\n            window.sessionStorage.setItem(name, JSON.stringify(value))\n        } catch (err) {\n            sessionStore.error(err)\n        }\n    },\n\n    remove: function (name) {\n        try {\n            window.sessionStorage.removeItem(name)\n        } catch (err) {\n            sessionStore.error(err)\n        }\n    },\n}\n","/**\n * GDPR utils\n *\n * The General Data Protection Regulation (GDPR) is a regulation in EU law on data protection\n * and privacy for all individuals within the European Union. It addresses the export of personal\n * data outside the EU. The GDPR aims primarily to give control back to citizens and residents\n * over their personal data and to simplify the regulatory environment for international business\n * by unifying the regulation within the EU.\n *\n * This set of utilities is intended to enable opt in/out functionality in the PostHog JS SDK.\n * These functions are used internally by the SDK and are not intended to be publicly exposed.\n */\n\nimport { _each, _includes, _isNumber, _isString, window } from './utils'\nimport { cookieStore, localStore, localPlusCookieStore } from './storage'\nimport { GDPROptions, PersistentStore } from './types'\nimport { PostHog } from './posthog-core'\n\n/**\n * A function used to capture a PostHog event (e.g. PostHogLib.capture)\n * @callback captureFunction\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Function} [callback] If provided, the callback function will be called after capturing the event.\n */\n\n/** Public **/\n\nconst GDPR_DEFAULT_PERSISTENCE_PREFIX = '__ph_opt_in_out_'\n\n/**\n * Opt the user in to data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {captureFunction} [options.capture] - function used for capturing a PostHog event to record the opt-in action\n * @param {string} [options.captureEventName] - event name to be used for capturing the opt-in action\n * @param {Object} [options.captureProperties] - set of properties to be captured along with the opt-in action\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nexport function optIn(token: string, options: GDPROptions): void {\n    _optInOut(true, token, options)\n}\n\n/**\n * Opt the user out of data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-out cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-out cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-out cookie is set as secure or not\n */\nexport function optOut(token: string, options: GDPROptions): void {\n    _optInOut(false, token, options)\n}\n\n/**\n * Check whether the user has opted in to data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} whether the user has opted in to the given opt type\n */\nexport function hasOptedIn(token: string, options: GDPROptions): boolean {\n    return _getStorageValue(token, options) === '1'\n}\n\n/**\n * Check whether the user has opted out of data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {boolean} [options.respectDnt] - flag to take browser DNT setting into account\n * @returns {boolean} whether the user has opted out of the given opt type\n */\nexport function hasOptedOut(token: string, options: Partial<GDPROptions>): boolean {\n    if (_hasDoNotTrackFlagOn(options)) {\n        return true\n    }\n    return _getStorageValue(token, options) === '0'\n}\n\n/**\n * Clear the user's opt in/out status of data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nexport function clearOptInOut(token: string, options: GDPROptions) {\n    options = options || {}\n    _getStorage(options).remove(_getStorageKey(token, options), !!options.crossSubdomainCookie)\n}\n\n/** Private **/\n\n/**\n * Get storage util\n * @param {Object} [options]\n * @param {string} [options.persistenceType]\n * @returns {object} either cookieStore or localStore\n */\nfunction _getStorage(options: GDPROptions): PersistentStore {\n    options = options || {}\n    if (options.persistenceType === 'localStorage') {\n        return localStore\n    }\n    if (options.persistenceType === 'localStorage+cookie') {\n        return localPlusCookieStore\n    }\n    return cookieStore\n}\n\n/**\n * Get the name of the cookie that is used for the given opt type (capturing, cookie, etc.)\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the name of the cookie for the given opt type\n */\nfunction _getStorageKey(token: string, options: GDPROptions) {\n    options = options || {}\n    return (options.persistencePrefix || GDPR_DEFAULT_PERSISTENCE_PREFIX) + token\n}\n\n/**\n * Get the value of the cookie that is used for the given opt type (capturing, cookie, etc.)\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the value of the cookie for the given opt type\n */\nfunction _getStorageValue(token: string, options: GDPROptions) {\n    return _getStorage(options).get(_getStorageKey(token, options))\n}\n\n/**\n * Check whether the user has set the DNT/doNotTrack setting to true in their browser\n * @param {Object} [options]\n * @param {string} [options.window] - alternate window object to check; used to force various DNT settings in browser tests\n * @param {boolean} [options.respectDnt] - flag to take browser DNT setting into account\n * @returns {boolean} whether the DNT setting is true\n */\nfunction _hasDoNotTrackFlagOn(options: GDPROptions) {\n    if (options && options.respectDnt) {\n        const win = (options && options.window) || window\n        const nav = win['navigator'] || {}\n        let hasDntOn = false\n        _each(\n            [\n                nav['doNotTrack'], // standard\n                (nav as any)['msDoNotTrack'],\n                (win as any)['doNotTrack'],\n            ],\n            function (dntValue) {\n                if (_includes([true, 1, '1', 'yes'], dntValue)) {\n                    hasDntOn = true\n                }\n            }\n        )\n        return hasDntOn\n    }\n    return false\n}\n\n/**\n * Set cookie/localstorage for the user indicating that they are opted in or out for the given opt type\n * @param {boolean} optValue - whether to opt the user in or out for the given opt type\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {captureFunction} [options.capture] - function used for capturing a PostHog event to record the opt-in action\n * @param {string} [options.captureEventName] - event name to be used for capturing the opt-in action\n * @param {Object} [options.captureProperties] - set of properties to be captured along with the opt-in action\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction _optInOut(optValue: boolean, token: string, options: GDPROptions) {\n    if (!_isString(token) || !token.length) {\n        console.error('gdpr.' + (optValue ? 'optIn' : 'optOut') + ' called with an invalid token')\n        return\n    }\n\n    options = options || {}\n\n    _getStorage(options).set(\n        _getStorageKey(token, options),\n        optValue ? 1 : 0,\n        _isNumber(options.cookieExpiration) ? options.cookieExpiration : null,\n        options.crossSubdomainCookie,\n        options.secureCookie\n    )\n\n    if (options.capture && optValue) {\n        // only capture event if opting in (optValue=true)\n        options.capture(options.captureEventName || '$opt_in', options.captureProperties || {}, {\n            send_instantly: true,\n        })\n    }\n}\n\nexport function userOptedOut(posthog: PostHog, silenceErrors: boolean | undefined) {\n    let optedOut = false\n\n    try {\n        const token = posthog.get_config('token')\n        const respectDnt = posthog.get_config('respect_dnt')\n        const persistenceType = posthog.get_config('opt_out_capturing_persistence_type')\n        const persistencePrefix = posthog.get_config('opt_out_capturing_cookie_prefix') || undefined\n        const win = posthog.get_config('window' as any) as Window | undefined // used to override window during browser tests\n\n        if (token) {\n            // if there was an issue getting the token, continue method execution as normal\n            optedOut = hasOptedOut(token, {\n                respectDnt,\n                persistenceType,\n                persistencePrefix,\n                window: win,\n            })\n        }\n    } catch (err) {\n        if (!silenceErrors) {\n            console.error('Unexpected error when checking capturing opt-out status: ' + err)\n        }\n    }\n    return optedOut\n}\n\n/**\n * Wrap a method with a check for whether the user is opted out of data capturing and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {PostHog} posthog - the posthog instance\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @param silenceErrors\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nexport function addOptOutCheck<M extends (...args: any[]) => any = (...args: any[]) => any>(\n    posthog: PostHog,\n    method: M,\n    silenceErrors?: boolean\n): M {\n    return function (...args) {\n        const optedOut = userOptedOut(posthog, silenceErrors)\n\n        if (!optedOut) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            return method.apply(this, args)\n        }\n\n        const callback = args[args.length - 1]\n        if (typeof callback === 'function') {\n            callback(0)\n        }\n\n        return\n    } as M\n}\n","/* eslint camelcase: \"off\" */\nimport { addOptOutCheck } from './gdpr-utils'\nimport { _base64Encode, _copyAndTruncateStrings, _each, _encodeDates, _extend, _info, _isObject } from './utils'\nimport { PostHogConfig, Properties, RequestCallback } from './types'\nimport { PostHog } from './posthog-core'\n\nconst SET_ACTION = '$set'\nconst SET_ONCE_ACTION = '$set_once'\n\n/**\n * PostHog People Object\n * @constructor\n */\nclass PostHogPeople {\n    _posthog: PostHog\n\n    set: (prop: string | Properties, to?: string, callback?: RequestCallback) => void\n    set_once: (prop: string | Properties, to?: string, callback?: RequestCallback) => void\n\n    constructor(posthog: PostHog) {\n        this._posthog = posthog\n\n        /*\n         * Set properties on a user record.\n         *\n         * ### Usage:\n         *\n         *     posthog.people.set('gender', 'm');\n         *\n         *     // or set multiple properties at once\n         *     posthog.people.set({\n         *         'Company': 'Acme',\n         *         'Plan': 'Premium',\n         *         'Upgrade date': new Date()\n         *     });\n         *     // properties can be strings, integers, dates, or lists\n         *\n         * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n         * @param {*} [to] A value to set on the given property name\n         * @param {Function} [callback] If provided, the callback will be called after capturing the event.\n         */\n        this.set = addOptOutCheck(posthog, (prop: string | Properties, to?: string, callback?: RequestCallback) => {\n            const data = this.set_action(prop, to)\n            if (_isObject(prop)) {\n                callback = to as any\n            }\n            // make sure that the referrer info has been updated and saved\n            if (this._get_config('save_referrer')) {\n                this._posthog.persistence.update_referrer_info(document.referrer)\n            }\n\n            // update $set object with default people properties\n            data[SET_ACTION] = _extend(\n                {},\n                _info.people_properties(),\n                this._posthog.persistence.get_referrer_info(),\n                data[SET_ACTION]\n            )\n            return this._send_request(data, callback)\n        })\n\n        /*\n         * Set properties on a user record, only if they do not yet exist.\n         * This will not overwrite previous people property values, unlike\n         * people.set().\n         *\n         * ### Usage:\n         *\n         *     posthog.people.set_once('First Login Date', new Date());\n         *\n         *     // or set multiple properties at once\n         *     posthog.people.set_once({\n         *         'First Login Date': new Date(),\n         *         'Starting Plan': 'Premium'\n         *     });\n         *\n         *     // properties can be strings, integers or dates\n         *\n         * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n         * @param {*} [to] A value to set on the given property name\n         * @param {Function} [callback] If provided, the callback will be called after capturing the event.\n         */\n        this.set_once = addOptOutCheck(\n            posthog,\n            (prop: string | Properties, to?: string, callback?: RequestCallback) => {\n                const data = this.set_once_action(prop, to)\n                if (_isObject(prop)) {\n                    callback = to as any\n                }\n                return this._send_request(data, callback)\n            }\n        )\n    }\n\n    toString(): string {\n        return this._posthog.toString() + '.people'\n    }\n\n    _send_request(data: Properties, callback?: RequestCallback): Properties {\n        data['$token'] = this._get_config('token')\n        data['$distinct_id'] = this._posthog.get_distinct_id()\n        const device_id = this._posthog.get_property('$device_id')\n        const user_id = this._posthog.get_property('$user_id')\n        const had_persisted_distinct_id = this._posthog.get_property('$had_persisted_distinct_id')\n        if (device_id) {\n            data['$device_id'] = device_id\n        }\n        if (user_id) {\n            data['$user_id'] = user_id\n        }\n        if (had_persisted_distinct_id) {\n            data['$had_persisted_distinct_id'] = had_persisted_distinct_id\n        }\n\n        const date_encoded_data = _encodeDates(data)\n        const truncated_data = _copyAndTruncateStrings(\n            date_encoded_data,\n            this._get_config('properties_string_max_length')\n        )\n        const json_data = JSON.stringify(date_encoded_data)\n        const encoded_data = _base64Encode(json_data)\n\n        this._posthog._send_request(\n            this._get_config('api_host') + '/engage/',\n            { data: encoded_data },\n            {},\n            this._posthog._prepare_callback(callback, truncated_data) as RequestCallback\n        )\n\n        return truncated_data\n    }\n\n    _get_config<K extends keyof PostHogConfig>(conf_var: K): PostHogConfig[K] {\n        return this._posthog.get_config(conf_var)\n    }\n\n    _is_reserved_property(prop: string): boolean {\n        return (\n            prop === '$distinct_id' ||\n            prop === '$token' ||\n            prop === '$device_id' ||\n            prop === '$user_id' ||\n            prop === '$had_persisted_distinct_id'\n        )\n    }\n\n    // Internal methods for posthog.people API.\n    // These methods shouldn't involve network I/O.\n    private set_action(prop: string | Properties, to?: string): Properties {\n        return this.apiActionParser(SET_ACTION, prop, to)\n    }\n\n    private set_once_action(prop: string | Properties, to?: string): Properties {\n        return this.apiActionParser(SET_ONCE_ACTION, prop, to)\n    }\n\n    private apiActionParser(actionType: '$set' | '$set_once', prop: string | Properties, to?: string): Properties {\n        const data: Properties = {}\n        const props: Properties = {}\n\n        if (_isObject(prop)) {\n            _each(prop, (v, k: string) => {\n                if (!(this as any)._is_reserved_property(k)) {\n                    props[k] = v\n                }\n            })\n        } else {\n            props[prop] = to\n        }\n\n        data[actionType] = props\n        return data\n    }\n}\n\nexport { PostHogPeople }\n","import { _base64Encode, _extend } from './utils'\nimport { PostHog } from './posthog-core'\nimport { DecideResponse, FeatureFlagsCallback, RequestCallback } from './types'\nimport { PostHogPersistence } from './posthog-persistence'\n\nexport const parseFeatureFlagDecideResponse = (response: DecideResponse, persistence: PostHogPersistence) => {\n    const flags = response['featureFlags']\n    if (flags) {\n        // using the v1 api\n        if (Array.isArray(flags)) {\n            const $enabled_feature_flags: Record<string, boolean> = {}\n            if (flags) {\n                for (let i = 0; i < flags.length; i++) {\n                    $enabled_feature_flags[flags[i]] = true\n                }\n            }\n            persistence &&\n                persistence.register({\n                    $active_feature_flags: flags,\n                    $enabled_feature_flags,\n                })\n        } else {\n            // using the v2 api\n            persistence &&\n                persistence.register({\n                    $active_feature_flags: Object.keys(flags || {}),\n                    $enabled_feature_flags: flags || {},\n                })\n        }\n    } else {\n        if (persistence) {\n            persistence.unregister('$active_feature_flags')\n            persistence.unregister('$enabled_feature_flags')\n        }\n    }\n}\n\nexport class PostHogFeatureFlags {\n    instance: PostHog\n    _override_warning: boolean\n    flagCallReported: Record<string, boolean>\n    featureFlagEventHandlers: FeatureFlagsCallback[]\n    reloadFeatureFlagsQueued: boolean\n    reloadFeatureFlagsInAction: boolean\n    $anon_distinct_id: string | undefined\n\n    constructor(instance: PostHog) {\n        this.instance = instance\n        this._override_warning = false\n        this.flagCallReported = {}\n        this.featureFlagEventHandlers = []\n\n        this.reloadFeatureFlagsQueued = false\n        this.reloadFeatureFlagsInAction = false\n    }\n\n    getFlags(): string[] {\n        return Object.keys(this.getFlagVariants())\n    }\n\n    getFlagVariants(): Record<string, string | boolean> {\n        const enabledFlags = this.instance.get_property('$enabled_feature_flags')\n        const overriddenFlags = this.instance.get_property('$override_feature_flags')\n        if (!overriddenFlags) {\n            return enabledFlags || {}\n        }\n\n        const finalFlags = _extend({}, enabledFlags)\n        const overriddenKeys = Object.keys(overriddenFlags)\n        for (let i = 0; i < overriddenKeys.length; i++) {\n            if (overriddenFlags[overriddenKeys[i]] === false) {\n                delete finalFlags[overriddenKeys[i]]\n            } else {\n                finalFlags[overriddenKeys[i]] = overriddenFlags[overriddenKeys[i]]\n            }\n        }\n        if (!this._override_warning) {\n            console.warn('[PostHog] Overriding feature flags!', {\n                enabledFlags,\n                overriddenFlags,\n                finalFlags,\n            })\n            this._override_warning = true\n        }\n        return finalFlags\n    }\n\n    /**\n     * Reloads feature flags asynchronously.\n     *\n     * Constraints:\n     *\n     * 1. Avoid parallel requests\n     * 2. Delay a few milliseconds after each reloadFeatureFlags call to batch subsequent changes together\n     * 3. Don't call this during initial load (as /decide will be called instead), see posthog-core.js\n     */\n    reloadFeatureFlags(): void {\n        if (!this.reloadFeatureFlagsQueued) {\n            this.reloadFeatureFlagsQueued = true\n            this._startReloadTimer()\n        }\n    }\n\n    setAnonymousDistinctId(anon_distinct_id: string): void {\n        this.$anon_distinct_id = anon_distinct_id\n    }\n\n    setReloadingPaused(isPaused: boolean): void {\n        this.reloadFeatureFlagsInAction = isPaused\n    }\n\n    resetRequestQueue(): void {\n        this.reloadFeatureFlagsQueued = false\n    }\n\n    _startReloadTimer(): void {\n        if (this.reloadFeatureFlagsQueued && !this.reloadFeatureFlagsInAction) {\n            setTimeout(() => {\n                if (!this.reloadFeatureFlagsInAction && this.reloadFeatureFlagsQueued) {\n                    this.reloadFeatureFlagsQueued = false\n                    this._reloadFeatureFlagsRequest()\n                }\n            }, 5)\n        }\n    }\n\n    _reloadFeatureFlagsRequest(): void {\n        this.setReloadingPaused(true)\n        const token = this.instance.get_config('token')\n        const json_data = JSON.stringify({\n            token: token,\n            distinct_id: this.instance.get_distinct_id(),\n            groups: this.instance.getGroups(),\n            $anon_distinct_id: this.$anon_distinct_id,\n        })\n\n        const encoded_data = _base64Encode(json_data)\n        this.instance._send_request(\n            this.instance.get_config('api_host') + '/decide/?v=2',\n            { data: encoded_data },\n            { method: 'POST' },\n            this.instance._prepare_callback((response) => {\n                // reset anon_distinct_id after at least a single request with it\n                // makes it through\n                this.$anon_distinct_id = undefined\n\n                this.receivedFeatureFlags(response as DecideResponse)\n\n                // :TRICKY: Reload - start another request if queued!\n                this.setReloadingPaused(false)\n                this._startReloadTimer()\n            }) as RequestCallback\n        )\n    }\n\n    /*\n     * Get feature flag's value for user.\n     *\n     * ### Usage:\n     *\n     *     if(posthog.getFeatureFlag('my-flag') === 'some-variant') { // do something }\n     *\n     * @param {Object|String} key Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    getFeatureFlag(key: string, options: { send_event?: boolean } = {}): boolean | string {\n        if (!this.getFlags()) {\n            console.warn('getFeatureFlag for key \"' + key + '\" failed. Feature flags didn\\'t load in time.')\n            return false\n        }\n        const flagValue = this.getFlagVariants()[key]\n        if ((options.send_event || !('send_event' in options)) && !this.flagCallReported[key]) {\n            this.flagCallReported[key] = true\n            this.instance.capture('$feature_flag_called', { $feature_flag: key, $feature_flag_response: flagValue })\n        }\n        return flagValue\n    }\n\n    /*\n     * See if feature flag is enabled for user.\n     *\n     * ### Usage:\n     *\n     *     if(posthog.isFeatureEnabled('beta-feature')) { // do something }\n     *\n     * @param {Object|String} key Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    isFeatureEnabled(key: string, options: { send_event?: boolean } = {}): boolean {\n        if (!this.getFlags()) {\n            console.warn('isFeatureEnabled for key \"' + key + '\" failed. Feature flags didn\\'t load in time.')\n            return false\n        }\n        return !!this.getFeatureFlag(key, options)\n    }\n\n    addFeatureFlagsHandler(handler: FeatureFlagsCallback): void {\n        this.featureFlagEventHandlers.push(handler)\n    }\n\n    receivedFeatureFlags(response: DecideResponse): void {\n        parseFeatureFlagDecideResponse(response, this.instance.persistence)\n        const flags = this.getFlags()\n        const variants = this.getFlagVariants()\n        this.featureFlagEventHandlers.forEach((handler) => handler(flags, variants))\n    }\n\n    /*\n     * Override feature flags for debugging.\n     *\n     * ### Usage:\n     *\n     *     - posthog.feature_flags.override(false)\n     *     - posthog.feature_flags.override(['beta-feature'])\n     *     - posthog.feature_flags.override({'beta-feature': 'variant', 'other-feature': True})\n     *\n     * @param {Object|Array|String} flags Flags to override with.\n     */\n    override(flags: boolean | string[] | Record<string, string | boolean>): void {\n        this._override_warning = false\n\n        if (flags === false) {\n            this.instance.persistence.unregister('$override_feature_flags')\n        } else if (Array.isArray(flags)) {\n            const flagsObj: Record<string, string | boolean> = {}\n            for (let i = 0; i < flags.length; i++) {\n                flagsObj[flags[i]] = true\n            }\n            this.instance.persistence.register({ $override_feature_flags: flagsObj })\n        } else {\n            this.instance.persistence.register({ $override_feature_flags: flags })\n        }\n    }\n    /*\n     * Register an event listener that runs when feature flags become available or when they change.\n     * If there are flags, the listener is called immediately in addition to being called on future changes.\n     *\n     * ### Usage:\n     *\n     *     posthog.onFeatureFlags(function(featureFlags) { // do something })\n     *\n     * @param {Function} [callback] The callback function will be called once the feature flags are ready or when they are updated.\n     *                              It'll return a list of feature flags enabled for the user.\n     */\n    onFeatureFlags(callback: FeatureFlagsCallback): void {\n        this.addFeatureFlagsHandler(callback)\n        if (this.instance.decideEndpointWasHit) {\n            const flags = this.getFlags()\n            const flagVariants = this.getFlagVariants()\n            callback(flags, flagVariants)\n        }\n    }\n}\n","/* eslint camelcase: \"off\" */\n\nimport { _each, _extend, _include, _info, _isObject, _isUndefined, _strip_empty_properties, logger } from './utils'\nimport { cookieStore, localStore, localPlusCookieStore, memoryStore } from './storage'\nimport { PersistentStore, PostHogConfig, Properties } from './types'\n\n/*\n * Constants\n */\nexport const SET_QUEUE_KEY = '__mps'\nexport const SET_ONCE_QUEUE_KEY = '__mpso'\nexport const UNSET_QUEUE_KEY = '__mpus'\nexport const ADD_QUEUE_KEY = '__mpa'\nexport const APPEND_QUEUE_KEY = '__mpap'\nexport const REMOVE_QUEUE_KEY = '__mpr'\nexport const UNION_QUEUE_KEY = '__mpu'\n// This key is deprecated, but we want to check for it to see whether aliasing is allowed.\nexport const PEOPLE_DISTINCT_ID_KEY = '$people_distinct_id'\nexport const ALIAS_ID_KEY = '__alias'\nexport const CAMPAIGN_IDS_KEY = '__cmpns'\nexport const EVENT_TIMERS_KEY = '__timers'\nexport const SESSION_RECORDING_ENABLED_SERVER_SIDE = '$session_recording_enabled_server_side'\nexport const SESSION_ID = '$sesid'\nexport const ENABLED_FEATURE_FLAGS = '$enabled_feature_flags'\nexport const RESERVED_PROPERTIES = [\n    SET_QUEUE_KEY,\n    SET_ONCE_QUEUE_KEY,\n    UNSET_QUEUE_KEY,\n    ADD_QUEUE_KEY,\n    APPEND_QUEUE_KEY,\n    REMOVE_QUEUE_KEY,\n    UNION_QUEUE_KEY,\n    PEOPLE_DISTINCT_ID_KEY,\n    ALIAS_ID_KEY,\n    CAMPAIGN_IDS_KEY,\n    EVENT_TIMERS_KEY,\n    SESSION_RECORDING_ENABLED_SERVER_SIDE,\n    SESSION_ID,\n    ENABLED_FEATURE_FLAGS,\n]\n\n/**\n * PostHog Persistence Object\n * @constructor\n */\nexport class PostHogPersistence {\n    props: Properties\n    storage: PersistentStore\n    campaign_params_saved: boolean\n    name: string\n    disabled: boolean | undefined\n    secure: boolean | undefined\n    expire_days: number | undefined\n    default_expiry: number | undefined\n    cross_subdomain: boolean | undefined\n\n    constructor(config: PostHogConfig) {\n        // clean chars that aren't accepted by the http spec for cookie values\n        // https://datatracker.ietf.org/doc/html/rfc2616#section-2.2\n        let token = ''\n\n        if (config['token']) {\n            token = config['token'].replace(/\\+/g, 'PL').replace(/\\//g, 'SL').replace(/=/g, 'EQ')\n        }\n\n        this.props = {}\n        this.campaign_params_saved = false\n\n        if (config['persistence_name']) {\n            this.name = 'ph_' + config['persistence_name']\n        } else {\n            this.name = 'ph_' + token + '_posthog'\n        }\n\n        let storage_type = config['persistence'].toLowerCase()\n        if (storage_type !== 'cookie' && storage_type.indexOf('localstorage') === -1 && storage_type !== 'memory') {\n            logger.critical('Unknown persistence type ' + storage_type + '; falling back to cookie')\n            storage_type = config['persistence'] = 'cookie'\n        }\n        if (storage_type === 'localstorage' && localStore.is_supported()) {\n            this.storage = localStore\n        } else if (storage_type === 'localstorage+cookie' && localPlusCookieStore.is_supported()) {\n            this.storage = localPlusCookieStore\n        } else if (storage_type === 'memory') {\n            this.storage = memoryStore\n        } else {\n            this.storage = cookieStore\n        }\n\n        this.load()\n        this.update_config(config)\n        this.save()\n    }\n\n    properties(): Properties {\n        const p: Properties = {}\n        // Filter out reserved properties\n        _each(this.props, function (v, k) {\n            if (k === ENABLED_FEATURE_FLAGS && typeof v === 'object') {\n                const keys = Object.keys(v)\n                for (let i = 0; i < keys.length; i++) {\n                    p[`$feature/${keys[i]}`] = v[keys[i]]\n                }\n            } else if (!_include(RESERVED_PROPERTIES, k)) {\n                p[k] = v\n            }\n        })\n        return p\n    }\n\n    load(): void {\n        if (this.disabled) {\n            return\n        }\n\n        const entry = this.storage.parse(this.name)\n\n        if (entry) {\n            this.props = _extend({}, entry)\n        }\n    }\n\n    save(): void {\n        if (this.disabled) {\n            return\n        }\n        this.storage.set(this.name, this.props, this.expire_days, this.cross_subdomain, this.secure)\n    }\n\n    remove(): void {\n        // remove both domain and subdomain cookies\n        this.storage.remove(this.name, false)\n        this.storage.remove(this.name, true)\n    }\n\n    // removes the storage entry and deletes all loaded data\n    // forced name for tests\n\n    clear(): void {\n        this.remove()\n        this.props = {}\n    }\n\n    /**\n     * @param {Object} props\n     * @param {*=} default_value\n     * @param {number=} days\n     */\n\n    register_once(props: Properties, default_value: any, days?: number): boolean {\n        if (_isObject(props)) {\n            if (typeof default_value === 'undefined') {\n                default_value = 'None'\n            }\n            this.expire_days = typeof days === 'undefined' ? this.default_expiry : days\n\n            _each(props, (val, prop) => {\n                if (!this.props.hasOwnProperty(prop) || this.props[prop] === default_value) {\n                    this.props[prop] = val\n                }\n            })\n\n            this.save()\n\n            return true\n        }\n        return false\n    }\n\n    /**\n     * @param {Object} props\n     * @param {number=} days\n     */\n\n    register(props: Properties, days?: number): boolean {\n        if (_isObject(props)) {\n            this.expire_days = typeof days === 'undefined' ? this.default_expiry : days\n\n            _extend(this.props, props)\n\n            this.save()\n\n            return true\n        }\n        return false\n    }\n\n    unregister(prop: string): void {\n        if (prop in this.props) {\n            delete this.props[prop]\n            this.save()\n        }\n    }\n\n    update_campaign_params(): void {\n        if (!this.campaign_params_saved) {\n            this.register(_info.campaignParams())\n            this.campaign_params_saved = true\n        }\n    }\n\n    update_search_keyword(referrer: string): void {\n        this.register(_info.searchInfo(referrer))\n    }\n\n    // EXPORTED METHOD, we test this directly.\n\n    update_referrer_info(referrer: string): void {\n        this.register({\n            $referrer: referrer || this.props['$referrer'] || '$direct',\n            $referring_domain: _info.referringDomain(referrer) || this.props['$referring_domain'] || '$direct',\n        })\n    }\n\n    get_referrer_info(): Properties {\n        return _strip_empty_properties({\n            $referrer: this['props']['$referrer'],\n            $referring_domain: this['props']['$referring_domain'],\n        })\n    }\n\n    // safely fills the passed in object with stored properties,\n    // does not override any properties defined in both\n    // returns the passed in object\n\n    safe_merge(props: Properties): Properties {\n        _each(this.props, function (val, prop) {\n            if (!(prop in props)) {\n                props[prop] = val\n            }\n        })\n\n        return props\n    }\n\n    update_config(config: PostHogConfig): void {\n        this.default_expiry = this.expire_days = config['cookie_expiration']\n        this.set_disabled(config['disable_persistence'])\n        this.set_cross_subdomain(config['cross_subdomain_cookie'])\n        this.set_secure(config['secure_cookie'])\n    }\n\n    set_disabled(disabled: boolean): void {\n        this.disabled = disabled\n        if (this.disabled) {\n            this.remove()\n        } else {\n            this.save()\n        }\n    }\n\n    set_cross_subdomain(cross_subdomain: boolean): void {\n        if (cross_subdomain !== this.cross_subdomain) {\n            this.cross_subdomain = cross_subdomain\n            this.remove()\n            this.save()\n        }\n    }\n\n    get_cross_subdomain(): boolean {\n        return !!this.cross_subdomain\n    }\n\n    set_secure(secure: boolean): void {\n        if (secure !== this.secure) {\n            this.secure = secure\n            this.remove()\n            this.save()\n        }\n    }\n\n    set_event_timer(event_name: string, timestamp: number): void {\n        const timers = this.props[EVENT_TIMERS_KEY] || {}\n        timers[event_name] = timestamp\n        this.props[EVENT_TIMERS_KEY] = timers\n        this.save()\n    }\n\n    remove_event_timer(event_name: string): number {\n        const timers = this.props[EVENT_TIMERS_KEY] || {}\n        const timestamp = timers[event_name]\n        if (!_isUndefined(timestamp)) {\n            delete this.props[EVENT_TIMERS_KEY][event_name]\n            this.save()\n        }\n        return timestamp\n    }\n}\n","import { PLUGIN_EVENT_TYPE } from './sessionrecording'\nimport { pluginEvent } from 'rrweb/typings/types'\n\nexport const replacementImageURI =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNOCAwSDE2TDAgMTZWOEw4IDBaIiBmaWxsPSIjMkQyRDJEIi8+CjxwYXRoIGQ9Ik0xNiA4VjE2SDhMMTYgOFoiIGZpbGw9IiMyRDJEMkQiLz4KPC9zdmc+Cg=='\n\n/*\n * Check whether a data payload is nearing 5mb. If it is, it checks the data for\n * data URIs (the likely culprit for large payloads). If it finds data URIs, it either replaces\n * it with a generic image (if it's an image) or removes it.\n * @data {object} the rr-web data object\n * @returns {object} the rr-web data object with data uris filtered out\n */\nexport function filterDataURLsFromLargeDataObjects(data: Record<string, any>): Record<string, any> {\n    if (data && typeof data === 'object') {\n        let stringifiedData = JSON.stringify(data)\n        // String length of 5000000 is an approximation of 5mb\n        // Note: with compression, this limit may be able to be increased\n        // but we're assuming most of the size is from a data uri which\n        // is unlikely to be compressed further\n        if (stringifiedData.length > 5000000) {\n            // Regex that matches the pattern for a dataURI with the shape 'data:{mime type};{encoding},{data}'. It:\n            // 1) Checks if the pattern starts with 'data:' (potentially, not at the start of the string)\n            // 2) Extracts the mime type of the data uri in the first group\n            // 3) Determines when the data URI ends.Depending on if it's used in the src tag or css, it can end with a ) or \"\n            const dataURIRegex = /data:([\\w\\/\\-\\.]+);(\\w+),([^)\"]*)/gim\n            const matches = stringifiedData.matchAll(dataURIRegex)\n            for (const match of matches) {\n                if (match[1].toLocaleLowerCase().slice(0, 6) === 'image/') {\n                    stringifiedData = stringifiedData.replace(match[0], replacementImageURI)\n                } else {\n                    stringifiedData = stringifiedData.replace(match[0], '')\n                }\n            }\n        }\n        return JSON.parse(stringifiedData)\n    }\n    return data\n}\n\nexport const CONSOLE_LOG_PLUGIN_NAME = 'rrweb/console@1' // The name of the rr-web plugin that emits console logs\n\n// Console logs can be really large. This function truncates large logs\n// It's a simple function that just truncates long strings.\n// TODO: Ideally this function would have better handling of objects + lists,\n// so they could still be rendered in a pretty way after truncation.\nexport function truncateLargeConsoleLogs(event: pluginEvent<{ payload: string[] }>) {\n    const MAX_STRING_SIZE = 2000 // Maximum number of characters allowed in a string\n    const MAX_STRINGS_PER_LOG = 10 // A log can consist of multiple strings (e.g. consol.log('string1', 'string2'))\n\n    if (\n        event &&\n        typeof event === 'object' &&\n        event.type === PLUGIN_EVENT_TYPE &&\n        typeof event.data === 'object' &&\n        event.data.plugin === CONSOLE_LOG_PLUGIN_NAME\n    ) {\n        // Note: event.data.payload.payload comes from rr-web, and is an array of strings\n        if (event.data.payload.payload.length > MAX_STRINGS_PER_LOG) {\n            event.data.payload.payload = event.data.payload.payload.slice(0, MAX_STRINGS_PER_LOG)\n            event.data.payload.payload.push('...[truncated]')\n        }\n        const updatedPayload = []\n        for (let i = 0; i < event.data.payload.payload.length; i++) {\n            if (\n                event.data.payload.payload[i] && // Value can be null\n                event.data.payload.payload[i].length > MAX_STRING_SIZE\n            ) {\n                updatedPayload.push(event.data.payload.payload[i].slice(0, MAX_STRING_SIZE) + '...[truncated]')\n            } else {\n                updatedPayload.push(event.data.payload.payload[i])\n            }\n        }\n        event.data.payload.payload = updatedPayload\n        return event\n    }\n    return event\n}\n","import { loadScript } from '../autocapture-utils'\nimport { SESSION_RECORDING_ENABLED_SERVER_SIDE } from '../posthog-persistence'\nimport Config from '../config'\nimport { filterDataURLsFromLargeDataObjects, truncateLargeConsoleLogs } from './sessionrecording-utils'\nimport { PostHog } from '../posthog-core'\nimport { DecideResponse, Properties } from '../types'\nimport type { record } from 'rrweb'\nimport { eventWithTime, listenerHandler, pluginEvent, recordOptions } from 'rrweb/typings/types'\n\nconst BASE_ENDPOINT = '/e/'\n\nexport const FULL_SNAPSHOT_EVENT_TYPE = 2\nexport const META_EVENT_TYPE = 4\nexport const INCREMENTAL_SNAPSHOT_EVENT_TYPE = 3\nexport const PLUGIN_EVENT_TYPE = 6\nexport const MUTATION_SOURCE_TYPE = 0\n\nexport class SessionRecording {\n    instance: PostHog\n    captureStarted: boolean\n    snapshots: any[]\n    emit: boolean\n    endpoint: string\n    stopRrweb: listenerHandler | undefined\n    windowId: string | null\n    sessionId: string | null\n    receivedDecide: boolean\n    rrwebRecord: typeof record | undefined\n\n    constructor(instance: PostHog) {\n        this.instance = instance\n        this.captureStarted = false\n        this.snapshots = []\n        this.emit = false // Controls whether data is sent to the server or not\n        this.endpoint = BASE_ENDPOINT\n        this.stopRrweb = undefined\n        this.windowId = null\n        this.sessionId = null\n        this.receivedDecide = false\n    }\n\n    startRecordingIfEnabled() {\n        if (this.isRecordingEnabled()) {\n            this.startCaptureAndTrySendingQueuedSnapshots()\n        } else {\n            this.stopRecording()\n        }\n    }\n\n    started() {\n        return this.captureStarted\n    }\n\n    stopRecording() {\n        if (this.captureStarted && this.stopRrweb) {\n            this.stopRrweb()\n            this.stopRrweb = undefined\n            this.captureStarted = false\n        }\n    }\n\n    isRecordingEnabled() {\n        const enabled_server_side = !!this.instance.get_property(SESSION_RECORDING_ENABLED_SERVER_SIDE)\n        const enabled_client_side = !this.instance.get_config('disable_session_recording')\n        return enabled_server_side && enabled_client_side\n    }\n\n    afterDecideResponse(response: DecideResponse) {\n        this.receivedDecide = true\n        if (this.instance.persistence) {\n            this.instance.persistence.register({\n                [SESSION_RECORDING_ENABLED_SERVER_SIDE]: !!response['sessionRecording'],\n            })\n        }\n        if (response.sessionRecording?.endpoint) {\n            this.endpoint = response.sessionRecording?.endpoint\n        }\n        this.startRecordingIfEnabled()\n    }\n\n    startCaptureAndTrySendingQueuedSnapshots() {\n        // Only submit data after we've received a decide response to account for\n        // changing endpoints and the feature being disabled on the server side.\n        if (this.receivedDecide) {\n            this.emit = true\n            this.snapshots.forEach((properties) => this._captureSnapshot(properties))\n        }\n        this._startCapture()\n    }\n\n    _startCapture() {\n        // According to the rrweb docs, rrweb is not supported on IE11 and below:\n        // \"rrweb does not support IE11 and below because it uses the MutationObserver API which was supported by these browsers.\"\n        // https://github.com/rrweb-io/rrweb/blob/master/guide.md#compatibility-note\n        //\n        // However, MutationObserver does exist on IE11, it just doesn't work well and does not detect all changes.\n        // Instead, when we load \"recorder.js\", the first JS error is about \"Object.assign\" being undefined.\n        // Thus instead of MutationObserver, we look for this function and block recording if it's undefined.\n        if (typeof Object.assign === 'undefined') {\n            return\n        }\n        if (!this.captureStarted && !this.instance.get_config('disable_session_recording')) {\n            this.captureStarted = true\n            loadScript(\n                this.instance.get_config('api_host') + '/static/recorder.js?v=' + Config.LIB_VERSION,\n                this._onScriptLoaded.bind(this)\n            )\n        }\n    }\n\n    _updateWindowAndSessionIds(event: eventWithTime) {\n        // Some recording events are triggered by non-user events (e.g. \"X minutes ago\" text updating on the screen).\n        // We don't want to extend the session or trigger a new session in these cases. These events are designated by event\n        // type -> incremental update, and source -> mutation.\n        const isNotUserInteraction =\n            event.type === INCREMENTAL_SNAPSHOT_EVENT_TYPE && event.data?.source === MUTATION_SOURCE_TYPE\n\n        const { windowId, sessionId } = this.instance.sessionManager.checkAndGetSessionAndWindowId(\n            isNotUserInteraction,\n            event.timestamp\n        )\n\n        // Event types FullSnapshot and Meta mean we're already in the process of sending a full snapshot\n        if (\n            (this.windowId !== windowId || this.sessionId !== sessionId) &&\n            [FULL_SNAPSHOT_EVENT_TYPE, META_EVENT_TYPE].indexOf(event.type) === -1\n        ) {\n            this.rrwebRecord?.takeFullSnapshot()\n        }\n        this.windowId = windowId\n        this.sessionId = sessionId\n    }\n\n    _onScriptLoaded() {\n        // rrweb config info: https://github.com/rrweb-io/rrweb/blob/7d5d0033258d6c29599fb08412202d9a2c7b9413/src/record/index.ts#L28\n        const sessionRecordingOptions: recordOptions<eventWithTime> = {\n            // select set of rrweb config options we expose to our users\n            // see https://github.com/rrweb-io/rrweb/blob/master/guide.md\n            blockClass: 'ph-no-capture',\n            blockSelector: undefined,\n            ignoreClass: 'ph-ignore-input',\n            maskAllInputs: true,\n            maskInputOptions: {},\n            maskInputFn: undefined,\n            slimDOMOptions: {},\n            collectFonts: false,\n            inlineStylesheet: true,\n        }\n        // We switched from loading all of rrweb to just the record part, but\n        // keep backwards compatibility if someone hasn't upgraded PostHog\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        this.rrwebRecord = window.rrweb ? window.rrweb.record : window.rrwebRecord\n\n        // only allows user to set our 'whitelisted' options\n        const userSessionRecordingOptions = this.instance.get_config('session_recording')\n        for (const [key, value] of Object.entries(userSessionRecordingOptions || {})) {\n            if (key in sessionRecordingOptions) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                sessionRecordingOptions[key] = value\n            }\n        }\n\n        this.stopRrweb = this.rrwebRecord?.({\n            emit: (event) => {\n                event = truncateLargeConsoleLogs(\n                    filterDataURLsFromLargeDataObjects(event) as pluginEvent<{ payload: string[] }>\n                ) as eventWithTime\n\n                this._updateWindowAndSessionIds(event)\n\n                const properties = {\n                    $snapshot_data: event,\n                    $session_id: this.sessionId,\n                    $window_id: this.windowId,\n                }\n\n                this.instance._captureMetrics.incr('rrweb-record')\n                this.instance._captureMetrics.incr(`rrweb-record-${event.type}`)\n\n                if (this.emit) {\n                    this._captureSnapshot(properties)\n                } else {\n                    this.snapshots.push(properties)\n                }\n            },\n            plugins:\n                (window as any).rrwebConsoleRecord && this.instance.get_config('enable_recording_console_log')\n                    ? [(window as any).rrwebConsoleRecord.getRecordConsolePlugin()]\n                    : [],\n            ...sessionRecordingOptions,\n        })\n\n        // :TRICKY: rrweb does not capture navigation within SPA-s, so hook into our $pageview events to get access to all events.\n        //   Dropping the initial event is fine (it's always captured by rrweb).\n        this.instance._addCaptureHook((eventName) => {\n            if (eventName === '$pageview') {\n                this.rrwebRecord?.addCustomEvent('$pageview', { href: window.location.href })\n            }\n        })\n    }\n\n    _captureSnapshot(properties: Properties) {\n        // :TRICKY: Make sure we batch these requests, use a custom endpoint and don't truncate the strings.\n        this.instance.capture('$snapshot', properties, {\n            transport: 'XHR',\n            method: 'POST',\n            endpoint: this.endpoint,\n            _noTruncate: true,\n            _batchKey: 'sessionRecording',\n            _metrics: {\n                rrweb_full_snapshot: properties.$snapshot_data.type === FULL_SNAPSHOT_EVENT_TYPE,\n            },\n        })\n    }\n}\n","import { autocapture } from './autocapture'\nimport { _base64Encode } from './utils'\nimport { PostHog } from './posthog-core'\nimport { Compression, DecideResponse } from './types'\n\nexport class Decide {\n    instance: PostHog\n\n    constructor(instance: PostHog) {\n        this.instance = instance\n        this.instance.decideEndpointWasHit = false\n    }\n\n    call(): void {\n        /*\n        Calls /decide endpoint to fetch options for autocapture, session recording, feature flags & compression.\n        */\n        const json_data = JSON.stringify({\n            token: this.instance.get_config('token'),\n            distinct_id: this.instance.get_distinct_id(),\n            groups: this.instance.getGroups(),\n        })\n\n        const encoded_data = _base64Encode(json_data)\n        this.instance._send_request(\n            `${this.instance.get_config('api_host')}/decide/?v=2`,\n            { data: encoded_data, verbose: true },\n            { method: 'POST' },\n            (response) => this.parseDecideResponse(response as DecideResponse)\n        )\n    }\n\n    parseDecideResponse(response: DecideResponse): void {\n        if (response?.status === 0) {\n            console.error('Failed to fetch feature flags from PostHog.')\n            return\n        }\n        this.instance.decideEndpointWasHit = true\n        if (!(document && document.body)) {\n            console.log('document not ready yet, trying again in 500 milliseconds...')\n            setTimeout(() => {\n                this.parseDecideResponse(response)\n            }, 500)\n            return\n        }\n\n        this.instance.toolbar.afterDecideResponse(response)\n        this.instance.sessionRecording?.afterDecideResponse(response)\n        autocapture.afterDecideResponse(response, this.instance)\n\n        this.instance.featureFlags.receivedFeatureFlags(response)\n\n        if (response['supportedCompression']) {\n            const compression: Partial<Record<Compression, boolean>> = {}\n            for (const method of response['supportedCompression']) {\n                compression[method] = true\n            }\n            this.instance['compression'] = compression\n        } else {\n            this.instance['compression'] = {}\n        }\n    }\n}\n","import { loadScript } from '../autocapture-utils'\nimport { _getHashParam, _register_event } from '../utils'\nimport { PostHog } from '../posthog-core'\nimport { DecideResponse, EditorParams } from '../types'\n\nexport class Toolbar {\n    instance: PostHog\n    constructor(instance: PostHog) {\n        this.instance = instance\n    }\n\n    afterDecideResponse(response: DecideResponse) {\n        const editorParams =\n            response['editorParams'] ||\n            (response['toolbarVersion'] ? { toolbarVersion: response['toolbarVersion'] } : {})\n        if (\n            response['isAuthenticated'] &&\n            editorParams['toolbarVersion'] &&\n            editorParams['toolbarVersion'].indexOf('toolbar') === 0\n        ) {\n            this._loadEditor({\n                ...editorParams,\n                apiURL: this.instance.get_config('api_host'),\n            })\n        }\n    }\n\n    /**\n     * To load the visual editor, we need an access token and other state. That state comes from one of three places:\n     * 1. In the URL hash params if the customer is using an old snippet\n     * 2. From session storage under the key `editorParams` if the editor was initialized on a previous page\n     */\n    maybeLoadEditor(\n        location = window.location,\n        localStorage: Storage | undefined = undefined,\n        history = window.history\n    ) {\n        try {\n            // Before running the code we check if we can access localStorage, if not we opt-out\n            if (!localStorage) {\n                try {\n                    window.localStorage.setItem('test', 'test')\n                    window.localStorage.removeItem('test')\n                } catch (error) {\n                    return false\n                }\n\n                // If localStorage was undefined, and localStorage is supported we set the default value\n                localStorage = window.localStorage\n            }\n\n            const stateHash = _getHashParam(location.hash, '__posthog') || _getHashParam(location.hash, 'state')\n            const state = stateHash ? JSON.parse(decodeURIComponent(stateHash)) : null\n            const parseFromUrl = state && (state['action'] === 'mpeditor' || state['action'] === 'ph_authorize')\n            let editorParams\n\n            if (parseFromUrl) {\n                // happens if they are initializing the editor using an old snippet\n                editorParams = state\n\n                if (editorParams && Object.keys(editorParams).length > 0) {\n                    localStorage.setItem('_postHogEditorParams', JSON.stringify(editorParams))\n\n                    if (state['desiredHash']) {\n                        // hash that was in the url before the redirect\n                        location.hash = state['desiredHash']\n                    } else if (history) {\n                        history.replaceState('', document.title, location.pathname + location.search) // completely remove hash\n                    } else {\n                        location.hash = '' // clear hash (but leaves # unfortunately)\n                    }\n                }\n            } else {\n                // get credentials from localStorage from a previous initialzation\n                editorParams = JSON.parse(localStorage.getItem('_postHogEditorParams') || '{}')\n\n                // delete \"add-action\" or other intent from editorParams, otherwise we'll have the same intent\n                // every time we open the page (e.g. you just visiting your own site an hour later)\n                delete editorParams.userIntent\n            }\n\n            editorParams['apiURL'] = this.instance.get_config('api_host')\n\n            if (editorParams['token'] && this.instance.get_config('token') === editorParams['token']) {\n                this._loadEditor(editorParams)\n                return true\n            } else {\n                return false\n            }\n        } catch (e) {\n            return false\n        }\n    }\n\n    _loadEditor(editorParams: EditorParams) {\n        if (!(window as any)['_postHogToolbarLoaded']) {\n            // only load the codeless event editor once, even if there are multiple instances of PostHogLib\n            ;(window as any)['_postHogToolbarLoaded'] = true\n            const host = editorParams['jsURL'] || editorParams['apiURL'] || this.instance.get_config('api_host')\n            const toolbarScript = 'toolbar.js'\n            const editorUrl =\n                host + (host.endsWith('/') ? '' : '/') + 'static/' + toolbarScript + '?_ts=' + new Date().getTime()\n            const disableToolbarMetrics =\n                this.instance.get_config('api_host') !== 'https://app.posthog.com' &&\n                this.instance.get_config('advanced_disable_toolbar_metrics')\n            editorParams = { ...editorParams, ...(disableToolbarMetrics ? { instrument: false } : {}) }\n            loadScript(editorUrl, () => {\n                ;(window as any)['ph_load_editor'](editorParams, this.instance)\n            })\n            // Turbolinks doesn't fire an onload event but does replace the entire page, including the toolbar\n            _register_event(window, 'turbolinks:load', () => {\n                ;(window as any)['_postHogToolbarLoaded'] = false\n                this._loadEditor(editorParams)\n            })\n            return true\n        }\n        return false\n    }\n}\n","export class RequestQueueScaffold {\n    isPolling: boolean // flag to continue to recursively poll or not\n    _event_queue: any[]\n    _empty_queue_count: number // to track empty polls\n    _poller: number | undefined // to become interval for reference to clear later\n    _pollInterval: number\n\n    constructor(pollInterval = 3000) {\n        this.isPolling = true // flag to continue to recursively poll or not\n        this._event_queue = []\n        this._empty_queue_count = 0 // to track empty polls\n        this._poller = undefined // to become interval for reference to clear later\n        this._pollInterval = pollInterval\n    }\n\n    setPollInterval(interval: number): void {\n        this._pollInterval = interval\n        // Reset interval if running already\n        if (this.isPolling) {\n            this.poll()\n        }\n    }\n\n    // // eslint-disable-next-line no-unused-vars\n    // enqueue(_requestData: Record<string, any>): void {\n    //     return\n    // }\n\n    poll(): void {\n        return\n    }\n\n    unload(): void {\n        return\n    }\n\n    getTime(): number {\n        return new Date().getTime()\n    }\n}\n","import { RequestQueueScaffold } from './base-request-queue'\nimport { _each } from './utils'\nimport { CaptureMetrics } from './capture-metrics'\nimport { Properties, QueuedRequestData, XHROptions } from './types'\n\nexport class RequestQueue extends RequestQueueScaffold {\n    captureMetrics: CaptureMetrics\n    handlePollRequest: (url: string, data: Properties, options?: XHROptions) => void\n\n    constructor(\n        captureMetrics: CaptureMetrics,\n        handlePollRequest: (url: string, data: Properties, options?: XHROptions) => void,\n        pollInterval = 3000\n    ) {\n        super(pollInterval)\n        this.handlePollRequest = handlePollRequest\n        this.captureMetrics = captureMetrics\n    }\n\n    enqueue(url: string, data: Properties, options: XHROptions): void {\n        this.captureMetrics.incr('batch-enqueue')\n\n        this._event_queue.push({ url, data, options })\n\n        if (!this.isPolling) {\n            this.isPolling = true\n            this.poll()\n        }\n    }\n\n    poll(): void {\n        clearTimeout(this._poller)\n        this._poller = setTimeout(() => {\n            if (this._event_queue.length > 0) {\n                const requests = this.formatQueue()\n                for (const key in requests) {\n                    const { url, data, options } = requests[key]\n                    _each(data, (_, dataKey) => {\n                        data[dataKey]['offset'] = Math.abs(data[dataKey]['timestamp'] - this.getTime())\n                        delete data[dataKey]['timestamp']\n                    })\n                    this.handlePollRequest(url, data, options)\n\n                    this.captureMetrics.incr('batch-requests')\n                    this.captureMetrics.incr(`batch-requests-${url.slice(url.length - 2)}`)\n                    this.captureMetrics.incr('batch-handle', data.length)\n                    this.captureMetrics.incr(`batch-handle-${url.slice(url.length - 2)}`, data.length)\n                }\n                this._event_queue.length = 0 // flush the _event_queue\n                this._empty_queue_count = 0\n            } else {\n                this._empty_queue_count++\n            }\n\n            /**\n             * _empty_queue_count will increment each time the queue is polled\n             *  and it is empty. To avoid empty polling (user went idle, stepped away from comp)\n             *  we can turn it off with the isPolling flag.\n             *\n             * Polling will be re enabled when the next time PostHogLib.capture is called with\n             *  an event that should be added to the event queue.\n             */\n            if (this._empty_queue_count > 4) {\n                this.isPolling = false\n                this._empty_queue_count = 0\n            }\n            if (this.isPolling) {\n                this.poll()\n            }\n        }, this._pollInterval) as any as number\n    }\n\n    updateUnloadMetrics(): void {\n        const requests = this.formatQueue()\n        for (const key in requests) {\n            const { url, data } = requests[key]\n\n            this.captureMetrics.incr('batch-unload-requests')\n            this.captureMetrics.incr(`batch-unload-requests-${url.slice(url.length - 2)}`)\n            this.captureMetrics.incr('batch-unload', data.length)\n            this.captureMetrics.incr(`batch-unload-${url.slice(url.length - 2)}`, data.length)\n        }\n    }\n\n    unload(): void {\n        clearTimeout(this._poller)\n        const requests = this._event_queue.length > 0 ? this.formatQueue() : {}\n        this._event_queue.length = 0\n        for (const key in requests) {\n            const { url, data, options } = requests[key]\n            this.handlePollRequest(url, data, { ...options, transport: 'sendBeacon' })\n        }\n    }\n\n    formatQueue(): Record<string, QueuedRequestData> {\n        const requests: Record<string, QueuedRequestData> = {}\n        _each(this._event_queue, (request) => {\n            const { url, data, options } = request\n            const key = (options ? options._batchKey : null) || url\n            if (requests[key] === undefined) {\n                requests[key] = { data: [], url, options }\n            }\n\n            // :TRICKY: Metrics-only code\n            if (\n                options &&\n                requests[key].options &&\n                requests[key].options._metrics &&\n                !(requests[key].options._metrics as any)['rrweb_full_snapshot']\n            ) {\n                ;(requests[key].options._metrics as any)['rrweb_full_snapshot'] =\n                    options._metrics['rrweb_full_snapshot']\n            }\n            requests[key].data.push(data)\n        })\n        return requests\n    }\n}\n","export class CaptureMetrics {\n    enabled: boolean\n    metrics: Record<string, number>\n\n    constructor(enabled: boolean) {\n        this.enabled = enabled\n        this.metrics = {}\n    }\n\n    incr(key: string, by = 1): void {\n        if (this.enabled) {\n            key = `phjs-${key}`\n            this.metrics[key] = (this.metrics[key] || 0) + by\n        }\n    }\n\n    decr(key: string): void {\n        if (this.enabled) {\n            key = `phjs-${key}`\n            this.metrics[key] = (this.metrics[key] || 0) - 1\n        }\n    }\n}\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Much of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// Many optimizations have been made, so the bundle size is ultimately smaller but performance is similar.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var u = ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([c], { type: 'text/javascript' })));\n    var w = new Worker(u);\n    w.onerror = function (e) { return cb(e.error, null); };\n    w.onmessage = function (e) { return cb(null, e.data); };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst)\n            pos = wfblk(w, pos, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new u32(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && 0xEDB88320) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = 0xFFFFFFFF;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return c ^ 0xFFFFFFFF; }\n    };\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32)\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    var _a;\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n        ch[id] = wcln(fns[m], fnStr, td_1);\n    }\n    var td = mrg({}, ch[id][1]);\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8]; };\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zlv]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get u8\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    if (!opts.consume)\n        dat = new u8(dat);\n    w.postMessage([dat, opts], [dat.buffer]);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (t)\n            throw 'stream finished';\n        if (!strm.ondata)\n            throw 'no stream handler';\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16)) + (d[b + 3] << 23) * 2; };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        throw 'invalid gzip data';\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += d[10] | (d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) + (2 * (d[l - 1] << 23));\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\nfunction AsyncCmpStrm(opts, cb) {\n    if (!cb && typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (!cb && typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        this.d = final;\n        this.p(chunk, final || false);\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    return dopt(data, opts, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an inflation stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Inflate(cb) {\n        this.s = {};\n        this.p = new u8(0);\n        this.ondata = cb;\n    }\n    Inflate.prototype.e = function (c) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        var l = this.p.length;\n        var n = new u8(l + c.length);\n        n.set(this.p), n.set(c, l), this.p = n;\n    };\n    Inflate.prototype.c = function (final) {\n        this.d = this.s.i = final || false;\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.o, this.s);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) >> 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous inflation stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncInflate(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, 0, function () {\n            var strm = new Inflate();\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, out) {\n    return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        this.c.p(c);\n        this.l += c.length;\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a GUNZIP stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Gunzip(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            var s = gzs(this.p);\n            if (s >= this.p.length && !final)\n                return;\n            this.p = this.p.subarray(s), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 8)\n                throw 'invalid gzip stream';\n            this.p = this.p.subarray(0, -8);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous GUNZIP stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncGunzip(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, 0, function () {\n            var strm = new Gunzip();\n            onmessage = astrm(strm);\n        }, 9);\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, out) {\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        this.c.p(c);\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates a Zlib decompression stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Unzlib(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 2 && !final)\n                return;\n            this.p = this.p.subarray(2), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                throw 'invalid zlib stream';\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous Zlib decompression stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncUnzlib(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, 0, function () {\n            var strm = new Unzlib();\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    /**\n     * Creates a decompression stream\n     * @param cb The callback to call whenever data is decompressed\n     */\n    function Decompress(cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no stream handler';\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_1 = this;\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(cb)\n                        : new this.Z(cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    /**\n   * Creates an asynchronous decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n    function AsyncDecompress(cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, out) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, out)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, out)\n            : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k;\n        if (val instanceof u8)\n            t[n] = [val, o];\n        else if (Array.isArray(val))\n            t[n] = [val[0], mrg(o, val[1])];\n        else\n            fltn(val, n + '/', t, o);\n    }\n};\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    var l = str.length;\n    if (!latin1 && typeof TextEncoder != 'undefined')\n        return new TextEncoder().encode(str);\n    var ar = new u8(str.length + (str.length >>> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    var r = '';\n    if (!latin1 && typeof TextDecoder != 'undefined')\n        return new TextDecoder().decode(dat);\n    for (var i = 0; i < dat.length;) {\n        var c = dat[i++];\n        if (c < 128 || latin1)\n            r += String.fromCharCode(c);\n        else if (c < 224)\n            r += String.fromCharCode((c & 31) << 6 | (dat[i++] & 63));\n        else if (c < 240)\n            r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63));\n        else\n            c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n    }\n    return r;\n}\n;\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl;\n    var _a = z ? z64e(d, es) : [b4(d, b + 20), b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b4(d, b + 12), b4(d, b + 4), b4(d, b + 20)];\n};\n// write zip header\nvar wzh = function (d, b, c, cmp, su, fn, u, o, ce, t) {\n    var fl = fn.length, l = cmp.length;\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b] = 20, b += 2;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (t == 8 && (o.level == 1 ? 6 : o.level < 6 ? 4 : o.level == 9 ? 2 : 0)), d[b++] = u && 8;\n    d[b] = t, b += 2;\n    var dt = new Date(o.mtime || Date.now()), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        throw 'date not in range 1980-2099';\n    wbytes(d, b, ((y << 24) * 2) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1));\n    b += 4;\n    wbytes(d, b, c);\n    wbytes(d, b + 4, l);\n    wbytes(d, b + 8, su);\n    wbytes(d, b + 12, fl), b += 16; // skip extra field, comment\n    if (ce != null)\n        wbytes(d, b += 10, ce), b += 4;\n    d.set(fn, b);\n    b += fl;\n    if (ce == null)\n        d.set(cmp, b);\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                wzh(out, tot, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n                wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, tot, f.t), o += 46 + f.n.length, tot += 30 + f.n.length + f.d.length;\n            }\n            catch (e) {\n                return cb(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cb(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), m = file.length;\n        c.p(file);\n        var n = strToU8(fn), s = n.length;\n        var t = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = {\n                    t: t,\n                    d: d,\n                    m: m,\n                    c: c.d(),\n                    u: fn.length != l,\n                    n: n,\n                    p: p\n                };\n                o += 30 + s + l;\n                tot += 76 + 2 * s + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (n.length > 65535)\n            cbl('filename too long', null);\n        if (!t)\n            cbl(null, file);\n        else if (m < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var t = p.level == 0 ? 0 : 8;\n        var n = strToU8(fn), s = n.length;\n        if (n.length > 65535)\n            throw 'filename too long';\n        var d = t ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push({\n            t: t,\n            d: d,\n            m: file.length,\n            c: c.d(),\n            u: fn.length != s,\n            n: n,\n            o: o,\n            p: p\n        });\n        o += 30 + s + l;\n        tot += 76 + 2 * s + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n        wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, f.o, f.t), o += 46 + f.n.length;\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\nexport function unzip(data, cb) {\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cb('invalid zip file', null);\n            return;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (!lft)\n        cb(null, {});\n    var c = lft;\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = lft = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    var _loop_2 = function (i) {\n        var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                files[fn] = d;\n                if (!--lft)\n                    cb(null, files);\n            }\n        };\n        if (!c_1)\n            cbl(null, slc(data, b, b + sc));\n        else if (c_1 == 8) {\n            var infl = data.subarray(b, b + sc);\n            if (sc < 320000) {\n                try {\n                    cbl(null, inflateSync(infl, new u8(su)));\n                }\n                catch (e) {\n                    cbl(e, null);\n                }\n            }\n            else\n                term.push(inflate(infl, { size: su }, cbl));\n        }\n        else\n            cbl('unknown compression type ' + c_1, null);\n    };\n    for (var i = 0; i < c; ++i) {\n        _loop_2(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\nexport function unzipSync(data) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            throw 'invalid zip file';\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!c_2)\n            files[fn] = slc(data, b, b + sc);\n        else if (c_2 == 8)\n            files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\n        else\n            throw 'unknown compression type ' + c_2;\n    }\n    return files;\n}\n","import { MaskInputOptions, SlimDOMOptions } from 'rrweb-snapshot'\nimport { PostHog } from './posthog-core'\nimport { CaptureMetrics } from './capture-metrics'\nimport { RetryQueue } from './retry-queue'\n\nexport type Property = any\nexport type Properties = Record<string, Property>\nexport interface CaptureResult {\n    event: string\n    properties: Properties\n    $set?: Properties\n    timestamp?: Date\n}\nexport type CaptureCallback = (response: any, data: any) => void\n\nexport interface PostHogConfig {\n    api_host: string\n    api_method: string\n    api_transport: string\n    token: string\n    autocapture: boolean\n    rageclick: boolean\n    cross_subdomain_cookie: boolean\n    persistence: 'localStorage' | 'cookie' | 'memory' | 'localStorage+cookie'\n    persistence_name: string\n    cookie_name: string\n    loaded: (posthog_instance: PostHog) => void\n    store_google: boolean\n    save_referrer: boolean\n    test: boolean\n    verbose: boolean\n    img: boolean\n    capture_pageview: boolean\n    debug: boolean\n    cookie_expiration: number\n    upgrade: boolean\n    disable_session_recording: boolean\n    disable_persistence: boolean\n    disable_cookie: boolean\n    enable_recording_console_log: boolean\n    secure_cookie: boolean\n    ip: boolean\n    opt_out_capturing_by_default: boolean\n    opt_out_persistence_by_default: boolean\n    opt_out_capturing_persistence_type: 'localStorage' | 'cookie'\n    opt_out_capturing_cookie_prefix: string | null\n    respect_dnt: boolean\n    property_blacklist: string[]\n    xhr_headers: { [header_name: string]: string }\n    on_xhr_error: (failedRequest: XMLHttpRequest) => void\n    inapp_protocol: string\n    inapp_link_new_window: boolean\n    request_batching: boolean\n    sanitize_properties: ((properties: Properties, event_name: string) => Properties) | null\n    properties_string_max_length: number\n    session_recording: SessionRecordingOptions\n    mask_all_element_attributes: boolean\n    mask_all_text: boolean\n    advanced_disable_decide: boolean\n    advanced_disable_toolbar_metrics: boolean\n    get_device_id: (uuid: string) => string\n    name: string\n    callback_fn: string\n    _onCapture: (eventName: string, eventData: CaptureResult) => void\n    _capture_metrics: boolean\n    _capture_performance: boolean\n}\n\nexport interface OptInOutCapturingOptions {\n    capture: (event: string, properties: Properties, options: CaptureOptions) => void\n    capture_event_name: string\n    capture_properties: Properties\n    enable_persistence: boolean\n    clear_persistence: boolean\n    persistence_type: string\n    cookie_prefix: string\n    cookie_expiration: number\n    cross_subdomain_cookie: boolean\n    secure_cookie: boolean\n}\n\nexport interface isFeatureEnabledOptions {\n    send_event: boolean\n}\n\nexport interface SessionRecordingOptions {\n    blockClass?: string | RegExp\n    blockSelector?: string | null\n    ignoreClass?: string\n    maskAllInputs?: boolean\n    maskInputOptions?: MaskInputOptions\n    maskInputFn?: ((text: string) => string) | null\n    slimDOMOptions?: SlimDOMOptions | 'all' | true\n    collectFonts?: boolean\n    inlineStylesheet?: boolean\n}\n\nexport enum Compression {\n    GZipJS = 'gzip-js',\n    LZ64 = 'lz64',\n    Base64 = 'base64',\n}\n\nexport interface XHROptions {\n    transport?: 'XHR' | 'sendBeacon'\n    method?: 'POST' | 'GET'\n    urlQueryArgs?: { compression: Compression }\n    verbose?: boolean\n    blob?: boolean\n    sendBeacon?: boolean\n}\n\nexport interface CaptureOptions extends XHROptions {\n    $set?: Properties /** used with $identify */\n    $set_once?: Properties /** used with $identify */\n    _batchKey?: string /** key of queue, e.g. 'sessionRecording' vs 'event' */\n    _metrics?: Properties\n    _noTruncate?: boolean /** if set, overrides and disables config.properties_string_max_length */\n    endpoint?: string /** defaults to '/e/' */\n    send_instantly?: boolean /** if set skips the batched queue */\n    timestamp?: Date\n}\n\nexport interface RetryQueueElement {\n    retryAt: Date\n    requestData: QueuedRequestData\n}\nexport interface QueuedRequestData {\n    url: string\n    data: Properties\n    options: CaptureOptions\n    headers?: Properties\n    callback?: RequestCallback\n    retriesPerformedSoFar?: number\n}\n\nexport interface XHRParams extends QueuedRequestData {\n    captureMetrics: CaptureMetrics\n    retryQueue: RetryQueue\n    onXHRError: (req: XMLHttpRequest) => void\n}\n\nexport interface DecideResponse {\n    status: number\n    supportedCompression: Compression[]\n    config: {\n        enable_collect_everything: boolean\n    }\n    custom_properties: AutoCaptureCustomProperty[] // TODO: delete, not sent\n    featureFlags: Record<string, string | boolean>\n    sessionRecording?: {\n        endpoint?: string\n    }\n    editorParams: EditorParams\n    toolbarVersion: 'toolbar' /** deprecated, moved to editorParams */\n    isAuthenticated: boolean\n}\n\nexport type FeatureFlagsCallback = (flags: string[], variants: Record<string, string | boolean>) => void\n\n// TODO: delete custom_properties after changeless typescript refactor\nexport interface AutoCaptureCustomProperty {\n    name: string\n    css_selector: string\n    event_selectors: string[]\n}\n\nexport interface CompressionData {\n    data: string\n    compression?: Compression\n}\n\nexport interface GDPROptions {\n    capture?: (\n        event: string,\n        properties: Properties,\n        options: CaptureOptions\n    ) => void /** function used for capturing a PostHog event to record the opt-in action */\n    captureEventName?: string /** event name to be used for capturing the opt-in action */\n    captureProperties?: Properties /** set of properties to be captured along with the opt-in action */\n    persistenceType?: string /** persistence mechanism used - cookie or localStorage */\n    persistencePrefix?: string /** [__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name */\n    cookieExpiration?: number /** number of days until the opt-in cookie expires */\n    crossSubdomainCookie?: boolean /** whether the opt-in cookie is set as cross-subdomain or not */\n    secureCookie?: boolean /** whether the opt-in cookie is set as secure or not */\n    respectDnt?: boolean\n    window?: Window\n}\n\nexport type RequestCallback = (response: Record<string, any>, data?: Properties) => void\n\nexport interface PersistentStore {\n    is_supported: () => boolean\n    error: (error: any) => void\n    parse: (name: string) => any\n    get: (name: string) => any\n    set: (name: string, value: any, expire_days?: number | null, cross_subdomain?: boolean, secure?: boolean) => void\n    remove: (name: string, cross_subdomain?: boolean) => void\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type Breaker = {}\nexport type EventHandler = (event: Event) => boolean | void\n\nexport interface EditorParams {\n    jsURL?: string\n    apiURL?: string\n    toolbarVersion?: 'toolbar'\n}\n\nexport interface PostData {\n    buffer?: BlobPart\n    compression?: Compression\n    data?: string\n}\n\nexport interface JSC {\n    (): void\n    [key: string]: (response: any) => void\n}\n\nexport type SnippetArrayItem = [method: string, ...args: any[]]\n","import { LZString } from './lz-string'\nimport { gzipSync, strToU8 } from 'fflate'\nimport { _base64Encode } from './utils'\nimport { Compression, CompressionData, XHROptions } from './types'\n\nexport function decideCompression(compressionSupport: Partial<Record<Compression, boolean>>): Compression {\n    if (compressionSupport[Compression.GZipJS]) {\n        return Compression.GZipJS\n    } else if (compressionSupport[Compression.LZ64]) {\n        return Compression.LZ64\n    } else {\n        return Compression.Base64\n    }\n}\n\nexport function compressData(\n    compression: Compression,\n    jsonData: string,\n    options: XHROptions\n): [CompressionData | Uint8Array, XHROptions] {\n    if (compression === Compression.LZ64) {\n        return [{ data: LZString.compressToBase64(jsonData), compression: Compression.LZ64 }, options]\n    } else if (compression === Compression.GZipJS) {\n        // :TRICKY: This returns an UInt8Array. We don't encode this to a string - returning a blob will do this for us.\n        return [\n            gzipSync(strToU8(jsonData), { mtime: 0 }),\n            { ...options, blob: true, urlQueryArgs: { compression: Compression.GZipJS } },\n        ]\n    } else {\n        return [{ data: _base64Encode(jsonData) }, options]\n    }\n}\n","import { _each, _HTTPBuildQuery, logger } from './utils'\nimport Config from './config'\nimport { PostData, XHROptions, XHRParams } from './types'\n\nexport const addParamsToURL = (\n    url: string,\n    urlQueryArgs: Record<string, any> | undefined,\n    parameterOptions: { ip?: boolean }\n): string => {\n    const args = urlQueryArgs || {}\n    args['ip'] = parameterOptions['ip'] ? 1 : 0\n    args['_'] = new Date().getTime().toString()\n    args['ver'] = Config.LIB_VERSION\n\n    const halves = url.split('?')\n    if (halves.length > 1) {\n        const params = halves[1].split('&')\n        for (const p of params) {\n            const key = p.split('=')[0]\n            if (args[key]) {\n                delete args[key]\n            }\n        }\n    }\n\n    const argSeparator = url.indexOf('?') > -1 ? '&' : '?'\n    return url + argSeparator + _HTTPBuildQuery(args)\n}\n\nexport const encodePostData = (data: PostData | Uint8Array, options: Partial<XHROptions>): string | BlobPart | null => {\n    if (options.blob && data.buffer) {\n        return new Blob([data.buffer], { type: 'text/plain' })\n    }\n\n    if (options.sendBeacon || options.blob) {\n        const body = encodePostData(data, { method: 'POST' }) as BlobPart\n        return new Blob([body], { type: 'application/x-www-form-urlencoded' })\n    }\n\n    if (options.method !== 'POST') {\n        return null\n    }\n\n    let body_data\n    const isUint8Array = (d: unknown): d is Uint8Array => Object.prototype.toString.call(d) === '[object Uint8Array]'\n    if (Array.isArray(data) || isUint8Array(data)) {\n        // TODO: eh? passing an Array here?\n        body_data = 'data=' + encodeURIComponent(data as any)\n    } else {\n        body_data = 'data=' + encodeURIComponent(data.data as string)\n    }\n\n    if ('compression' in data && data.compression) {\n        body_data += '&compression=' + data.compression\n    }\n\n    return body_data\n}\n\nexport const xhr = ({\n    url,\n    data,\n    headers,\n    options,\n    captureMetrics,\n    callback,\n    retriesPerformedSoFar,\n    retryQueue,\n    onXHRError,\n}: XHRParams) => {\n    const req = new XMLHttpRequest()\n    req.open(options.method || 'GET', url, true)\n\n    const body = encodePostData(data, options)\n\n    captureMetrics.incr('_send_request')\n    captureMetrics.incr('_send_request_inflight')\n\n    _each(headers, function (headerValue, headerName) {\n        req.setRequestHeader(headerName, headerValue)\n    })\n\n    if (options.method === 'POST' && !options.blob) {\n        req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\n    }\n\n    // send the ph_optout cookie\n    // withCredentials cannot be modified until after calling .open on Android and Mobile Safari\n    req.withCredentials = true\n    req.onreadystatechange = () => {\n        if (req.readyState === 4) {\n            captureMetrics.incr(`xhr-response`)\n            captureMetrics.incr(`xhr-response-${req.status}`)\n            captureMetrics.decr('_send_request_inflight')\n\n            // XMLHttpRequest.DONE == 4, except in safari 4\n            if (req.status === 200) {\n                if (callback) {\n                    let response\n                    try {\n                        response = JSON.parse(req.responseText)\n                    } catch (e) {\n                        logger.error(e)\n                        return\n                    }\n                    callback(response)\n                }\n            } else {\n                if (typeof onXHRError === 'function') {\n                    onXHRError(req)\n                }\n\n                // don't retry certain errors\n                if ([401, 403, 404, 500].indexOf(req.status) < 0) {\n                    retryQueue.enqueue({\n                        url,\n                        data,\n                        options,\n                        headers,\n                        retriesPerformedSoFar: (retriesPerformedSoFar || 0) + 1,\n                        callback,\n                    })\n                }\n\n                if (callback) {\n                    callback({ status: 0 })\n                }\n            }\n        }\n    }\n    req.send(body)\n}\n","import { RequestQueueScaffold } from './base-request-queue'\nimport { encodePostData, xhr } from './send-request'\nimport { CaptureMetrics } from './capture-metrics'\nimport { QueuedRequestData, RetryQueueElement } from './types'\nimport Config from './config'\n\nexport class RetryQueue extends RequestQueueScaffold {\n    captureMetrics: CaptureMetrics\n    queue: RetryQueueElement[]\n    isPolling: boolean\n    areWeOnline: boolean\n    onXHRError: (failedRequest: XMLHttpRequest) => void\n\n    constructor(captureMetrics: CaptureMetrics, onXHRError: (failedRequest: XMLHttpRequest) => void) {\n        super()\n        this.captureMetrics = captureMetrics\n        this.isPolling = false\n        this.queue = []\n        this.areWeOnline = true\n        this.onXHRError = onXHRError\n\n        if ('onLine' in window.navigator) {\n            this.areWeOnline = window.navigator.onLine\n            window.addEventListener('online', () => {\n                this._handleWeAreNowOnline()\n            })\n            window.addEventListener('offline', () => {\n                this.areWeOnline = false\n            })\n        }\n    }\n\n    enqueue(requestData: QueuedRequestData): void {\n        const retriesPerformedSoFar = requestData.retriesPerformedSoFar || 0\n        if (retriesPerformedSoFar >= 10) {\n            return\n        }\n        const msToNextRetry = 3000 * 2 ** retriesPerformedSoFar\n        const retryAt = new Date(Date.now() + msToNextRetry)\n        console.warn(`Enqueued failed request for retry in ${msToNextRetry}`)\n        this.queue.push({ retryAt, requestData })\n        if (!this.isPolling) {\n            this.isPolling = true\n            this.poll()\n        }\n    }\n\n    poll(): void {\n        this._poller && clearTimeout(this._poller)\n        this._poller = setTimeout(() => {\n            if (this.areWeOnline && this.queue.length > 0) {\n                this.flush()\n            }\n            this.poll()\n        }, this._pollInterval) as any as number\n    }\n\n    flush(): void {\n        // using Date.now to make tests easier as recommended here https://codewithhugo.com/mocking-the-current-date-in-jest-tests/\n        const now = new Date(Date.now())\n        const toFlush = this.queue.filter(({ retryAt }) => retryAt < now)\n        if (toFlush.length > 0) {\n            this.queue = this.queue.filter(({ retryAt }) => retryAt >= now)\n            for (const { requestData } of toFlush) {\n                this._executeXhrRequest(requestData)\n            }\n        }\n    }\n\n    unload(): void {\n        if (this._poller) {\n            clearTimeout(this._poller)\n            this._poller = undefined\n        }\n        for (const { requestData } of this.queue) {\n            const { url, data, options } = requestData\n            try {\n                window.navigator.sendBeacon(url, encodePostData(data, { ...options, sendBeacon: true }))\n            } catch (e) {\n                // Note sendBeacon automatically retries, and after the first retry it will loose reference to contextual `this`.\n                // This means in some cases `this.getConfig` will be undefined.\n                if (Config.DEBUG) {\n                    console.error(e)\n                }\n            }\n        }\n        this.queue = []\n    }\n\n    _executeXhrRequest({ url, data, options, headers, callback, retriesPerformedSoFar }: QueuedRequestData): void {\n        xhr({\n            url,\n            data: data || {},\n            options: options || {},\n            headers: headers || {},\n            retriesPerformedSoFar: retriesPerformedSoFar || 0,\n            callback,\n            captureMetrics: this.captureMetrics,\n            retryQueue: this,\n            onXHRError: this.onXHRError,\n        })\n    }\n\n    _handleWeAreNowOnline(): void {\n        this.areWeOnline = true\n        this.flush()\n    }\n}\n","import { PostHogPersistence, SESSION_ID } from './posthog-persistence'\nimport { sessionStore } from './storage'\nimport { _UUID } from './utils'\nimport { PostHogConfig } from './types'\n\nconst SESSION_CHANGE_THRESHOLD = 30 * 60 * 1000 // 30 mins\nconst SESSION_LENGTH_LIMIT = 24 * 3600 * 1000 // 24 hours\n\nexport class SessionIdManager {\n    persistence: PostHogPersistence\n    _windowId: string | null | undefined\n    _sessionId: string | null | undefined\n    window_id_storage_key: string\n    _sessionStartTimestamp: number | null\n    _sessionActivityTimestamp: number | null\n\n    constructor(config: Partial<PostHogConfig>, persistence: PostHogPersistence) {\n        this.persistence = persistence\n        this._windowId = undefined\n        this._sessionId = undefined\n        this._sessionStartTimestamp = null\n        this._sessionActivityTimestamp = null\n\n        if (config['persistence_name']) {\n            this.window_id_storage_key = 'ph_' + config['persistence_name'] + '_window_id'\n        } else {\n            this.window_id_storage_key = 'ph_' + config['token'] + '_window_id'\n        }\n    }\n\n    // Note: this tries to store the windowId in sessionStorage. SessionStorage is unique to the current window/tab,\n    // and persists page loads/reloads. So it's uniquely suited for storing the windowId. This function also respects\n    // when persistence is disabled (by user config) and when sessionStorage is not supported (it *should* be supported on all browsers),\n    // and in that case, it falls back to memory (which sadly, won't persist page loads)\n    _setWindowId(windowId: string): void {\n        if (windowId !== this._windowId) {\n            this._windowId = windowId\n            if (!this.persistence.disabled && sessionStore.is_supported()) {\n                sessionStore.set(this.window_id_storage_key, windowId)\n            }\n        }\n    }\n\n    _getWindowId(): string | null {\n        if (this._windowId) {\n            return this._windowId\n        }\n        if (!this.persistence.disabled && sessionStore.is_supported()) {\n            return sessionStore.parse(this.window_id_storage_key)\n        }\n        return null\n    }\n\n    // Note: 'this.persistence.register' can be disabled in the config.\n    // In that case, this works by storing sessionId and the timestamp in memory.\n    _setSessionId(\n        sessionId: string | null,\n        sessionActivityTimestamp: number | null,\n        sessionStartTimestamp: number | null\n    ): void {\n        if (\n            sessionId !== this._sessionId ||\n            sessionActivityTimestamp !== this._sessionActivityTimestamp ||\n            sessionStartTimestamp !== this._sessionStartTimestamp\n        ) {\n            this._sessionStartTimestamp = sessionStartTimestamp\n            this._sessionActivityTimestamp = sessionActivityTimestamp\n            this._sessionId = sessionId\n            this.persistence.register({\n                [SESSION_ID]: [sessionActivityTimestamp, sessionId, sessionStartTimestamp],\n            })\n        }\n    }\n\n    _getSessionId(): [number, string, number] {\n        if (this._sessionId && this._sessionActivityTimestamp && this._sessionStartTimestamp) {\n            return [this._sessionActivityTimestamp, this._sessionId, this._sessionStartTimestamp]\n        }\n        const sessionId = this.persistence.props[SESSION_ID]\n\n        if (Array.isArray(sessionId) && sessionId.length === 2) {\n            // Storage does not yet have a session start time. Add the last activity timestamp as the start time\n            sessionId.push(sessionId[0])\n        }\n\n        return sessionId || [0, null, 0]\n    }\n\n    // Resets the session id by setting it to null. On the subsequent call to checkAndGetSessionAndWindowId,\n    // new ids will be generated.\n    resetSessionId(): void {\n        this._setSessionId(null, null, null)\n    }\n\n    /*\n     * This function returns the current sessionId and windowId. It should be used to\n     * access these values over directly calling `._sessionId` or `._windowId`. In addition\n     * to returning the sessionId and windowId, this function also manages cycling the\n     * sessionId and windowId when appropriate by doing the following:\n     *\n     * 1. If the sessionId or windowId is not set, it will generate a new one and store it.\n     * 2. If the readOnly param is set to false, it will:\n     *    a. Check if it has been > SESSION_CHANGE_THRESHOLD since the last call with this flag set.\n     *       If so, it will generate a new sessionId and store it.\n     *    b. Update the timestamp stored with the sessionId to ensure the current session is extended\n     *       for the appropriate amount of time.\n     *\n     * @param {boolean} readOnly (optional) Defaults to False. Should be set to True when the call to the function should not extend or cycle the session (e.g. being called for non-user generated events)\n     * @param {Number} timestamp (optional) Defaults to the current time. The timestamp to be stored with the sessionId (used when determining if a new sessionId should be generated)\n     */\n    checkAndGetSessionAndWindowId(readOnly = false, _timestamp: number | null = null) {\n        const timestamp = _timestamp || new Date().getTime()\n\n        // eslint-disable-next-line prefer-const\n        let [lastTimestamp, sessionId, startTimestamp] = this._getSessionId()\n        let windowId = this._getWindowId()\n\n        const sessionPastMaximumLength =\n            startTimestamp && startTimestamp > 0 && Math.abs(timestamp - startTimestamp) > SESSION_LENGTH_LIMIT\n\n        if (\n            !sessionId ||\n            (!readOnly && Math.abs(timestamp - lastTimestamp) > SESSION_CHANGE_THRESHOLD) ||\n            sessionPastMaximumLength\n        ) {\n            sessionId = _UUID()\n            windowId = _UUID()\n            startTimestamp = timestamp\n        } else if (!windowId) {\n            windowId = _UUID()\n        }\n\n        const newTimestamp = lastTimestamp === 0 || !readOnly || sessionPastMaximumLength ? timestamp : lastTimestamp\n        const sessionStartTimestamp = startTimestamp === 0 ? new Date().getTime() : startTimestamp\n\n        this._setWindowId(windowId)\n        this._setSessionId(sessionId, newTimestamp, sessionStartTimestamp)\n\n        return {\n            sessionId: sessionId,\n            windowId: windowId,\n        }\n    }\n}\n","import { window } from './utils'\nimport Config from './config'\nimport { Properties } from './types'\n\nfunction isFloat(n: any): n is number {\n    return Number(n) === n && n % 1 !== 0\n}\n\nexport function optimisePerformanceData(performanceEntries: PerformanceResourceTiming[]) {\n    performanceEntries.forEach((performanceEntry, index) => {\n        for (const performanceEntryItemKey_ in performanceEntry) {\n            const performanceEntryItemKey = performanceEntryItemKey_ as keyof PerformanceResourceTiming\n            if (\n                isFloat(performanceEntry[performanceEntryItemKey]) &&\n                performanceEntry[performanceEntryItemKey].toString().match(/^\\d+\\.\\d{4,}$/)\n            ) {\n                ;(performanceEntries[index][performanceEntryItemKey] as number) = Number(\n                    (performanceEntry[performanceEntryItemKey] as number).toFixed(3)\n                )\n            }\n\n            if (performanceEntryItemKey === 'serverTiming' && performanceEntry[performanceEntryItemKey].length === 0) {\n                delete (performanceEntries[index] as any)[performanceEntryItemKey]\n            }\n\n            if (performanceEntryItemKey === 'entryType' && performanceEntry[performanceEntryItemKey] === 'resource') {\n                // Writeable<> doesn't support inherited attributes from PerformanceEntry on PerformanceResourceTiming\n                delete (performanceEntries[index] as any)[performanceEntryItemKey]\n            }\n\n            if (performanceEntryItemKey === 'nextHopProtocol') {\n                // Writeable<> doesn't support inherited attributes from PerformanceEntry on PerformanceResourceTiming\n                delete (performanceEntries[index] as any)[performanceEntryItemKey]\n            }\n\n            if (performanceEntry[performanceEntryItemKey] === 0) {\n                delete performanceEntries[index][performanceEntryItemKey]\n            }\n        }\n    })\n\n    return deduplicateKeys(performanceEntries)\n}\n\nexport function getPerformanceEntriesByType(type: string): any[][] {\n    // wide support but not available pre IE 10\n    try {\n        // stringifying and then parsing made data collection more reliable\n        const entriesOfType = JSON.parse(JSON.stringify(window.performance.getEntriesByType(type)))\n        return optimisePerformanceData(entriesOfType)\n    } catch (ex) {\n        if (Config.DEBUG) {\n            console.warn('not able to capture performance data (' + type + ') - ' + ex)\n        }\n        return []\n    }\n}\n\n/**\n * https://developer.mozilla.org/en-US/docs/Web/API/Performance/getEntriesByType\n *\n *  The arrays in the prformance data are populated by getEntriesByType\n *  They contain PerformanceEntry objects for the given performance type.\n *  This means each object in the array shares a set of keys\n *\n * @param performanceEntries\n * @returns {(string[]|*)[]}\n */\nexport function deduplicateKeys(performanceEntries: PerformanceEntryList): [string[], any[]] | [] {\n    if (performanceEntries.length === 0) {\n        return []\n    }\n    const keys = Object.keys(performanceEntries[0])\n    return [keys, performanceEntries.map((obj) => keys.map((key) => (obj as any)[key]))]\n}\n\n/*\nThe duration property is on the PerformanceNavigationTiming object.\n\nIt is a timestamp that is the difference between the PerformanceNavigationTiming.loadEventEnd\nand PerformanceEntry.startTime properties.\nhttps://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming\n\nEven in browsers that implement it, it is not always available to us\n */\nexport function pageLoadFrom(performanceData: {\n    navigation: any[][]\n    paint: any[][]\n    resource: any[][]\n}): number | void {\n    const keys = performanceData.navigation && performanceData.navigation[0]\n    const values = performanceData.navigation && performanceData.navigation[1] && performanceData.navigation[1][0]\n\n    const durationIndex = keys && keys.indexOf('duration')\n    if (durationIndex > -1) {\n        return values[durationIndex]\n    } else {\n        const endKeyIndex = keys && keys.indexOf('loadEventEnd')\n        const startKeyIndex = keys && keys.indexOf('startTime') // start key is not present if start is 0\n        if (endKeyIndex > -1) {\n            const end = values && values[endKeyIndex]\n            const start = (values && values[startKeyIndex]) || 0\n            return end - start\n        }\n    }\n}\n\nexport function getPerformanceData(): Properties {\n    const performanceEntries = {\n        navigation: getPerformanceEntriesByType('navigation'),\n        paint: getPerformanceEntriesByType('paint'),\n        resource: getPerformanceEntriesByType('resource'),\n    }\n\n    if (typeof window !== undefined && window.performance && window.performance.clearResourceTimings) {\n        window.performance.clearResourceTimings()\n    }\n\n    const properties: Properties = {}\n\n    const pageLoad = pageLoadFrom(performanceEntries)\n    if (pageLoad) {\n        properties['$performance_page_loaded'] = pageLoad\n    }\n    properties['$performance_raw'] = JSON.stringify(performanceEntries)\n\n    return properties\n}\n","/**\n * Integrate Sentry with PostHog. This will add a direct link to the person in Sentry, and an $exception event in PostHog\n *\n * ### Usage\n *\n *     Sentry.init({\n *          dsn: 'https://example',\n *          integrations: [\n *              new posthog.SentryIntegration(posthog)\n *          ]\n *     })\n *\n * @param {Object} [posthog] The posthog object\n * @param {string} [organization] Optional: The Sentry organization, used to send a direct link from PostHog to Sentry\n * @param {Number} [projectId] Optional: The Sentry project id, used to send a direct link from PostHog to Sentry\n * @param {string} [prefix] Optional: Url of a self-hosted sentry instance (default: https://sentry.io/organizations/)\n */\nimport { EventProcessor, Hub, Integration } from '@sentry/types'\nimport { Properties } from '../types'\nimport { PostHog } from '../posthog-core'\n\nexport class SentryIntegration implements Integration {\n    name: string\n    setupOnce: (addGlobalEventProcessor: (callback: EventProcessor) => void, getCurrentHub: () => Hub) => void\n\n    constructor(_posthog: PostHog, organization?: string, projectId?: number, prefix?: string) {\n        // setupOnce gets called by Sentry when it intializes the plugin\n        // 'this' is not this: PostHogLib object, but the new class that's created.\n        // TODO: refactor to a real class. The types\n        this.name = 'posthog-js'\n        this.setupOnce = function (addGlobalEventProcessor: (callback: EventProcessor) => void) {\n            addGlobalEventProcessor((event) => {\n                if (event.level !== 'error' || !_posthog.__loaded) return event\n                if (!event.tags) event.tags = {}\n                event.tags['PostHog Person URL'] = _posthog.config.api_host + '/person/' + _posthog.get_distinct_id()\n                if (_posthog.sessionRecordingStarted()) {\n                    event.tags['PostHog Recording URL'] =\n                        _posthog.config.api_host +\n                        '/recordings/#sessionRecordingId=' +\n                        _posthog.sessionManager.checkAndGetSessionAndWindowId(true).sessionId\n                }\n                const data: Properties = {\n                    $sentry_event_id: event.event_id,\n                    $sentry_exception: event.exception,\n                }\n                if (organization && projectId)\n                    data['$sentry_url'] =\n                        (prefix || 'https://sentry.io/organizations/') +\n                        organization +\n                        '/issues/?project=' +\n                        projectId +\n                        '&query=' +\n                        event.event_id\n                _posthog.capture('$exception', data)\n                return event\n            })\n        }\n    }\n}\n","import { LZString } from './lz-string'\nimport Config from './config'\nimport {\n    logger,\n    document,\n    userAgent,\n    window,\n    _isUndefined,\n    _extend,\n    _each,\n    _isObject,\n    _isBlockedUA,\n    _copyAndTruncateStrings,\n    _isArray,\n    _safewrap_class,\n    _register_event,\n    _UUID,\n    _info,\n    _eachArray,\n} from './utils'\nimport { autocapture } from './autocapture'\nimport { PostHogPeople } from './posthog-people'\nimport { PostHogFeatureFlags } from './posthog-featureflags'\nimport { ALIAS_ID_KEY, PEOPLE_DISTINCT_ID_KEY, PostHogPersistence } from './posthog-persistence'\nimport { SessionRecording } from './extensions/sessionrecording'\nimport { Decide } from './decide'\nimport { Toolbar } from './extensions/toolbar'\nimport { clearOptInOut, hasOptedIn, hasOptedOut, optIn, optOut, userOptedOut } from './gdpr-utils'\nimport { cookieStore, localStore } from './storage'\nimport { RequestQueue } from './request-queue'\nimport { CaptureMetrics } from './capture-metrics'\nimport { compressData, decideCompression } from './compression'\nimport { addParamsToURL, encodePostData, xhr } from './send-request'\nimport { RetryQueue } from './retry-queue'\nimport { SessionIdManager } from './sessionid'\nimport { getPerformanceData } from './apm'\nimport {\n    CaptureOptions,\n    CaptureResult,\n    Compression,\n    GDPROptions,\n    isFeatureEnabledOptions,\n    JSC,\n    OptInOutCapturingOptions,\n    PostHogConfig,\n    Properties,\n    Property,\n    RequestCallback,\n    SnippetArrayItem,\n    XHROptions,\n} from './types'\nimport { SentryIntegration } from './extensions/sentry-integration'\n\n/*\nSIMPLE STYLE GUIDE:\n\nthis.x === public function\nthis._x === internal - only use within this file\nthis.__x === private - only use within the class\n\nGlobals should be all caps\n*/\n\nenum InitType {\n    INIT_MODULE = 0,\n    INIT_SNIPPET = 1,\n}\n\nlet init_type: InitType\n\n// TODO: the type of this is very loose. Sometimes it's also PostHogLib itself\nlet posthog_master: Record<string, PostHog> & {\n    init: (token: string, config: Partial<PostHogConfig>, name: string) => void\n}\n\n// some globals for comparisons\nconst __NOOP = () => {}\nconst __NOOPTIONS = {}\n\nconst PRIMARY_INSTANCE_NAME = 'posthog'\n\n/*\n * Dynamic... constants? Is that an oxymoron?\n */\n// http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n// https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#withCredentials\nconst USE_XHR = window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()\n\n// IE<10 does not support cross-origin XHR's but script tags\n// with defer won't block window.onload; ENQUEUE_REQUESTS\n// should only be true for Opera<12\nlet ENQUEUE_REQUESTS = !USE_XHR && userAgent.indexOf('MSIE') === -1 && userAgent.indexOf('Mozilla') === -1\n\nconst defaultConfig = (): PostHogConfig => ({\n    api_host: 'https://app.posthog.com',\n    api_method: 'POST',\n    api_transport: 'XHR',\n    token: '',\n    autocapture: true,\n    rageclick: false,\n    cross_subdomain_cookie: document?.location?.hostname?.indexOf('herokuapp.com') === -1,\n    persistence: 'cookie',\n    persistence_name: '',\n    cookie_name: '',\n    loaded: __NOOP,\n    store_google: true,\n    save_referrer: true,\n    test: false,\n    verbose: false,\n    img: false,\n    capture_pageview: true,\n    debug: false,\n    cookie_expiration: 365,\n    upgrade: false,\n    disable_session_recording: false,\n    disable_persistence: false,\n    disable_cookie: false,\n    enable_recording_console_log: false,\n    secure_cookie: window?.location?.protocol === 'https:',\n    ip: true,\n    opt_out_capturing_by_default: false,\n    opt_out_persistence_by_default: false,\n    opt_out_capturing_persistence_type: 'localStorage',\n    opt_out_capturing_cookie_prefix: null,\n    property_blacklist: [],\n    respect_dnt: false,\n    sanitize_properties: null,\n    xhr_headers: {}, // { header: value, header2: value }\n    inapp_protocol: '//',\n    inapp_link_new_window: false,\n    request_batching: true,\n    properties_string_max_length: 65535,\n    session_recording: {\n        // select set of rrweb config options we expose to our users\n        // see https://github.com/rrweb-io/rrweb/blob/master/guide.md\n        blockClass: 'ph-no-capture',\n        blockSelector: null,\n        ignoreClass: 'ph-ignore-input',\n        maskAllInputs: true,\n        maskInputOptions: {},\n        maskInputFn: null,\n        slimDOMOptions: {},\n        collectFonts: false,\n        inlineStylesheet: true,\n    },\n    mask_all_element_attributes: false,\n    mask_all_text: false,\n    advanced_disable_decide: false,\n    advanced_disable_toolbar_metrics: false,\n    on_xhr_error: (req) => {\n        const error = 'Bad HTTP status: ' + req.status + ' ' + req.statusText\n        console.error(error)\n    },\n    get_device_id: (uuid) => uuid,\n    // Used for internal testing\n    _onCapture: __NOOP,\n    _capture_metrics: false,\n    _capture_performance: false,\n    name: 'posthog',\n    callback_fn: 'posthog._jsc',\n})\n\n/**\n * create_mplib(token:string, config:object, name:string)\n *\n * This function is used by the init method of PostHogLib objects\n * as well as the main initializer at the end of the JSLib (that\n * initializes document.posthog as well as any additional instances\n * declared before this file has loaded).\n */\nconst create_mplib = function (token: string, config?: Partial<PostHogConfig>, name?: string): PostHog {\n    let instance: PostHog\n    const target =\n        name === PRIMARY_INSTANCE_NAME || !posthog_master ? posthog_master : name ? posthog_master[name] : undefined\n\n    if (target && init_type === InitType.INIT_MODULE) {\n        instance = target as any\n    } else {\n        if (target && !_isArray(target)) {\n            console.error('You have already initialized ' + name)\n            // TODO: throw something instead?\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            return\n        }\n        instance = new PostHog()\n    }\n\n    instance._init(token, config, name)\n    instance.toolbar.maybeLoadEditor()\n\n    instance.sessionRecording = new SessionRecording(instance)\n    instance.sessionRecording.startRecordingIfEnabled()\n\n    instance.__autocapture_enabled = instance.get_config('autocapture')\n    if (instance.get_config('autocapture')) {\n        const num_buckets = 100\n        const num_enabled_buckets = 100\n        if (!autocapture.enabledForProject(instance.get_config('token'), num_buckets, num_enabled_buckets)) {\n            instance.__autocapture_enabled = false\n            logger.log('Not in active bucket: disabling Automatic Event Collection.')\n        } else if (!autocapture.isBrowserSupported()) {\n            instance.__autocapture_enabled = false\n            logger.log('Disabling Automatic Event Collection because this browser is not supported')\n        } else {\n            autocapture.init(instance)\n        }\n    }\n\n    // if any instance on the page has debug = true, we set the\n    // global debug to be true\n    Config.DEBUG = Config.DEBUG || instance.get_config('debug')\n\n    // if target is not defined, we called init after the lib already\n    // loaded, so there won't be an array of things to execute\n    if (typeof target !== 'undefined' && _isArray(target)) {\n        // Crunch through the people queue first - we queue this data up &\n        // flush on identify, so it's better to do all these operations first\n        instance._execute_array.call(instance.people, (target as any).people)\n        instance._execute_array(target)\n    }\n\n    return instance\n}\n\n/**\n * PostHog Library Object\n * @constructor\n */\nexport class PostHog {\n    __loaded: boolean\n    config: PostHogConfig\n\n    persistence: PostHogPersistence\n    sessionManager: SessionIdManager\n    people: PostHogPeople\n    featureFlags: PostHogFeatureFlags\n    feature_flags: PostHogFeatureFlags\n    toolbar: Toolbar\n    sessionRecording: SessionRecording | undefined\n\n    _captureMetrics: CaptureMetrics\n    _requestQueue: RequestQueue\n    _retryQueue: RetryQueue\n\n    _triggered_notifs: any\n    compression: Partial<Record<Compression, boolean>>\n    _jsc: JSC\n    __captureHooks: ((eventName: string) => void)[]\n    __request_queue: [url: string, data: Record<string, any>, options: XHROptions, callback?: RequestCallback][]\n    __autocapture_enabled: boolean | undefined\n    decideEndpointWasHit: boolean\n\n    SentryIntegration: typeof SentryIntegration\n\n    constructor() {\n        this.config = defaultConfig()\n        this.compression = {}\n        this.decideEndpointWasHit = false\n        this.SentryIntegration = SentryIntegration\n        this.__captureHooks = []\n        this.__request_queue = []\n        this.__loaded = false\n        this.__autocapture_enabled = undefined\n        this._jsc = function () {} as JSC\n        this.people = new PostHogPeople(this)\n        this.featureFlags = new PostHogFeatureFlags(this)\n        this.feature_flags = this.featureFlags\n        this.toolbar = new Toolbar(this)\n\n        // these are created in _init() after we have the config\n        this._captureMetrics = undefined as any\n        this._requestQueue = undefined as any\n        this._retryQueue = undefined as any\n        this.persistence = undefined as any\n        this.sessionManager = undefined as any\n    }\n\n    // Initialization methods\n\n    /**\n     * This function initializes a new instance of the PostHog capturing object.\n     * All new instances are added to the main posthog object as sub properties (such as\n     * posthog.library_name) and also returned by this function. To define a\n     * second instance on the page, you would call:\n     *\n     *     posthog.init('new token', { your: 'config' }, 'library_name');\n     *\n     * and use it like so:\n     *\n     *     posthog.library_name.capture(...);\n     *\n     * @param {String} token   Your PostHog API token\n     * @param {Object} [config]  A dictionary of config options to override. <a href=\"https://github.com/posthog/posthog-js/blob/6e0e873/src/posthog-core.js#L57-L91\">See a list of default config options</a>.\n     * @param {String} [name]    The name for the new posthog instance that you want created\n     */\n    init(token: string, config?: Partial<PostHogConfig>, name?: string): PostHog | void {\n        if (_isUndefined(name)) {\n            console.error('You must name your new library: init(token, config, name)')\n            return\n        }\n        if (name === PRIMARY_INSTANCE_NAME) {\n            console.error('You must initialize the main posthog object right after you include the PostHog js snippet')\n            return\n        }\n\n        const instance: PostHog = create_mplib(token, config, name)\n        posthog_master[name] = instance\n        instance._loaded()\n\n        return instance\n    }\n\n    // posthog._init(token:string, config:object, name:string)\n    //\n    // This function sets up the current instance of the posthog\n    // library.  The difference between this method and the init(...)\n    // method is this one initializes the actual instance, whereas the\n    // init(...) method sets up a new library and calls _init on it.\n    //\n    _init(token: string, config: Partial<PostHogConfig> = {}, name?: string): void {\n        this.__loaded = true\n        this.config = {} as PostHogConfig // will be set right below\n        this._triggered_notifs = []\n\n        this.set_config(\n            _extend({}, defaultConfig(), config, {\n                name: name,\n                token: token,\n                callback_fn: (name === PRIMARY_INSTANCE_NAME ? name : PRIMARY_INSTANCE_NAME + '.' + name) + '._jsc',\n            })\n        )\n\n        this._jsc = function () {} as JSC\n\n        this._captureMetrics = new CaptureMetrics(this.get_config('_capture_metrics'))\n        this._requestQueue = new RequestQueue(this._captureMetrics, this._handle_queued_event.bind(this))\n        this._retryQueue = new RetryQueue(this._captureMetrics, this.get_config('on_xhr_error'))\n        this.__captureHooks = []\n        this.__request_queue = []\n\n        this.persistence = new PostHogPersistence(this.config)\n        this.sessionManager = new SessionIdManager(this.config, this.persistence)\n\n        this._gdpr_init()\n\n        if (!this.get_distinct_id()) {\n            // There is no need to set the distinct id\n            // or the device id if something was already stored\n            // in the persitence\n            const uuid = this.get_config('get_device_id')(_UUID())\n            this.register_once(\n                {\n                    distinct_id: uuid,\n                    $device_id: uuid,\n                },\n                ''\n            )\n        }\n        // Set up the window close event handler \"unload\"\n        window.addEventListener && window.addEventListener('unload', this._handle_unload.bind(this))\n    }\n\n    // Private methods\n\n    _loaded(): void {\n        // Pause `reloadFeatureFlags` calls in config.loaded callback.\n        // These feature flags are loaded in the decide call made right afterwards\n        this.featureFlags.setReloadingPaused(true)\n\n        try {\n            this.get_config('loaded')(this)\n        } catch (err) {\n            console.error('`loaded` function failed', err)\n        }\n\n        this._start_queue_if_opted_in()\n\n        // this happens after so a user can call identify in\n        // the loaded callback\n        if (this.get_config('capture_pageview')) {\n            this.capture('$pageview', {}, { send_instantly: true })\n        }\n\n        // Call decide to get what features are enabled and other settings.\n        // As a reminder, if the /decide endpoint is disabled, feature flags, toolbar, session recording, autocapture,\n        // and compression will not be available.\n        if (!this.get_config('advanced_disable_decide')) {\n            new Decide(this).call()\n        }\n\n        this.featureFlags.resetRequestQueue()\n        this.featureFlags.setReloadingPaused(false)\n    }\n\n    _start_queue_if_opted_in(): void {\n        if (!this.has_opted_out_capturing()) {\n            if (this.get_config('request_batching')) {\n                this._requestQueue.poll()\n            }\n        }\n    }\n\n    _dom_loaded(): void {\n        if (!this.has_opted_out_capturing()) {\n            _eachArray(this.__request_queue, (item) => {\n                this._send_request(...item)\n            })\n        }\n\n        this.__request_queue = []\n\n        this._start_queue_if_opted_in()\n    }\n\n    /**\n     * _prepare_callback() should be called by callers of _send_request for use\n     * as the callback argument.\n     *\n     * If there is no callback, this returns null.\n     * If we are going to make XHR/XDR requests, this returns a function.\n     * If we are going to use script tags, this returns a string to use as the\n     * callback GET param.\n     */\n    // TODO: get rid of the \"| string\"\n    _prepare_callback(callback?: RequestCallback, data?: Properties): RequestCallback | null | string {\n        if (_isUndefined(callback)) {\n            return null\n        }\n\n        if (USE_XHR) {\n            return function (response) {\n                callback(response, data)\n            }\n        } else {\n            // if the user gives us a callback, we store as a random\n            // property on this instances jsc function and update our\n            // callback string to reflect that.\n            const jsc = this._jsc\n            const randomized_cb = '' + Math.floor(Math.random() * 100000000)\n            const callback_string = this.get_config('callback_fn') + '[' + randomized_cb + ']'\n            jsc[randomized_cb] = function (response: any) {\n                delete jsc[randomized_cb]\n                callback(response, data)\n            }\n            return callback_string\n        }\n    }\n\n    _handle_unload(): void {\n        if (!this.get_config('request_batching')) {\n            if (this.get_config('capture_pageview')) {\n                this.capture('$pageleave', null, { transport: 'sendBeacon' })\n            }\n            return\n        }\n\n        if (this.get_config('capture_pageview')) {\n            this.capture('$pageleave')\n        }\n        if (this.get_config('_capture_metrics')) {\n            this._requestQueue.updateUnloadMetrics()\n            this.capture('$capture_metrics', this._captureMetrics.metrics)\n        }\n        this._requestQueue.unload()\n        this._retryQueue.unload()\n    }\n\n    _handle_queued_event(url: string, data: Record<string, any>, options?: XHROptions): void {\n        const jsonData = JSON.stringify(data)\n        this.__compress_and_send_json_request(url, jsonData, options || __NOOPTIONS, __NOOP)\n    }\n\n    __compress_and_send_json_request(\n        url: string,\n        jsonData: string,\n        options: XHROptions,\n        callback?: RequestCallback\n    ): void {\n        const [data, _options] = compressData(decideCompression(this.compression), jsonData, options)\n        this._send_request(url, data, _options, callback)\n    }\n\n    _send_request(url: string, data: Record<string, any>, options: XHROptions, callback?: RequestCallback): void {\n        if (ENQUEUE_REQUESTS) {\n            this.__request_queue.push([url, data, options, callback])\n            return\n        }\n\n        const DEFAULT_OPTIONS = {\n            method: this.get_config('api_method'),\n            transport: this.get_config('api_transport'),\n            verbose: this.get_config('verbose'),\n        }\n\n        options = _extend(DEFAULT_OPTIONS, options || {})\n        if (!USE_XHR) {\n            options.method = 'GET'\n        }\n\n        const useSendBeacon = 'sendBeacon' in window.navigator && options.transport === 'sendBeacon'\n        url = addParamsToURL(url, options.urlQueryArgs || {}, {\n            ip: this.get_config('ip'),\n        })\n\n        if (_isObject(data) && this.get_config('img')) {\n            const img = document.createElement('img')\n            img.src = url\n            document.body.appendChild(img)\n        } else if (useSendBeacon) {\n            // beacon documentation https://w3c.github.io/beacon/\n            // beacons format the message and use the type property\n            // also no need to try catch as sendBeacon does not report errors\n            //   and is defined as best effort attempt\n            try {\n                window.navigator.sendBeacon(url, encodePostData(data, { ...options, sendBeacon: true }))\n            } catch (e) {\n                if (this.get_config('debug')) {\n                    console.error(e)\n                }\n            }\n        } else if (USE_XHR) {\n            try {\n                xhr({\n                    url: url,\n                    data: data,\n                    headers: this.get_config('xhr_headers'),\n                    options: options,\n                    captureMetrics: this._captureMetrics,\n                    callback,\n                    retriesPerformedSoFar: 0,\n                    retryQueue: this._retryQueue,\n                    onXHRError: this.get_config('on_xhr_error'),\n                })\n            } catch (e) {\n                console.error(e)\n            }\n        } else {\n            const script = document.createElement('script')\n            script.type = 'text/javascript'\n            script.async = true\n            script.defer = true\n            script.src = url\n            const s = document.getElementsByTagName('script')[0]\n            s.parentNode?.insertBefore(script, s)\n        }\n    }\n\n    /**\n     * _execute_array() deals with processing any posthog function\n     * calls that were called before the PostHog library were loaded\n     * (and are thus stored in an array so they can be called later)\n     *\n     * Note: we fire off all the posthog function calls && user defined\n     * functions BEFORE we fire off posthog capturing calls. This is so\n     * identify/register/set_config calls can properly modify early\n     * capturing calls.\n     *\n     * @param {Array} array\n     */\n    _execute_array(array: SnippetArrayItem[]): void {\n        let fn_name\n        const alias_calls: SnippetArrayItem[] = []\n        const other_calls: SnippetArrayItem[] = []\n        const capturing_calls: SnippetArrayItem[] = []\n        _eachArray(array, (item) => {\n            if (item) {\n                fn_name = item[0]\n                if (_isArray(fn_name)) {\n                    capturing_calls.push(item) // chained call e.g. posthog.get_group().set()\n                } else if (typeof item === 'function') {\n                    ;(item as any).call(this)\n                } else if (_isArray(item) && fn_name === 'alias') {\n                    alias_calls.push(item)\n                } else if (\n                    _isArray(item) &&\n                    fn_name.indexOf('capture') !== -1 &&\n                    typeof (this as any)[fn_name] === 'function'\n                ) {\n                    capturing_calls.push(item)\n                } else {\n                    other_calls.push(item)\n                }\n            }\n        })\n\n        const execute = function (calls: SnippetArrayItem[], thisArg: any) {\n            _eachArray(\n                calls,\n                function (item) {\n                    if (_isArray(item[0])) {\n                        // chained call\n                        let caller = thisArg\n                        _each(item, function (call) {\n                            caller = caller[call[0]].apply(caller, call.slice(1))\n                        })\n                    } else {\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-ignore\n                        this[item[0]].apply(this, item.slice(1))\n                    }\n                },\n                thisArg\n            )\n        }\n\n        execute(alias_calls, this)\n        execute(other_calls, this)\n        execute(capturing_calls, this)\n    }\n\n    /**\n     * push() keeps the standard async-array-push\n     * behavior around after the lib is loaded.\n     * This is only useful for external integrations that\n     * do not wish to rely on our convenience methods\n     * (created in the snippet).\n     *\n     * ### Usage:\n     *     posthog.push(['register', { a: 'b' }]);\n     *\n     * @param {Array} item A [function_name, args...] array to be executed\n     */\n    push(item: SnippetArrayItem): void {\n        this._execute_array([item])\n    }\n\n    /**\n     * Capture an event. This is the most important and\n     * frequently used PostHog function.\n     *\n     * ### Usage:\n     *\n     *     // capture an event named 'Registered'\n     *     posthog.capture('Registered', {'Gender': 'Male', 'Age': 21});\n     *\n     *     // capture an event using navigator.sendBeacon\n     *     posthog.capture('Left page', {'duration_seconds': 35}, {transport: 'sendBeacon'});\n     *\n     * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n     * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n     * @param {Object} [options] Optional configuration for this capture request.\n     * @param {String} [options.transport] Transport method for network request ('XHR' or 'sendBeacon').\n     * @param {Date} [options.timestamp] Timestamp is a Date object. If not set, it'll automatically be set to the current time.\n     */\n    capture(\n        event_name: string,\n        properties?: Properties | null,\n        options: CaptureOptions = __NOOPTIONS\n    ): CaptureResult | void {\n        // While developing, a developer might purposefully _not_ call init(),\n        // in this case, we would like capture to be a noop.\n        if (!this.__loaded) {\n            return\n        }\n\n        if (userOptedOut(this, false)) {\n            return\n        }\n\n        this._captureMetrics.incr('capture')\n        if (event_name === '$snapshot') {\n            this._captureMetrics.incr('snapshot')\n        }\n\n        options = options || __NOOPTIONS\n        const transport = options['transport'] // external API, don't minify 'transport' prop\n        if (transport) {\n            options.transport = transport // 'transport' prop name can be minified internally\n        }\n\n        // typing doesn't prevent interesting data\n        if (_isUndefined(event_name) || typeof event_name !== 'string') {\n            console.error('No event name provided to posthog.capture')\n            return\n        }\n\n        if (_isBlockedUA(userAgent)) {\n            return\n        }\n\n        const start_timestamp = this.persistence.remove_event_timer(event_name)\n\n        // update persistence\n        this.persistence.update_search_keyword(document.referrer)\n\n        if (this.get_config('store_google')) {\n            this.persistence.update_campaign_params()\n        }\n        if (this.get_config('save_referrer')) {\n            this.persistence.update_referrer_info(document.referrer)\n        }\n\n        let data: CaptureResult = {\n            event: event_name,\n            properties: this._calculate_event_properties(event_name, properties || {}, start_timestamp),\n        }\n\n        if (event_name === '$identify' && options.$set) {\n            data['$set'] = options['$set']\n        }\n\n        data = _copyAndTruncateStrings(\n            data,\n            options._noTruncate ? null : this.get_config('properties_string_max_length')\n        )\n        data.timestamp = options.timestamp || new Date()\n\n        if (this.get_config('debug')) {\n            logger.log('PostHog.js send', data)\n        }\n        const jsonData = JSON.stringify(data)\n\n        const url = this.get_config('api_host') + (options.endpoint || '/e/')\n\n        const has_unique_traits = options !== __NOOPTIONS\n\n        if (\n            this.get_config('request_batching') &&\n            (!has_unique_traits || options._batchKey) &&\n            !options.send_instantly\n        ) {\n            this._requestQueue.enqueue(url, data, options)\n        } else {\n            this.__compress_and_send_json_request(url, jsonData, options)\n        }\n\n        this._invokeCaptureHooks(event_name, data)\n\n        return data\n    }\n\n    _addCaptureHook(callback: (eventName: string) => void): void {\n        this.__captureHooks.push(callback)\n    }\n\n    _invokeCaptureHooks(eventName: string, eventData: CaptureResult): void {\n        this.config._onCapture(eventName, eventData)\n        _each(this.__captureHooks, (callback) => callback(eventName))\n    }\n\n    _calculate_event_properties(event_name: string, event_properties: Properties, start_timestamp: number): Properties {\n        // set defaults\n        let properties = { ...event_properties }\n        properties['token'] = this.get_config('token')\n\n        if (event_name === '$snapshot') {\n            const persistenceProps = this.persistence.properties()\n            properties['distinct_id'] = persistenceProps.distinct_id\n            return properties\n        }\n\n        // set $duration if time_event was previously called for this event\n        if (typeof start_timestamp !== 'undefined') {\n            const duration_in_ms = new Date().getTime() - start_timestamp\n            properties['$duration'] = parseFloat((duration_in_ms / 1000).toFixed(3))\n        }\n\n        if (this.sessionManager) {\n            const { sessionId, windowId } = this.sessionManager.checkAndGetSessionAndWindowId()\n            properties['$session_id'] = sessionId\n            properties['$window_id'] = windowId\n        }\n        // note: extend writes to the first object, so lets make sure we\n        // don't write to the persistence properties object and info\n        // properties object by passing in a new object\n\n        // update properties with pageview info and super-properties\n        properties = _extend({}, _info.properties(), this.persistence.properties(), properties)\n\n        if (event_name === '$pageview' && this.get_config('_capture_performance')) {\n            properties = _extend(properties, getPerformanceData())\n        }\n\n        const property_blacklist = this.get_config('property_blacklist')\n        if (_isArray(property_blacklist)) {\n            _each(property_blacklist, function (blacklisted_prop) {\n                delete properties[blacklisted_prop]\n            })\n        } else {\n            console.error('Invalid value for property_blacklist config: ' + property_blacklist)\n        }\n\n        const sanitize_properties = this.get_config('sanitize_properties')\n        if (sanitize_properties) {\n            properties = sanitize_properties(properties, event_name)\n        }\n\n        return properties\n    }\n\n    /**\n     * Register a set of super properties, which are included with all\n     * events. This will overwrite previous super property values.\n     *\n     * ### Usage:\n     *\n     *     // register 'Gender' as a super property\n     *     posthog.register({'Gender': 'Female'});\n     *\n     *     // register several super properties when a user signs up\n     *     posthog.register({\n     *         'Email': 'jdoe@example.com',\n     *         'Account Type': 'Free'\n     *     });\n     *\n     * @param {Object} properties An associative array of properties to store about the user\n     * @param {Number} [days] How many days since the user's last visit to store the super properties\n     */\n    register(properties: Properties, days?: number): void {\n        this.persistence.register(properties, days)\n    }\n\n    /**\n     * Register a set of super properties only once. This will not\n     * overwrite previous super property values, unlike register().\n     *\n     * ### Usage:\n     *\n     *     // register a super property for the first time only\n     *     posthog.register_once({\n     *         'First Login Date': new Date().toISOString()\n     *     });\n     *\n     * ### Notes:\n     *\n     * If default_value is specified, current super properties\n     * with that value will be overwritten.\n     *\n     * @param {Object} properties An associative array of properties to store about the user\n     * @param {*} [default_value] Value to override if already set in super properties (ex: 'False') Default: 'None'\n     * @param {Number} [days] How many days since the users last visit to store the super properties\n     */\n    register_once(properties: Properties, default_value?: Property, days?: number): void {\n        this.persistence.register_once(properties, default_value, days)\n    }\n\n    /**\n     * Delete a super property stored with the current user.\n     *\n     * @param {String} property The name of the super property to remove\n     */\n    unregister(property: string): void {\n        this.persistence.unregister(property)\n    }\n\n    _register_single(prop: string, value: Property) {\n        this.register({ [prop]: value })\n    }\n\n    /*\n     * Get feature flag value for user (supports multivariate flags).\n     *\n     * ### Usage:\n     *\n     *     if(posthog.getFeatureFlag('beta-feature') === 'some-value') { // do something }\n     *\n     * @param {Object|String} prop Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    getFeatureFlag(key: string, options?: { send_event?: boolean }): boolean | string | undefined {\n        return this.featureFlags.getFeatureFlag(key, options)\n    }\n\n    /*\n     * See if feature flag is enabled for user.\n     *\n     * ### Usage:\n     *\n     *     if(posthog.isFeatureEnabled('beta-feature')) { // do something }\n     *\n     * @param {Object|String} prop Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    isFeatureEnabled(key: string, options?: isFeatureEnabledOptions): boolean {\n        return this.featureFlags.isFeatureEnabled(key, options)\n    }\n\n    reloadFeatureFlags(): void {\n        this.featureFlags.reloadFeatureFlags()\n    }\n\n    /*\n     * Register an event listener that runs when feature flags become available or when they change.\n     * If there are flags, the listener is called immediately in addition to being called on future changes.\n     *\n     * ### Usage:\n     *\n     *     posthog.onFeatureFlags(function(featureFlags) { // do something })\n     *\n     * @param {Function} [callback] The callback function will be called once the feature flags are ready or when they are updated.\n     *                              It'll return a list of feature flags enabled for the user.\n     */\n    onFeatureFlags(callback: (flags: string[], variants: Record<string, boolean | string>) => void): void {\n        return this.featureFlags.onFeatureFlags(callback)\n    }\n\n    /**\n     * Identify a user with a unique ID instead of a PostHog\n     * randomly generated distinct_id. If the method is never called,\n     * then unique visitors will be identified by a UUID generated\n     * the first time they visit the site.\n     *\n     * If user properties are passed, they are also sent to posthog.\n     *\n     * ### Usage:\n     *\n     *      posthog.identify('[user unique id]')\n     *      posthog.identify('[user unique id]', { email: 'john@example.com' })\n     *      posthog.identify('[user unique id]', {}, { referral_code: '12345' })\n     *\n     * ### Notes:\n     *\n     * You can call this function to overwrite a previously set\n     * unique ID for the current user. PostHog cannot translate\n     * between IDs at this time, so when you change a user's ID\n     * they will appear to be a new user.\n     *\n     * When used alone, posthog.identify will change the user's\n     * distinct_id to the unique ID provided. When used in tandem\n     * with posthog.alias, it will allow you to identify based on\n     * unique ID and map that back to the original, anonymous\n     * distinct_id given to the user upon her first arrival to your\n     * site (thus connecting anonymous pre-signup activity to\n     * post-signup activity). Though the two work together, do not\n     * call identify() at the same time as alias(). Calling the two\n     * at the same time can cause a race condition, so it is best\n     * practice to call identify on the original, anonymous ID\n     * right after you've aliased it.\n     *\n     * @param {String} [new_distinct_id] A string that uniquely identifies a user. If not provided, the distinct_id currently in the persistent store (cookie or localStorage) will be used.\n     * @param {Object} [userPropertiesToSet] Optional: An associative array of properties to store about the user\n     * @param {Object} [userPropertiesToSetOnce] Optional: An associative array of properties to store about the user. If property is previously set, this does not override that value.\n     */\n    identify(new_distinct_id?: string, userPropertiesToSet?: Properties, userPropertiesToSetOnce?: Properties): void {\n        //if the new_distinct_id has not been set ignore the identify event\n        if (!new_distinct_id) {\n            console.error('Unique user id has not been set in posthog.identify')\n            return\n        }\n\n        this._captureMetrics.incr('identify')\n\n        const previous_distinct_id = this.get_distinct_id()\n        this.register({ $user_id: new_distinct_id })\n\n        if (!this.get_property('$device_id')) {\n            // The persisted distinct id might not actually be a device id at all\n            // it might be a distinct id of the user from before\n            const device_id = previous_distinct_id\n            this.register_once(\n                {\n                    $had_persisted_distinct_id: true,\n                    $device_id: device_id,\n                },\n                ''\n            )\n        }\n\n        // identify only changes the distinct id if it doesn't match either the existing or the alias;\n        // if it's new, blow away the alias as well.\n        if (new_distinct_id !== previous_distinct_id && new_distinct_id !== this.get_property(ALIAS_ID_KEY)) {\n            this.unregister(ALIAS_ID_KEY)\n            this.register({ distinct_id: new_distinct_id })\n        }\n\n        // send an $identify event any time the distinct_id is changing and the old ID is an anoymous ID\n        // - logic on the server will determine whether or not to do anything with it.\n        if (\n            new_distinct_id !== previous_distinct_id &&\n            (!this.get_property('$device_id') || previous_distinct_id === this.get_property('$device_id'))\n        ) {\n            this.capture(\n                '$identify',\n                {\n                    distinct_id: new_distinct_id,\n                    $anon_distinct_id: previous_distinct_id,\n                },\n                { $set: userPropertiesToSet || {}, $set_once: userPropertiesToSetOnce || {} }\n            )\n            // let the reload feature flag request know to send this previous distinct id\n            // for flag consistency\n            this.featureFlags.setAnonymousDistinctId(previous_distinct_id)\n        } else {\n            if (userPropertiesToSet) {\n                this.people.set(userPropertiesToSet)\n            }\n            if (userPropertiesToSetOnce) {\n                this.people.set_once(userPropertiesToSetOnce)\n            }\n        }\n\n        // Reload active feature flags if the user identity changes.\n        // Note we don't reload this on property changes as these get processed async\n        if (new_distinct_id !== previous_distinct_id) {\n            this.reloadFeatureFlags()\n        }\n    }\n\n    /**\n     * Alpha feature: don't use unless you know what you're doing!\n     *\n     * Sets group analytics information for subsequent events and reloads feature flags.\n     *\n     * @param {String} groupType Group type (example: 'organization')\n     * @param {String} groupKey Group key (example: 'org::5')\n     * @param {Object} groupPropertiesToSet Optional properties to set for group\n     */\n    group(groupType: string, groupKey: string, groupPropertiesToSet?: Properties): void {\n        if (!groupType || !groupKey) {\n            console.error('posthog.group requires a group type and group key')\n            return\n        }\n\n        this._captureMetrics.incr('group')\n\n        const existingGroups = this.getGroups()\n\n        this.register({ $groups: { ...existingGroups, [groupType]: groupKey } })\n\n        if (groupPropertiesToSet) {\n            this.capture('$groupidentify', {\n                $group_type: groupType,\n                $group_key: groupKey,\n                $group_set: groupPropertiesToSet,\n            })\n        }\n\n        // If groups change, reload feature flags.\n        if (existingGroups[groupType] !== groupKey) {\n            this.reloadFeatureFlags()\n        }\n    }\n\n    /**\n     * Clears super properties and generates a new random distinct_id for this instance.\n     * Useful for clearing data when a user logs out.\n     */\n    reset(reset_device_id?: boolean): void {\n        const device_id = this.get_property('$device_id')\n        this.persistence.clear()\n        this.sessionManager.resetSessionId()\n        const uuid = this.get_config('get_device_id')(_UUID())\n        this.register_once(\n            {\n                distinct_id: uuid,\n                $device_id: reset_device_id ? uuid : device_id,\n            },\n            ''\n        )\n    }\n\n    /**\n     * Returns the current distinct id of the user. This is either the id automatically\n     * generated by the library or the id that has been passed by a call to identify().\n     *\n     * ### Notes:\n     *\n     * get_distinct_id() can only be called after the PostHog library has finished loading.\n     * init() has a loaded function available to handle this automatically. For example:\n     *\n     *     // set distinct_id after the posthog library has loaded\n     *     posthog.init('YOUR PROJECT TOKEN', {\n     *         loaded: function(posthog) {\n     *             distinct_id = posthog.get_distinct_id();\n     *         }\n     *     });\n     */\n    get_distinct_id(): string {\n        return this.get_property('distinct_id')\n    }\n\n    getGroups(): Record<string, any> {\n        return this.get_property('$groups') || {}\n    }\n\n    /**\n     * Create an alias, which PostHog will use to link two distinct_ids going forward (not retroactively).\n     * Multiple aliases can map to the same original ID, but not vice-versa. Aliases can also be chained - the\n     * following is a valid scenario:\n     *\n     *     posthog.alias('new_id', 'existing_id');\n     *     ...\n     *     posthog.alias('newer_id', 'new_id');\n     *\n     * If the original ID is not passed in, we will use the current distinct_id - probably the auto-generated GUID.\n     *\n     * ### Notes:\n     *\n     * The best practice is to call alias() when a unique ID is first created for a user\n     * (e.g., when a user first registers for an account and provides an email address).\n     * alias() should never be called more than once for a given user, except to\n     * chain a newer ID to a previously new ID, as described above.\n     *\n     * @param {String} alias A unique identifier that you want to use for this user in the future.\n     * @param {String} [original] The current identifier being used for this user.\n     */\n    alias(alias: string, original?: string): CaptureResult | void | number {\n        // If the $people_distinct_id key exists in persistence, there has been a previous\n        // posthog.people.identify() call made for this user. It is VERY BAD to make an alias with\n        // this ID, as it will duplicate users.\n        if (alias === this.get_property(PEOPLE_DISTINCT_ID_KEY)) {\n            logger.critical('Attempting to create alias for existing People user - aborting.')\n            return -2\n        }\n\n        if (_isUndefined(original)) {\n            original = this.get_distinct_id()\n        }\n        if (alias !== original) {\n            this._register_single(ALIAS_ID_KEY, alias)\n            return this.capture('$create_alias', { alias: alias, distinct_id: original })\n        } else {\n            console.error('alias matches current distinct_id - skipping api call.')\n            this.identify(alias)\n            return -1\n        }\n    }\n\n    /**\n     * Update the configuration of a posthog library instance.\n     *\n     * The default config is:\n     *\n     *     {\n     *       // Posthog host\n     *       api_host: 'https://app.posthog.com',\n     *\n     *       // HTTP method for capturing requests\n     *       api_method: 'POST'\n     *\n     *       // Automatically capture clicks, form submissions and change events\n     *       autocapture: true\n     *\n     *       // Capture rage clicks (beta) - useful for session recording\n     *       rageclick: false\n     *\n     *       // transport for sending requests ('XHR' or 'sendBeacon')\n     *       // NB: sendBeacon should only be used for scenarios such as\n     *       // page unload where a \"best-effort\" attempt to send is\n     *       // acceptable; the sendBeacon API does not support callbacks\n     *       // or any way to know the result of the request. PostHog\n     *       // capturing via sendBeacon will not support any event-\n     *       // batching or retry mechanisms.\n     *       api_transport: 'XHR'\n     *\n     *       // super properties cookie expiration (in days)\n     *       cookie_expiration: 365\n     *\n     *       // super properties span subdomains\n     *       cross_subdomain_cookie: true\n     *\n     *       // debug mode\n     *       debug: false\n     *\n     *       // if this is true, the posthog cookie or localStorage entry\n     *       // will be deleted, and no user persistence will take place\n     *       disable_persistence: false\n     *\n     *       // if this is true, PostHog will automatically determine\n     *       // City, Region and Country data using the IP address of\n     *       //the client\n     *       ip: true\n     *\n     *       // opt users out of capturing by this PostHog instance by default\n     *       opt_out_capturing_by_default: false\n     *\n     *       // opt users out of browser data storage by this PostHog instance by default\n     *       opt_out_persistence_by_default: false\n     *\n     *       // persistence mechanism used by opt-in/opt-out methods - cookie\n     *       // or localStorage - falls back to cookie if localStorage is unavailable\n     *       opt_out_capturing_persistence_type: 'localStorage'\n     *\n     *       // customize the name of cookie/localStorage set by opt-in/opt-out methods\n     *       opt_out_capturing_cookie_prefix: null\n     *\n     *       // type of persistent store for super properties (cookie/\n     *       // localStorage) if set to 'localStorage', any existing\n     *       // posthog cookie value with the same persistence_name\n     *       // will be transferred to localStorage and deleted\n     *       persistence: 'cookie'\n     *\n     *       // name for super properties persistent store\n     *       persistence_name: ''\n     *\n     *       // names of properties/superproperties which should never\n     *       // be sent with capture() calls\n     *       property_blacklist: []\n     *\n     *       // if this is true, posthog cookies will be marked as\n     *       // secure, meaning they will only be transmitted over https\n     *       secure_cookie: false\n     *\n     *       // should we capture a page view on page load\n     *       capture_pageview: true\n     *\n     *       // if you set upgrade to be true, the library will check for\n     *       // a cookie from our old js library and import super\n     *       // properties from it, then the old cookie is deleted\n     *       // The upgrade config option only works in the initialization,\n     *       // so make sure you set it when you create the library.\n     *       upgrade: false\n     *\n     *       // if this is true, session recording is always disabled.\n     *       disable_session_recording: false,\n     *\n     *       // extra HTTP request headers to set for each API request, in\n     *       // the format {'Header-Name': value}\n     *       xhr_headers: {}\n     *\n     *       // protocol for fetching in-app message resources, e.g.\n     *       // 'https://' or 'http://'; defaults to '//' (which defers to the\n     *       // current page's protocol)\n     *       inapp_protocol: '//'\n     *\n     *       // whether to open in-app message link in new tab/window\n     *       inapp_link_new_window: false\n     *\n     *      // a set of rrweb config options that PostHog users can configure\n     *      // see https://github.com/rrweb-io/rrweb/blob/master/guide.md\n     *      session_recording: {\n     *         blockClass: 'ph-no-capture',\n     *         blockSelector: null,\n     *         ignoreClass: 'ph-ignore-input',\n     *         maskAllInputs: true,\n     *         maskInputOptions: {},\n     *         maskInputFn: null,\n     *         slimDOMOptions: {},\n     *         collectFonts: false\n     *      }\n     *\n     *      // prevent autocapture from capturing any attribute names on elements\n     *      mask_all_element_attributes: false\n     *\n     *      // prevent autocapture from capturing textContent on all elements\n     *      mask_all_text: false\n     *\n     *      // Anonymous users get a random UUID as their device by default.\n     *      // This option allows overriding that option.\n     *      get_device_id: (uuid) => uuid\n     *     }\n     *\n     *\n     * @param {Object} config A dictionary of new configuration values to update\n     */\n\n    set_config(config: Partial<PostHogConfig>): void {\n        const oldConfig = { ...this.config }\n        if (_isObject(config)) {\n            _extend(this.config, config)\n\n            if (!this.get_config('persistence_name')) {\n                this.config.persistence_name = this.config.cookie_name\n            }\n            if (!this.get_config('disable_persistence')) {\n                this.config.disable_persistence = this.config.disable_cookie\n            }\n\n            if (this.persistence) {\n                this.persistence.update_config(this.config)\n            }\n\n            if (localStore.is_supported() && localStore.get('ph_debug') === 'true') {\n                this.config.debug = true\n            }\n            if (this.get_config('debug')) {\n                Config.DEBUG = true\n            }\n\n            if (this.sessionRecording && typeof config.disable_session_recording !== 'undefined') {\n                if (oldConfig.disable_session_recording !== config.disable_session_recording) {\n                    if (config.disable_session_recording) {\n                        this.sessionRecording.stopRecording()\n                    } else {\n                        this.sessionRecording.startRecordingIfEnabled()\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * turns session recording on, and updates the config option\n     * disable_session_recording to false\n     */\n    startSessionRecording(): void {\n        this.set_config({ disable_session_recording: false })\n    }\n\n    /**\n     * turns session recording off, and updates the config option\n     * disable_session_recording to true\n     */\n    stopSessionRecording(): void {\n        this.set_config({ disable_session_recording: true })\n    }\n\n    /**\n     * returns a boolean indicating whether session recording\n     * is currently running\n     */\n    sessionRecordingStarted(): boolean {\n        return !!this.sessionRecording?.started()\n    }\n\n    /**\n     * returns the current config object for the library.\n     */\n    get_config<K extends keyof PostHogConfig>(prop_name: K): PostHogConfig[K] {\n        return this.config?.[prop_name]\n    }\n\n    /**\n     * Returns the value of the super property named property_name. If no such\n     * property is set, get_property() will return the undefined value.\n     *\n     * ### Notes:\n     *\n     * get_property() can only be called after the PostHog library has finished loading.\n     * init() has a loaded function available to handle this automatically. For example:\n     *\n     *     // grab value for 'user_id' after the posthog library has loaded\n     *     posthog.init('YOUR PROJECT TOKEN', {\n     *         loaded: function(posthog) {\n     *             user_id = posthog.get_property('user_id');\n     *         }\n     *     });\n     *\n     * @param {String} property_name The name of the super property you want to retrieve\n     */\n    get_property(property_name: string): Property | undefined {\n        return this.persistence['props'][property_name]\n    }\n\n    toString(): string {\n        let name = this.get_config('name') ?? PRIMARY_INSTANCE_NAME\n        if (name !== PRIMARY_INSTANCE_NAME) {\n            name = PRIMARY_INSTANCE_NAME + '.' + name\n        }\n        return name\n    }\n\n    // perform some housekeeping around GDPR opt-in/out state\n    _gdpr_init(): void {\n        const is_localStorage_requested = this.get_config('opt_out_capturing_persistence_type') === 'localStorage'\n\n        // try to convert opt-in/out cookies to localStorage if possible\n        if (is_localStorage_requested && localStore.is_supported()) {\n            if (!this.has_opted_in_capturing() && this.has_opted_in_capturing({ persistence_type: 'cookie' })) {\n                this.opt_in_capturing({ enable_persistence: false })\n            }\n            if (!this.has_opted_out_capturing() && this.has_opted_out_capturing({ persistence_type: 'cookie' })) {\n                this.opt_out_capturing({ clear_persistence: false })\n            }\n            this.clear_opt_in_out_capturing({\n                persistence_type: 'cookie',\n                enable_persistence: false,\n            })\n        }\n\n        // check whether the user has already opted out - if so, clear & disable persistence\n        if (this.has_opted_out_capturing()) {\n            this._gdpr_update_persistence({ clear_persistence: true })\n\n            // check whether we should opt out by default\n            // note: we don't clear persistence here by default since opt-out default state is often\n            //       used as an initial state while GDPR information is being collected\n        } else if (\n            !this.has_opted_in_capturing() &&\n            (this.get_config('opt_out_capturing_by_default') || cookieStore.get('ph_optout'))\n        ) {\n            cookieStore.remove('ph_optout')\n            this.opt_out_capturing({\n                clear_persistence: this.get_config('opt_out_persistence_by_default'),\n            })\n        }\n    }\n\n    /**\n     * Enable or disable persistence based on options\n     * only enable/disable if persistence is not already in this state\n     * @param {boolean} [options.clear_persistence] If true, will delete all data stored by the sdk in persistence and disable it\n     * @param {boolean} [options.enable_persistence] If true, will re-enable sdk persistence\n     */\n    _gdpr_update_persistence(options: Partial<OptInOutCapturingOptions>): void {\n        let disabled\n        if (options && options['clear_persistence']) {\n            disabled = true\n        } else if (options && options['enable_persistence']) {\n            disabled = false\n        } else {\n            return\n        }\n\n        if (!this.get_config('disable_persistence') && this.persistence.disabled !== disabled) {\n            this.persistence.set_disabled(disabled)\n        }\n    }\n\n    // call a base gdpr function after constructing the appropriate token and options args\n    _gdpr_call_func<R = any>(\n        func: (token: string, options: GDPROptions) => R,\n        options?: Partial<OptInOutCapturingOptions>\n    ): R {\n        options = _extend(\n            {\n                capture: this.capture.bind(this),\n                persistence_type: this.get_config('opt_out_capturing_persistence_type'),\n                cookie_prefix: this.get_config('opt_out_capturing_cookie_prefix'),\n                cookie_expiration: this.get_config('cookie_expiration'),\n                cross_subdomain_cookie: this.get_config('cross_subdomain_cookie'),\n                secure_cookie: this.get_config('secure_cookie'),\n            },\n            options || {}\n        )\n\n        // check if localStorage can be used for recording opt out status, fall back to cookie if not\n        if (!localStore.is_supported() && options['persistence_type'] === 'localStorage') {\n            options['persistence_type'] = 'cookie'\n        }\n\n        return func(this.get_config('token'), {\n            capture: options['capture'],\n            captureEventName: options['capture_event_name'],\n            captureProperties: options['capture_properties'],\n            persistenceType: options['persistence_type'],\n            persistencePrefix: options['cookie_prefix'],\n            cookieExpiration: options['cookie_expiration'],\n            crossSubdomainCookie: options['cross_subdomain_cookie'],\n            secureCookie: options['secure_cookie'],\n        })\n    }\n\n    /**\n     * Opt the user in to data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     // opt user in\n     *     posthog.opt_in_capturing();\n     *\n     *     // opt user in with specific event name, properties, cookie configuration\n     *     posthog.opt_in_capturing({\n     *         capture_event_name: 'User opted in',\n     *         capture_event_properties: {\n     *             'Email': 'jdoe@example.com'\n     *         },\n     *         cookie_expiration: 30,\n     *         secure_cookie: true\n     *     });\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {function} [options.capture] Function used for capturing a PostHog event to record the opt-in action (default is this PostHog instance's capture method)\n     * @param {string} [options.capture_event_name=$opt_in] Event name to be used for capturing the opt-in action\n     * @param {Object} [options.capture_properties] Set of properties to be captured along with the opt-in action\n     * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n     */\n    opt_in_capturing(options?: Partial<OptInOutCapturingOptions>): void {\n        options = _extend(\n            {\n                enable_persistence: true,\n            },\n            options || {}\n        )\n\n        this._gdpr_call_func(optIn, options)\n        this._gdpr_update_persistence(options)\n    }\n\n    /**\n     * Opt the user out of data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     // opt user out\n     *     posthog.opt_out_capturing();\n     *\n     *     // opt user out with different cookie configuration from PostHog instance\n     *     posthog.opt_out_capturing({\n     *         cookie_expiration: 30,\n     *         secure_cookie: true\n     *     });\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {boolean} [options.clear_persistence=true] If true, will delete all data stored by the sdk in persistence\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n     */\n    opt_out_capturing(options?: Partial<OptInOutCapturingOptions>): void {\n        const _options = _extend(\n            {\n                clear_persistence: true,\n            },\n            options || {}\n        )\n\n        this._gdpr_call_func(optOut, _options)\n        this._gdpr_update_persistence(_options)\n    }\n\n    /**\n     * Check whether the user has opted in to data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     const has_opted_in = posthog.has_opted_in_capturing();\n     *     // use has_opted_in value\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @returns {boolean} current opt-in status\n     */\n    has_opted_in_capturing(options?: Partial<OptInOutCapturingOptions>): boolean {\n        return this._gdpr_call_func(hasOptedIn, options)\n    }\n\n    /**\n     * Check whether the user has opted out of data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     const has_opted_out = posthog.has_opted_out_capturing();\n     *     // use has_opted_out value\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @returns {boolean} current opt-out status\n     */\n    has_opted_out_capturing(options?: Partial<OptInOutCapturingOptions>): boolean {\n        return this._gdpr_call_func(hasOptedOut, options)\n    }\n\n    /**\n     * Clear the user's opt in/out status of data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     // clear user's opt-in/out status\n     *     posthog.clear_opt_in_out_capturing();\n     *\n     *     // clear user's opt-in/out status with specific cookie configuration - should match\n     *     // configuration used when opt_in_capturing/opt_out_capturing methods were called.\n     *     posthog.clear_opt_in_out_capturing({\n     *         cookie_expiration: 30,\n     *         secure_cookie: true\n     *     });\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n     */\n    clear_opt_in_out_capturing(options?: Partial<OptInOutCapturingOptions>): void {\n        const _options: Partial<OptInOutCapturingOptions> = _extend(\n            {\n                enable_persistence: true,\n            },\n            options ?? {}\n        )\n        this._gdpr_call_func(clearOptInOut, _options)\n        this._gdpr_update_persistence(_options)\n    }\n\n    debug(debug?: boolean): void {\n        if (debug === false) {\n            window.console.log(\"You've disabled debug mode.\")\n            localStorage && localStorage.removeItem('ph_debug')\n            this.set_config({ debug: false })\n        } else {\n            window.console.log(\n                \"You're now in debug mode. All calls to PostHog will be logged in your console.\\nYou can disable this with `posthog.debug(false)`.\"\n            )\n            localStorage && localStorage.setItem('ph_debug', 'true')\n            this.set_config({ debug: true })\n        }\n    }\n\n    decodeLZ64(input: string | null | undefined): string | null {\n        return LZString.decompressFromBase64(input || null)\n    }\n}\n\n_safewrap_class(PostHog, ['identify'])\n\nconst instances: Record<string, PostHog> = {}\nconst extend_mp = function () {\n    // add all the sub posthog instances\n    _each(instances, function (instance, name) {\n        if (name !== PRIMARY_INSTANCE_NAME) {\n            posthog_master[name] = instance\n        }\n    })\n}\n\nconst override_ph_init_func = function () {\n    // we override the snippets init function to handle the case where a\n    // user initializes the posthog library after the script loads & runs\n    posthog_master['init'] = function (token?: string, config?: Partial<PostHogConfig>, name?: string) {\n        if (name) {\n            // initialize a sub library\n            if (!posthog_master[name]) {\n                posthog_master[name] = instances[name] = create_mplib(token || '', config || {}, name)\n                posthog_master[name]._loaded()\n            }\n            return posthog_master[name]\n        } else {\n            let instance: PostHog = posthog_master as any as PostHog\n\n            if (instances[PRIMARY_INSTANCE_NAME]) {\n                // main posthog lib already initialized\n                instance = instances[PRIMARY_INSTANCE_NAME]\n            } else if (token) {\n                // intialize the main posthog lib\n                instance = create_mplib(token, config || {}, PRIMARY_INSTANCE_NAME)\n                instance._loaded()\n                instances[PRIMARY_INSTANCE_NAME] = instance\n            }\n\n            ;(posthog_master as any) = instance\n            if (init_type === InitType.INIT_SNIPPET) {\n                ;(window as any)[PRIMARY_INSTANCE_NAME] = posthog_master\n            }\n            extend_mp()\n            return instance\n        }\n    }\n}\n\nconst add_dom_loaded_handler = function () {\n    // Cross browser DOM Loaded support\n    function dom_loaded_handler() {\n        // function flag since we only want to execute this once\n        if ((dom_loaded_handler as any).done) {\n            return\n        }\n        ;(dom_loaded_handler as any).done = true\n\n        ENQUEUE_REQUESTS = false\n\n        _each(instances, function (inst: PostHog) {\n            inst._dom_loaded()\n        })\n    }\n\n    if (document.addEventListener) {\n        if (document.readyState === 'complete') {\n            // safari 4 can fire the DOMContentLoaded event before loading all\n            // external JS (including this file). you will see some copypasta\n            // on the internet that checks for 'complete' and 'loaded', but\n            // 'loaded' is an IE thing\n            dom_loaded_handler()\n        } else {\n            document.addEventListener('DOMContentLoaded', dom_loaded_handler, false)\n        }\n    }\n\n    // fallback handler, always will work\n    _register_event(window, 'load', dom_loaded_handler, true)\n}\n\nexport function init_from_snippet(): void {\n    init_type = InitType.INIT_SNIPPET\n    if (_isUndefined((window as any).posthog)) {\n        ;(window as any).posthog = []\n    }\n    posthog_master = (window as any).posthog\n\n    if (posthog_master['__loaded'] || (posthog_master['config'] && posthog_master['persistence'])) {\n        // lib has already been loaded at least once; we don't want to override the global object this time so bomb early\n        console.error('PostHog library has already been downloaded at least once.')\n        return\n    }\n\n    // Load instances of the PostHog Library\n    _each(posthog_master['_i'], function (item: [token: string, config: Partial<PostHogConfig>, name: string]) {\n        if (item && _isArray(item)) {\n            instances[item[2]] = create_mplib(...item)\n        }\n    })\n\n    override_ph_init_func()\n    ;(posthog_master['init'] as any)()\n\n    // Fire loaded events after updating the window's posthog object\n    _each(instances, function (instance) {\n        instance._loaded()\n    })\n\n    add_dom_loaded_handler()\n}\n\nexport function init_as_module(): PostHog {\n    init_type = InitType.INIT_MODULE\n    ;(posthog_master as any) = new PostHog()\n\n    override_ph_init_func()\n    ;(posthog_master['init'] as any)()\n    add_dom_loaded_handler()\n\n    return posthog_master as any\n}\n","import { init_from_snippet } from './posthog-core'\n\ninit_from_snippet()\n"]}